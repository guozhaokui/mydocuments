> Received from Chrome:
Type: connect
V8-Version: 3.23.4 (candidate)
Protocol-Version: 1
Embedding-Host: LayaBoxPlayer
Content-Length: 0


> end of message

> Sent to Chrome:

> end of message
Content-Length:47

{"seq":11,"type":"request","command":"version"}
> end of message

> Received from Chrome:
Content-Length: 147

{"seq":0,"request_seq":11,"type":"response","command":"version","success":true,"body":{"V8Version":"3.23.4 (candidate)"},"refs":[],"running":false}
> end of message

> Sent to Chrome:
Content-Length:81

{"seq":12,"type":"request","command":"backtrace","arguments":{"inlineRefs":true}}
> end of message
Content-Length:111

{"seq":13,"type":"request","command":"flags","arguments":{"flags":[{"name":"breakPointsActive","value":true}]}}
> end of message
Content-Length:92

{"seq":15,"type":"request","command":"scripts","arguments":{"includeSource":true,"types":4}}
> end of message

> Received from Chrome:
Content-Length: 3427

{"seq":1,"request_seq":12,"type":"response","command":"backtrace","success":true,"body":{"fromFrame":0,"toFrame":4,"totalFrames":4,"frames":[{"type":"frame","index":0,"receiver":{"ref":0,"type":"object","className":"Object"},"func":{"ref":1,"type":"function","name":"","inferredName":"DataBuffer","scriptId":32},"script":{"ref":3},"constructCall":true,"atReturn":false,"debuggerFrame":false,"arguments":[{"name":"size","value":{"ref":4,"type":"number","value":20480}},{"name":"expand","value":{"ref":4,"type":"number","value":20480}},{"name":"littleEndian","value":{"ref":5,"type":"boolean","value":true}}],"locals":[],"position":261,"line":10,"column":1,"sourceLineText":"\tdebugger;","scopes":[{"type":1,"index":0},{"type":3,"index":1},{"type":0,"index":2}],"text":"#00 new [anonymous](size=20480, expand=20480, littleEndian=true) [unnamed] line 11 column 2 (position 262)"},{"type":"frame","index":1,"receiver":{"ref":6,"type":"object","className":"global"},"func":{"ref":7,"type":"function","name":"","inferredName":"SetupWebglContext","scriptId":32},"script":{"ref":3},"constructCall":false,"atReturn":false,"debuggerFrame":false,"arguments":[{"name":"webgl","value":{"ref":8,"type":"object","className":"Object"}}],"locals":[],"position":5222,"line":232,"column":20,"sourceLineText":"\twebgl._cmdBuffer = new DataBuffer(webgl.BUFFER_SIZE, webgl.BUFFER_SIZE, true);","scopes":[{"type":1,"index":0},{"type":3,"index":1},{"type":0,"index":2}],"text":"#01 [anonymous](webgl=#<Object>) [unnamed] line 233 column 21 (position 5223)"},{"type":"frame","index":2,"receiver":{"ref":6,"type":"object","className":"global"},"func":{"ref":14,"type":"function","name":"webglInit","inferredName":"","scriptId":34},"script":{"ref":16},"constructCall":false,"atReturn":false,"debuggerFrame":false,"arguments":[],"locals":[],"position":1812,"line":59,"column":1,"sourceLineText":"\tSetupWebglContext(webgl);","scopes":[{"type":1,"index":0},{"type":0,"index":1}],"text":"#02 webglInit() [unnamed] line 60 column 2 (position 1813)"},{"type":"frame","index":3,"receiver":{"ref":17,"type":"object","className":"Object"},"func":{"ref":18,"type":"function","name":"","inferredName":"pImg.onload","scriptId":34},"script":{"ref":16},"constructCall":false,"atReturn":false,"debuggerFrame":false,"arguments":[],"locals":[],"position":10681,"line":328,"column":3,"sourceLineText":"\t\t\twebglInit();","scopes":[{"type":1,"index":0},{"type":0,"index":1}],"text":"#03 #<Object>.[anonymous]() [unnamed] line 329 column 4 (position 10682)"}]},"refs":[{"handle":3,"type":"script","id":32,"lineOffset":0,"columnOffset":0,"lineCount":1689,"sourceStart":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po","sourceLength":52234,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":2},"text":"undefined (lines: 1689)"},{"handle":16,"type":"script","id":34,"lineOffset":0,"columnOffset":0,"lineCount":339,"sourceStart":"var CHILD_NUMBER = 3;  //500\r\nvar MULTI_BUFFER_IO = 1;\r\nvar MULTI_DRAWCALL = 1;\r","sourceLength":10965,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":500,"column":11},"evalFromFunctionName":{"type_":"string","value_":"scriptret","handle_":24},"context":{"ref":15},"text":"undefined (lines: 339)"}],"running":false}
> end of message
Content-Length: 164

{"seq":2,"request_seq":13,"type":"response","command":"flags","success":true,"body":{"flags":[{"name":"breakPointsActive","value":true}]},"refs":[],"running":false}
> end of message
Content-Length: 138223

{"seq":3,"request_seq":15,"type":"response","command":"scripts","success":true,"body":[{"handle":26,"type":"script","id":22,"lineOffset":0,"columnOffset":0,"lineCount":24,"source":"(function(exports){\r\nvar layaDoc = document;//document以后会被laya替换。\r\nexports.layaDoc = layaDoc;\t\r\n\r\n//console.log=function(){}\r\nexports.log=function(m){ console.log(m);}\r\n\r\nexports.printstack=function(){\r\n\tvar e = new Error();\r\n\talert(e.stack);\r\n}\r\nexports.Image = image;\r\n\r\nlayaDoc.body={\t\r\n\tstyle:{},\r\n\tappendChild:function()\r\n\t{\r\n\t},\r\n};\r\n\r\nexports.open=function(url){\r\n\tcreateProcess('scripts/index.js',url);\r\n}\r\n})(window)","sourceLength":425,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":25},"text":"undefined (lines: 24)"},{"handle":28,"type":"script","id":31,"lineOffset":0,"columnOffset":0,"lineCount":35,"source":"(function(exports){?(function(exports){\r\n\tallwebview={}\r\n\texports.createWebview=function(name,url,hidden){\r\n\t\tvar ret={\r\n\t\t\tname:name,\r\n\t\t\t//par是一个对象\r\n\t\t\t//调用创建的webview中的脚本函数。\r\n\t\t\tcallJS:function(methodName,par){\r\n\t\t\t\tandroidBridge.call('callWebviewJsMethod',JSON.stringify({name:this.name,method:methodName,params:JSON.stringify(par)}));\r\n\t\t\t},\r\n\t\t\t//创建的webview可以回调layaboxplayer的func\r\n\t\t\taddJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.addPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.addPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.addPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t},\r\n\t\t\tdelJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.delPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.delPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.delPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t}\r\n\t\t};\r\n\t\tandroidBridge.call('createWebview',JSON.stringify({name:name,url:url,hidden:hidden}));\r\n\t\tandroidBridge.name = name;\r\n\t\tallwebview[name]=ret;\r\n\t\treturn ret;\r\n\t}\r\n\t\r\n\texports.getWebview=function(name){\r\n\t\treturn allwebview[name];\r\n\t}\r\n})(window||exports);\r\n})(window)","sourceLength":1175,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":27},"text":"undefined (lines: 35)"},{"handle":30,"type":"script","id":25,"lineOffset":0,"columnOffset":0,"lineCount":28,"source":"(function(exports){\r\n//location相关的\r\n(function(exports){\r\n\tvar location = new _location();\t//这个不能是全局的，需要每个脚本线程一个。\r\n\tlocation.setHref( conch.getRunParam());\r\n\tconch.setLocationObj(location);\r\n\tObject.defineProperty( location, \"href\", {   \r\n\t\tget : function () {   \r\n\t\t\treturn location.getHref();\r\n\t\t},    \r\n\t\tset : function ( url ) { \r\n\t\t\tconch.showLoadingView( true );\r\n\t\t\tvar oldhref = location.getHref();\r\n\t\t\tif(url!=oldhref){\r\n\t\t\t\tlocation.setHref(url);\r\n\t\t\t\tif(location.getHref()!=oldhref)\r\n\t\t\t\t\treloadCurProcess();\r\n\t\t\t}\r\n\t\t} \r\n\t}); \r\n\t\r\n\tlocation.reload=function(force){\r\n\t\treloadCurProcess();\r\n\t}\r\n\t\r\n\texports.location = location;\r\n})(window||exports);\r\n})(window)","sourceLength":670,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":29},"text":"undefined (lines: 28)"},{"handle":32,"type":"script","id":24,"lineOffset":0,"columnOffset":0,"lineCount":25,"source":"(function(exports){//本地存储对象。临时的，以后要考虑存储位置、效率、空间等 TODO没完成\r\nexports.loadLocalStorage = function( url ){\r\n\tvar storagePath = conchConfig.getStoragePath();\r\n\tvar filename='';\r\n\tvar filepos=url.indexOf('file:///');\r\n\tif(filepos>=0){\r\n\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\tfilename = filename.replace(/:/g,'_');\r\n\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\tfilename = storagePath+'/'+filename+'.txt';\r\n\t}else\r\n\t\tfilename = storagePath+'/'+url.split('/')[2].replace(':','_')+'.txt';\r\n\tvar strdb = readFileSync(filename,'utf8');\r\n\tstrdb=strdb||'{}';\r\n\tvar db = JSON.parse(strdb);\r\n\tfunction savedb(){\r\n\t\twriteStrFileSync(filename,JSON.stringify(db) );\r\n\t}\r\n\tdb.setItem=function(n,v){ db[n] = v;  savedb();}\r\n\tdb.getItem=function(n){ return db[n]?db[n]:null;}\r\n\tdb.removeItem=function(n){ delete db[n]; savedb(); }\r\n\tdb.clear=function(){ db={}; savedb(); }\r\n\treturn db;\r\n};\r\n})(window)","sourceLength":916,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":31},"text":"undefined (lines: 25)"},{"handle":16,"type":"script","id":34,"lineOffset":0,"columnOffset":0,"lineCount":339,"source":"var CHILD_NUMBER = 3;  //500\r\nvar MULTI_BUFFER_IO = 1;\r\nvar MULTI_DRAWCALL = 1;\r\nvar SINGLE_DRAWCALL = 0;\r\nvar SHOW_PERFORMANCE = 1;\r\n\r\n//conch.showLoadingView( false );\r\n//PerfShow(SHOW_PERFORMANCE);\r\n\r\nvar webgl = null;\r\nvar vertexShaderObject = null;\r\nvar fragmentShaderObject = null;\r\nvar programObject = null;\r\nvar v4PositionIndex = 0;\r\nvar v4TexCoodIndex = 1;\r\nvar itv = {};\r\n\r\nvar childs=[];\r\n\r\n//4 float per vertex\r\nvar g_vertice_buffer = new Float32Array(CHILD_NUMBER*16);\r\nvar g_index_buffer   = new Uint16Array(CHILD_NUMBER*6);\r\n\r\n//load images \r\nvar g_updateCount = 0;\r\nvar g_images = [], g_loadedCount = 0, g_texIDs = [],g_texCanvasIDs = [];\r\n////////////////////////////////////////\r\n//shader source\r\n////////////////////////////////////////\r\nvar vsh_origin = 'precision mediump float;\\n'+\r\n\t\t\t\t   'attribute vec2 position;\\n'+\r\n\t\t\t\t   'attribute vec2 inputTextureCoordinate;\\n'+\r\n\t\t\t\t   'varying vec2 textureCoordinate;\\n'+\r\n\t\t\t\t   'void main()\\n'+\r\n\t\t\t\t   '{\\n'+\r\n\t\t\t\t   'gl_Position = vec4(vec2(position.x,position.y), 0.0, 1.0);\\n'+\r\n\t\t\t\t   'textureCoordinate = inputTextureCoordinate;\\n'+\r\n\t\t\t\t   '}\\n';\r\nvar fsh_origin = 'precision mediump float;\\n'+\r\n\t\t\t\t 'varying vec2 textureCoordinate;\\n'+\r\n\t\t\t\t 'uniform sampler2D inputImageTexture;\\n' + \r\n\t\t\t\t 'void main()\\n' + \r\n\t\t\t\t '{\\n' +\r\n\t\t\t\t 'gl_FragColor = texture2D(inputImageTexture, textureCoordinate);\\n'+\r\n\t\t\t\t //'gl_FragColor = vec4(1.0, 1.0,1.0,1.0);\\n'+\r\n\t\t\t\t '}\\n';\r\n\r\nfunction webglInit() {\r\n\t//window.myCanvasObject = document.getElementById( \"canvas_object\" );\r\n\twindow.myCanvasObject = window.document.createElement( \"canvas\" );//experimental-webgl\r\n\r\n\twebgl = myCanvasObject.getContext(\"experimental-webgl\");\r\n\tif(webgl == null)\r\n\t{\r\n\t\talert(\"do not support webgl\");\r\n\t\treturn;\r\n\t}\r\n\r\n\t//MUST: setup const values and dimensions\r\n\tSetupWebglContext(webgl);\r\n\t\t\r\n\tmyCanvasObject.width = window.innerWidth;\r\n\tmyCanvasObject.height = window.innerHeight;\r\n\twebgl.width = window.innerWidth;\r\n\twebgl.height = window.innerHeight;\r\n\r\n\twebgl.viewport(0, 0, myCanvasObject.width , myCanvasObject.height );\r\n}\r\n\r\nfunction shaderInitWithVertexAndFragmentShader(vsh, fsh) {\r\n\tvertexShaderObject = webgl.createShader(webgl.VERTEX_SHADER);\r\n\tfragmentShaderObject = webgl.createShader(webgl.FRAGMENT_SHADER);\r\n\twebgl.shaderSource(vertexShaderObject, vsh);\r\n\twebgl.shaderSource(fragmentShaderObject, fsh);\r\n\twebgl.compileShader(vertexShaderObject);\r\n\twebgl.compileShader(fragmentShaderObject);\r\n\tif (!webgl.getShaderParameter(vertexShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(vertexShaderObject) + \"in vertex shader\"); return; }\r\n\tif (!webgl.getShaderParameter(fragmentShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(fragmentShaderObject) + \"in fragment shader\"); return; }\r\n}\r\n\r\nfunction initShaderProgram(positionName,texName) {\r\n\tprogramObject = webgl.createProgram();\r\n\twebgl.attachShader(programObject, vertexShaderObject);\r\n\twebgl.attachShader(programObject, fragmentShaderObject);\r\n\t//webgl.bindAttribLocation(programObject, v4PositionIndex, positionName);\r\n\t//webgl.bindAttribLocation(programObject, v4TexCoodIndex, texName);\r\n\twebgl.linkProgram(programObject);\r\n\tif (!webgl.getProgramParameter(programObject, webgl.LINK_STATUS)) {\r\n\t\talert(webgl.getProgramInfoLog(programObject));\r\n\t\treturn;\r\n\t}\r\n\twebgl.useProgram(programObject);\r\n\t\r\n\twebgl.activeTexture(webgl.TEXTURE0);\r\n\tvar uniform = webgl.getUniformLocation(programObject, \"inputImageTexture\");\r\n\twebgl.uniform1i(uniform, 0);\r\n\t\t\t\t   \r\n\tv4PositionIndex\t= webgl.getAttribLocation(programObject, \"position\");\r\n\tv4TexCoodIndex\t= webgl.getAttribLocation(programObject, \"inputTextureCoordinate\");\r\n}\r\n\r\nfunction initDataBuffer()\r\n{\t\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tg_vertice_buffer[i*16+2] = 0.0;\r\n\t\tg_vertice_buffer[i*16+3] = 0.0;\r\n\t\tg_vertice_buffer[i*16+6] = 1.0;\r\n\t\tg_vertice_buffer[i*16+7] = 0.0;\t\t\r\n\t\tg_vertice_buffer[i*16+10] = 1.0;\r\n\t\tg_vertice_buffer[i*16+11] = 1.0;\t\t\t\r\n\t\tg_vertice_buffer[i*16+14] = 0.0;\r\n\t\tg_vertice_buffer[i*16+15] = 1.0;\t\r\n\r\n\t\tg_index_buffer[i*6+0] = i*4+0;\t\r\n\t\tg_index_buffer[i*6+1] = i*4+1;\r\n\t\tg_index_buffer[i*6+2] = i*4+2;\r\n\t\tg_index_buffer[i*6+3] = i*4+0;\r\n\t\tg_index_buffer[i*6+4] = i*4+2;\r\n\t\tg_index_buffer[i*6+5] = i*4+3;\t\t\r\n\t}\t\r\n\r\n\t//1 create vertex buffer\r\n\tVBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\r\n\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\r\n\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \r\n\r\n\t//2 create index buffer\r\n\tIBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\twebgl.bufferData(webgl.ELEMENT_ARRAY_BUFFER, g_index_buffer, webgl.STATIC_DRAW);\r\n}\r\n\r\nfunction initTexrures(){\r\n\tfor(var i=0,sz=g_images.length;i<sz;i++)\r\n\t{\r\n\t\tvar tex = createTextureByImgObject(g_images[i]);\r\n\t\tg_texIDs.push(tex);\r\n        \r\n        var canTex = genCanvasTexture(i);\r\n        g_texCanvasIDs.push(canTex);\r\n\t}\t\r\n}\r\n\r\nfunction createTextureByImgObject(imgObj){\r\n\r\n\tvar textureObject = webgl.createTexture();\r\n\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\twebgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, imgObj);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n\treturn textureObject;\r\n}\r\n\r\nfunction genCanvasTexture(index)\r\n{\r\n    var pCanvas = window.document.createElement(\"canvas\");\r\n    pCanvas.width = 256;\r\n    pCanvas.height = 256;\r\n    var ctx = pCanvas.getContext(\"2d\");\r\n    ctx.save();\r\n    ctx.globalAlpha = 1;\r\n    ctx.clearRect(0, 0, 1024, 768);\r\n    ctx.fillStyle = \"#ff0000\";\r\n    ctx.fillRect(0,0,1000,1000);\r\n    \r\n    var image = g_images[0];\r\n    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n    ctx.font = \"normal 700 50px Arial\";\r\n    ctx.fillStyle = \"#ffff00\";\r\n    ctx.fillText(\"2D canvas:\"+index, 10, 10);\r\n    ctx.restore();\r\n\r\n    var textureObject = webgl.createTexture();\r\n    webgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n    webgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, pCanvas);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n    return textureObject;\r\n}\r\n\r\nfunction onDrawFrame()\r\n{\r\n\t//var sw = window.myCanvasObject.width;\r\n\t//var sh = window.myCanvasObject.height;\r\n\t\r\n\tg_updateCount++;\r\n\tvar k=(g_updateCount%10)*(g_updateCount%20==0?-1:1);\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tvar c=childs[i];\r\n\t\t//c._left = c._left+k*c._stepX;\r\n\t\t//c._top = c._top+k*c._stepY;\r\n\t\t\r\n\t\t//c._left = 0.0;\r\n\t\t//c._top = 0.0;\r\n\t\t\r\n\t\tif(g_updateCount%10 == 0)  c._imageId = ( c._imageId + g_updateCount )% 12;\r\n\t\t\r\n\t\tg_vertice_buffer[i*16+0] = c._left;\r\n\t\tg_vertice_buffer[i*16+1] = c._top;\r\n\t\tg_vertice_buffer[i*16+4] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+5] = c._top;\r\n\t\tg_vertice_buffer[i*16+8] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+9] = c._top+c._height;\r\n\t\tg_vertice_buffer[i*16+12] = c._left;\r\n\t\tg_vertice_buffer[i*16+13] = c._top+c._height;\t\r\n\t}\r\n\r\n\twebgl.clearColor(0.0, 0.0, 0.3, 1.0);\r\n\twebgl.clear(webgl.COLOR_BUFFER_BIT);\r\n\t\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\t\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\t\t\r\n\t}\r\n\t//1 update data into GPU\r\n\tfor(var io=0;io<MULTI_BUFFER_IO;++io)\r\n\t{\r\n\t\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\t}\r\n\t\t\r\n\t//2 render each child in loop\r\n    //\t2.1 bind texture\r\n\t//\t2.2 set offset\r\n\t//\t2.3 draw triangles\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.useProgram(programObject);\r\n\t\twebgl.activeTexture(webgl.TEXTURE0);\r\n\t\t\r\n\t\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\t\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\t\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\t\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \t\r\n\t}\t\r\n\t\r\n\tif(SINGLE_DRAWCALL)\r\n\t{\r\n\t\tvar si = parseInt(Math.random()*100000) % 12;\r\n\t\tvar textureObject=g_texIDs[si];\r\n\t\tfor(var dc=0;dc<childs.length*1;++dc)\r\n\t\t{\r\n\t\t\t//add dummy interface\r\n\t\t\twebgl.getExtension();\r\n\t\t}\r\n\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\t\twebgl.drawElements(webgl.TRIANGLES,6*childs.length, webgl.UNSIGNED_SHORT, 0);\r\n\t}\r\n\telse\r\n\t{\r\n        alert(\"canvas=\"+g_texCanvasIDs);\r\n\t\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t\t{\r\n            /*\r\n\t\t\tvar textureObject=g_texIDs[childs[i]._imageId];\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\r\n\t\t\tfor (var dc = 0; dc < MULTI_DRAWCALL; ++dc) {\r\n\t\t\t    webgl.drawElements(webgl.TRIANGLES, 6, webgl.UNSIGNED_SHORT, i * 6 * 2);\r\n\t\t\t}\r\n            */\r\n            //{{temp code for test 2D canvas texture\r\n            var canvasTex = g_texCanvasIDs[i%12];\r\n            //alert(\"canvas=\"+canvasTex);\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, canvasTex);\r\n\t\t\twebgl.drawElements(webgl.TRIANGLES,6, webgl.UNSIGNED_SHORT, i*6*2);\r\n\t\t\t//webgl.deleteTexture(canvasTex);\r\n\t\t\t//}}temp code for test 2D canvas texture\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\t//webgl.finish();\r\n\twebgl.flush();\r\n}\r\n\r\nfunction createChildren()\r\n{\r\n\tvar sw = window.myCanvasObject.width;\r\n\tvar sh = window.myCanvasObject.height;\r\n\tfor(var i=0;i<CHILD_NUMBER;i++)\r\n\t{\r\n\t\tvar node=function(){};\r\n\t\tchilds.push(node);\r\n\t\t//node._left=Math.random()*(sw-100)/sw;\r\n\t\t//node._top=Math.random()*(sh-100)/sh;\r\n\t\tnode._left=2.0*Math.random()-1.0;  //[-1.0,1.0]\r\n\t\tnode._top=2.0*Math.random()-1.0;\t\r\n\t\t//node._left=Math.random()-0.5;  //[-0.5,0.5]\r\n\t\t//node._top=Math.random()-0.5;\t\r\n\t\tnode._stepX=i%2==0?-1:1;\r\n\t\tnode._stepY=i%4==0?-1:1;\r\n\t\tnode._width = 2.0*g_images[0].width/sw;\r\n\t\tnode._height = 2.0*g_images[0].height/sh;\r\n\t\tnode._imageId = i%g_images.length;\r\n\t}\r\n\t\r\n\tinitDataBuffer();\r\n\t\r\n\tif(itv.interval != null)\r\n\t{\r\n\t\tclearInterval(itv.interval);\r\n\t\titv.interval = null;\r\n\t}\t\r\n\titv.interval = setInterval(onDrawFrame, 15);\r\n}\r\n\r\nfor(var i=0;i<12;i++)\r\n{\r\n\tvar pImg = new Image();\r\n\tg_images.push(pImg);\r\n\tpImg.onload=function()\r\n\t{\t\r\n\t\tg_loadedCount++;\r\n\t\tif(g_loadedCount==g_images.length) \r\n\t\t{\r\n\t\t\twebglInit();\r\n\t\t\tshaderInitWithVertexAndFragmentShader(vsh_origin,fsh_origin);\r\n\t\t\tinitShaderProgram(\"position\",\"inputTextureCoordinate\");\r\n\t\t\tinitTexrures();\r\n\t\t\t\r\n\t\t\tcreateChildren();\r\n\t\t}\r\n\t}\r\n\tvar si = parseInt(Math.random()*100000) % 12;\r\n\tpImg.src= \"images/\" + si + \".png\";\r\n}\r\n","sourceLength":10965,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":500,"column":11},"evalFromFunctionName":{"type_":"string","value_":"scriptret","handle_":24},"context":{"ref":15},"text":"undefined (lines: 339)"},{"handle":34,"type":"script","id":27,"lineOffset":0,"columnOffset":0,"lineCount":121,"source":"(function(exports){window=window||exports;\r\nwindow.XMLHttpRequest = function () {\r\n    var xhr = new _XMLHttpRequest();\r\n\txhr.responseType = \"text\";\r\n\txhr.responseText = null;\r\n\txhr.response = null;\r\n\txhr.url = null;\r\n\txhr.async = false;\r\n\txhr.method = 'GET';\r\n\txhr.evtmap={};\r\n\txhr.set_onreadystatechange(function (r) {\r\n\t    if (r == 1) {\r\n\t        this.readyState = 1;\r\n\t    }\r\n\t    if (this.onreadystatechange ) {\r\n            //标准的回调是没有参数的。\r\n\t        this.onreadystatechange.call(xhr);\r\n\t    }\r\n\t\t//模拟事件\r\n\t\tif(xhr.status==200){\r\n\t\t\tvar ls = xhr.evtmap['load'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f();});\r\n\t\t}else if(xhr.status==404){\r\n\t\t\tvar ls = xhr.evtmap['error'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f(null);});\r\n\t\t}\r\n\t});\r\n\txhr.validevt={'progress':1,'error':1,'abort':1,'load':1};\r\n\txhr.addEventListener=function(type, listener, useCapture){\r\n\t\tif(!xhr.validevt[type]){\r\n\t\t\tthrow('不支持的事件：'+type);\r\n\t\t}\r\n\t\txhr.evtmap[type] = xhr.evtmap[type]||[];\r\n\t\txhr.evtmap[type].push(listener);\r\n\t}\r\n\txhr.open = function (type, url, async) {\r\n\t\tthis.method=(type==='POST'?'POST':'GET');\r\n\t\tif (url.indexOf(':') < 0) url = location.fullpath + \"/\" + url;\r\n\t\tthis.url = url;\r\n\t\tthis.async = (async == null || async == undefined || async == true) ? true : false;\r\n\t\tthis._open(this.method, this.url, this.async);\r\n\t}\r\n\txhr.send = function (body) {\r\n\t    if (body instanceof ArrayBuffer || body instanceof DataView ) {\r\n\t        this.responseType = 'arraybuffer';\r\n\t    }\r\n\t\tvar _this = this;\r\n\t\tif(this.method=='POST' && body){\r\n\t\t    xhr.setPostCB(function onload(buf,strbuf) {\r\n\t\t        if (_this.responseType == 'arraybuffer') {\r\n\t\t            _this.response = buf;\r\n\t\t\t\t\t_this.responseText = strbuf;\r\n\t\t        }else{\r\n\t\t\t\t\t_this.responseText=buf;\r\n\t\t\t\t}\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n                if(_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t    }, function onerror(e) {\r\n\t\t        _this.readyState = 4;\r\n\t\t        _this.status = 404;//e; 目前好像只有200和404\r\n\t\t        _this._changeState(4);\r\n                if(_this.onerror)\r\n\t\t\t\t    _this.onerror();\t\t\t\r\n\t\t\t})\r\n\t\t\txhr.postData(this.url,body);\r\n\t\t} else {\r\n\t\t\tvar file = new layaHtml5.File(this.url);\r\n\t\t\tvar fileRead = new FileReader();\r\n\t\t\tfileRead.sync = !this.async;\r\n\t\t\tif( this.responseType == \"text\" || this.responseType == \"TEXT\" ){\r\n\t\t\t\tfileRead.responseType = 0;\r\n\t\t\t}else if( this.responseType == \"arraybuffer\" ){\r\n\t\t\t\tfileRead.responseType = 1;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"XMLhttpRequest 暂不支持的类型 responseType=\" + this.responseType );\r\n\t\t\t}\r\n\t\t\tfunction onload1()\r\n\t\t\t{\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n\t\t\t\tif (_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t\t}\r\n\t\t\tfileRead.onload = function () {\r\n\t\t\t\tif( _this.responseType == \"arraybuffer\" ){\r\n\t\t\t\t\t_this.response = fileRead.result;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.responseText = fileRead.result;\r\n\t\t\t\t}\r\n\t\t\t\tif(conchConfig.IsAsync)\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout (onload1,1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t   onload1();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfileRead.onerror = function () {\r\n\t\t\t    _this.readyState = 4;\r\n\t\t\t    _this.status = 404;\r\n\t\t\t    _this._changeState(4);\r\n                if(_this.onerror)\r\n                    _this.onerror();\r\n\t\t\t}\r\n\t\t\tif( _this.responseType == \"arraybuffer\" )\r\n\t\t\t\tfileRead.readAsArrayBuffer(file);\r\n\t\t\telse\r\n\t\t\t\tfileRead.readAsText(file);\r\n\t\t}\r\n\t}\r\n\treturn xhr;\r\n};\r\n})(window)","sourceLength":3404,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":33},"text":"undefined (lines: 121)"},{"handle":3,"type":"script","id":32,"lineOffset":0,"columnOffset":0,"lineCount":1689,"source":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis._length = 0;\r\n\tthis._ALLOC_UNIT=size;\r\n\tthis._littleEndian = littleEndian;\r\n\tthis._dataView = null;\r\n\tthis._byteArray = null;\r\n\tthis._expand_alloc = expand;\r\n\t\r\n\tdebugger;\r\n\r\n\tthis.init=function()\r\n\t{\r\n\t\tthis.ensureWrite(this._ALLOC_UNIT);\r\n\t}\r\n\t\r\n\tthis._resizeBuffer=function(size)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tvar newByteView = new Uint8Array(size);\r\n\t\t\tif (this._byteArray!=null)\r\n\t\t\t{\r\n\t\t\t\tif (this._byteArray.length <=size)\r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray.subarray (0,size));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._byteArray = newByteView;\r\n\t\t\tthis._dataView  = new DataView(newByteView.buffer);\r\n\t\t\t\r\n\t\t\tthis._length = size;\r\n\t\t}\r\n\t\tcatch (err)\r\n\t\t{\r\n\t\t\tthrow \"_resizeBuffer failed resize buffer , size:\"+size;\r\n\t\t}\t\r\n\t}\r\n\r\n\tthis.ensureWrite=function(lengthToEnsure)\r\n\t{\r\n\t\tif (this._length < lengthToEnsure)\r\n\t\t{\r\n\t\t    var times = 1;\r\n\t\t    if ((this._length + this._ALLOC_UNIT) <= lengthToEnsure) {\r\n\t\t        times = parseInt((lengthToEnsure - this._length) / this._ALLOC_UNIT) + 1;\r\n\t\t    }\r\n\t\t    this._resizeBuffer(this._length + this._ALLOC_UNIT * times);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeBoolean=function(value)\r\n\t{\r\n\t\tthis.writeByte(value ? 1 :0);\r\n\t}\r\n\t\r\n\tthis.writeByte=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+1);\r\n\t\tthis._dataView.setInt8 (this._position,value);\r\n\t\tthis._position+=1;\r\n\t}\r\n\t\r\n\tthis.writeBytes=function(bytes,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)throw \"writeBytes error - Out of bounds\";\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=bytes.length-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+length);\r\n\t\tthis._byteArray.set(bytes._byteArray.subarray (offset,offset+length),this._position);\r\n\t\tthis._position+=length;\t\t\r\n\t}\r\n\t\r\n\tthis.writeString=function(str,len)\r\n\t{\r\n\t\tif(str.length==0)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+len);\r\n\t\tfor (var i=0, strLen=str.length; i < strLen; ++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,str.charCodeAt(i));\r\n\t\t\tthis._position++;\r\n\t\t}\t\r\n\t\tfor(var i=strLen;i<len;++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,0);\r\n\t\t\tthis._position++;\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeArrayBuffer=function(arraybuffer,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)\r\n\t\t{\r\n\t\t\tthrow \"writeArrayBuffer error - Out of bounds\";\r\n\t\t}\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=arraybuffer.byteLength-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite(this._position + length);\r\n\t\tvar uint8array = new Uint8Array(arraybuffer, offset, length);\r\n\t\tthis._byteArray.set(uint8array, this._position);\r\n\t\tthis._position += length;\r\n\t}\r\n\t\r\n\tthis.writeFloat=function(x)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setFloat32 (this._position,x,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeInt=function(value)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setInt32(this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeShort=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setInt16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint32=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+4);\r\n\t\tthis._dataView.setUint32 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint16=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setUint16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.reset=function()\r\n\t{\r\n\t\tthis._position = 0;\r\n\t}\r\n\t\r\n\tthis.seek=function(pos)\r\n\t{\r\n\t\tthis._position = pos;\r\n\t}\t\r\n\t\r\n\tthis.getByteArray=function()\r\n\t{\r\n\t\treturn this._byteArray\t\r\n\t}\r\n\t\r\n\tthis.getLength=function()\r\n\t{\r\n\t\treturn this._length;\r\n\t}\r\n\t\r\n\tthis.getOffset=function()\r\n\t{\r\n\t\treturn this._position;\r\n\t}\r\n\t\r\n\tthis.init();\r\n}\r\n///////////////////////////////////////\r\nIdGenerator = function()\r\n{\r\n    this.FADE_ID_SEED = 0;\r\n    this.recycle_ids=[];\r\n    this.recycle = function (id)\r\n    {\r\n        for (var i = 0; i < id.length; ++i)\r\n        {\r\n            this.recycle_ids.push(id[i]);\r\n        }\r\n    }\r\n\r\n\tthis.createFadeID = function()\r\n\t{\r\n\t    var id = this.recycle_ids.pop();\r\n\t    if (id == null || id == undefined) {\r\n\t        return ++this.FADE_ID_SEED;\r\n\t    }\r\n\t    return id;\r\n\t}\r\n}\r\n\r\nProgramLocationTable = function()\r\n{\r\n\tthis.FADELOC_BASE = 50000;\r\n\tthis._obj = {};\r\n\tthis.getFadeLocation = function(fadeProgramID,name)\r\n\t{\r\n\t\tvar key = fadeProgramID+\"-\"+name;\r\n\t\tvar fadeID = this._obj[key];\r\n\t\tif( fadeID == undefined)\r\n\t\t{\r\n\t\t\tfadeID = this.FADELOC_BASE;\r\n\t\t\tthis.FADELOC_BASE++;\r\n\t\t\tthis._obj[key] = fadeID;\r\n\t\t}\r\n\t\treturn fadeID;\r\n\t}\r\n}\r\n\r\n///////////////////////////////////////\r\nSetupWebglContext=function(webgl)\r\n{\r\n\t//setup the internal properties\r\n\twebgl.BUFFER_SIZE = 20480;  //min 1024\r\n\twebgl.BUFFER_SIZE = webgl.BUFFER_SIZE<1024?1024:webgl.BUFFER_SIZE;\r\n\twebgl.width  = 0;\r\n\twebgl.height = 0;\t\r\n\twebgl._idGenerator = new IdGenerator();\r\n\twebgl._locTable = new ProgramLocationTable();\t\r\n\twebgl._cmdBuffer = new DataBuffer(webgl.BUFFER_SIZE, webgl.BUFFER_SIZE, true);\r\n\twebgl._RTObjBuffer = [];// new DataBuffer(32, 32, true);\r\n\twebgl._RTObjAB = new Uint32Array(64);   //这个是为了提高效率。\r\n\twebgl._recycle_ids = [];\r\n\r\n\t//setup js functions\r\n    webgl.getExtension = function(name)\r\n\t{\r\n\t\t//alert(\"<IN>  getExtension\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getExtension);\r\n\t\t//alert(\"<OUT>  getExtension\");\r\n\t}\t\r\n\t\r\n\twebgl.createBuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createBuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createBuffer\");\r\n\t\treturn fadeID;\r\n\t}\r\n\r\n\twebgl.bindBuffer = function(target, buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindBuffer);\r\n\t\tthis._cmdBuffer.writeUint16(target);\t\r\n\t\tthis._cmdBuffer.writeUint16(buffer);\t\r\n\t\t//alert(\"<OUT>  bindBuffer\");\t\t\r\n\t}\r\n\t\r\n\twebgl.flush = function()\r\n\t{\r\n\t\t//alert(\"<IN>  flush\");\r\n\t\tif(this._cmdBuffer.getLength()==0)\r\n\t\t{\r\n\t\t\t//to avoid multi-call flush interface\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this._RTObjBuffer.length>= this._RTObjAB.length){\r\n\t\t    this._RTObjAB = new Uint32Array(this._RTObjBuffer.length+4);\r\n\t\t}\r\n\r\n\t\tthis._RTObjAB.set(this._RTObjBuffer);\r\n\t\tthis.flushNeededRT(this._RTObjBuffer.length, this._RTObjAB);\r\n\t\tthis._RTObjBuffer.length = 0;\r\n\t\tthis.flushRenderCommands(this._cmdBuffer.getByteArray(), this._cmdBuffer.getOffset());\r\n\t\t\t\r\n\t    //clear buffer\r\n\t\tif (this._recycle_ids.length > 0)\r\n\t\t{\r\n\t\t    this._idGenerator.recycle(this._recycle_ids);\r\n\t\t    this._recycle_ids = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis._cmdBuffer.reset();\r\n\t\t//alert(\"<OUT>  flush\");\r\n\t}\r\n\t\r\n\twebgl.bufferData=function(target, sizeOrArray, usage)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferData\");\r\n\t\t////alert(\"arguments[1] :\"+arguments[1]);\r\n\t\tif(typeof(arguments[1]) === 'number')\r\n\t\t{\r\n\t\t\t////alert(\"size :\"+arguments[1]);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_size);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[1]);\t//size\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t////alert(\"vector :\"+arguments[1].length);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_vector);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\r\n\t\t\tvar length = arguments[1].byteLength;\r\n\t\t\tif ((length % 4) != 0)\r\n\t\t\t{\r\n\t\t\t    alert(\"bufferData,len is not 4 align,length=\" + length);\r\n\t\t\t}\r\n\r\n\t\t\tthis._cmdBuffer.writeUint32(length);\t//length\t\t\r\n\t\t\tthis._cmdBuffer.writeArrayBuffer(arguments[1].buffer, 0, length);\t//buffer\t\t\r\n\t\t}\r\n\t\t//alert(\"<OUT>  bufferData\");\r\n\t}\r\n\r\n\twebgl.createShader = function(type)\r\n\t{\r\n\t\t//alert(\"<IN>  createShader\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createShader);\r\n\t\tthis._cmdBuffer.writeUint16(type);\r\n\t\tthis._cmdBuffer.writeUint16(fadeID);\r\n\t\t//alert(\"<OUT>  createShader\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.shaderSource = function(shader, source)\r\n\t{\r\n\t\t//alert(\"<IN>  shaderSource\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_shaderSource);\r\n\t\tthis._cmdBuffer.writeUint16(shader);\r\n\r\n\t\t//4 byte align\r\n\t\tvar len = (source.length+3)&0xfffffffc;\r\n\t\tif(len==source.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\t////alert(\"source.length=\"+source.length+\",len=\"+len);\r\n\t\t\r\n\t\tthis._cmdBuffer.writeUint16(len);\t\r\n\t\tthis._cmdBuffer.writeString(source,len);\r\n\t\t//alert(\"shaderSource:len=\"+len+\",src=\"+source);\r\n\t\t//alert(\"<OUT>  shaderSource\");\r\n\t}\r\n\t\r\n\twebgl.compileShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  compileShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_compileShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  compileShader\");\r\n\t}\r\n\t\r\n\twebgl.getShaderParameter = function(shader, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getShaderParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getShaderParameter);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\t\r\n\t\t//alert(\"<OUT>  getShaderParameter\");\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\twebgl.createProgram = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createProgram\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createProgram);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createProgram\");\r\n\t\treturn fadeID;\t\r\n\t}\r\n\r\n\twebgl.attachShader = function(program, shader)\r\n\t{\r\n\t\t//alert(\"<IN>  attachShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_attachShader);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  attachShader\");\t\t\r\n\t}\r\n\t\r\n\twebgl.linkProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  linkProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_linkProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  linkProgram\");\r\n\t}\r\n\t\r\n\twebgl.getProgramParameter = function(program, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getProgramParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getProgramParameter);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\t//alert(\"<OUT>  getProgramParameter\");\r\n\t\treturn true;\t\t\r\n\t}\r\n\t\r\n\twebgl.useProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  useProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_useProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  useProgram\");\t\t\r\n\t}\r\n\t\r\n\twebgl.getUniformLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getUniformLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getUniformLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getUniformLocation\");\r\n\t\treturn fadeLoc;\r\n\t}\r\n\r\n\twebgl.getAttribLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getAttribLocation\");\r\n\t\t////alert(\"getAttribLocation: fadeLoc=\"+fadeLoc+\",name=\"+name);\t\t\r\n\t\treturn fadeLoc;\r\n\t}\r\n\t\r\n\twebgl.disable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  disable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\r\n\t\t//alert(\"<OUT>  disable\");\r\n\t}\r\n\t\r\n\twebgl.enable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  enable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\t\r\n\t\t//alert(\"<OUT>  enable\");\t\t\r\n\t}\r\n\t\r\n\twebgl.colorMask = function(red, green,  blue, alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  colorMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_colorMask);\r\n\t\tthis._cmdBuffer.writeBoolean(red);\r\n\t\tthis._cmdBuffer.writeBoolean(green);\t\r\n\t\tthis._cmdBuffer.writeBoolean(blue);\t\r\n\t\tthis._cmdBuffer.writeBoolean(alpha);\r\n\t\t//alert(\"<OUT>  colorMask\");\r\n\t}\r\n\r\n\twebgl.viewport = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  viewport\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_viewport);\r\n\t\tthis._cmdBuffer.writeUint16(x);\t\r\n\t\tthis._cmdBuffer.writeUint16(y);\t\r\n\t\tthis._cmdBuffer.writeUint16(width);\t\r\n\t\tthis._cmdBuffer.writeUint16(height);\t\r\n\t\t//alert(\"<OUT>  viewport\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clear = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  clear\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clear);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  clear\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clearColor = function(red, green, blue,  alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  clearColor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clearColor);\r\n\t\tthis._cmdBuffer.writeFloat(red);\r\n\t\tthis._cmdBuffer.writeFloat(green);\r\n\t\tthis._cmdBuffer.writeFloat(blue);\r\n\t\tthis._cmdBuffer.writeFloat(alpha);\r\n\t\t//alert(\"<OUT>  clearColor\");\r\n\t}\r\n\t\r\n\twebgl.createTexture = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createTexture\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createTexture);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createTexture\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.bindTexture = function(target, texture)\r\n\t{\r\n\t\t//alert(\"<IN>  bindTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindTexture);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  bindTexture\");\r\n\t}\r\n\t\r\n\twebgl.pixelStorei = function(pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  pixelStorei\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_pixelStorei);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  pixelStorei\");\r\n\t}\r\n\t\r\n\twebgl.texImage2D = function(target, level, internalformat, width, height, border, format, type, pixels)\r\n\t{\r\n\t\t//alert(\"<IN>  texImage2D\");\r\n\t\tif(arguments.length==9)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_09);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//width\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//height\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//border\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[6]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[7]);\t//type\r\n\t\t\tif(arguments[8])\r\n\t\t\t{\r\n\t\t\t    //if( )\r\n\t\t\t    alert('判断 canvas');\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[8].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse if(arguments.length==6)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_06);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[4]);\t//type\r\n\t\t\tif(arguments[5])\r\n\t\t\t{\r\n\t\t\t    if (arguments[5].isCanvas && arguments[5].isCanvas()) {\r\n\t\t\t        this._RTObjBuffer.push(arguments[5].conchThisID);\r\n\t\t\t    }\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[5].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t}\r\n\t\t//alert(\"<OUT>  texImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texSubImage2D = function(target, level, xoffset, yoffset,  format, type, source)\r\n\t{\r\n\t\t//alert(\"<IN>  texSubImage2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texSubImage2D);\r\n\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//xoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//yoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//format\r\n\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//type\r\n\t\tif(arguments[6])\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[6].conchThisID);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t}\t\r\n\t\t//alert(\"<OUT>  texSubImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texParameterf = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameterf\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameterf);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeFloat(param);\t\t\r\n\t\t//alert(\"<OUT>  texParameterf\");\r\n\t}\r\n\t\r\n\twebgl.texParameteri = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameteri\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameteri);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  texParameteri\");\r\n\t}\r\n\t\r\n\twebgl.activeTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  activeTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_activeTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  activeTexture\");\r\n\t}\r\n\t\r\n\twebgl.getShaderInfoLog = function(shader)\r\n\t{\r\n\t\treturn \"unknown log\";\r\n\t}\r\n\r\n\twebgl.uniform1f = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\r\n\t\t//alert(\"<OUT>  uniform1f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform1i = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\r\n\t\t//alert(\"<OUT>  uniform1i\");\r\n\t}\r\n\t\r\n\twebgl.uniform2f = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\t//alert(\"<OUT>  uniform2f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform2i = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\t//alert(\"<OUT>  uniform2i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3f = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\t//alert(\"<OUT>  uniform3f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3i = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\t//alert(\"<OUT>  uniform3i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform4f = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\tthis._cmdBuffer.writeFloat(w);\r\n\t\t//alert(\"<OUT>  uniform4f\");\r\n\t}\r\n\t\t\t\t\t\r\n\twebgl.uniform4i = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\tthis._cmdBuffer.writeUint32(w);\t\r\n\t\t//alert(\"<OUT>  uniform4i\");\r\n\t}\r\n\t\r\n\twebgl.uniform1iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1iv\");\r\n\t\tthis.uniform1i(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1iv\");\r\n\t}\r\n\twebgl.uniform1fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1fv\");\r\n\t\tthis.uniform1f(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1fv\");\r\n\t}\r\n\twebgl.uniform2iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2iv\");\r\n\t\tthis.uniform2i(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2iv\");\r\n\t}\r\n\twebgl.uniform2fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2fv\");\r\n\t\tthis.uniform2f(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2fv\");\r\n\t}\r\n\twebgl.uniform3iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3iv\");\r\n\t\tthis.uniform3i(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3iv\");\r\n\t}\r\n\twebgl.uniform3fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3fv\");\r\n\t\tthis.uniform3f(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3fv\");\r\n\t}\r\n\twebgl.uniform4iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4iv\");\r\n\t\tthis.uniform4i(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4iv\");\r\n\t}\r\n\twebgl.uniform4fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4fv\");\r\n\t\tthis.uniform4f(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4fv\");\r\n\t}\t\r\n\t\r\n\t\r\n\twebgl._uniformMatrixfv_x = function(cmd,location, transpose, values,number)\r\n\t{\r\n\t\tthis._cmdBuffer.writeUint32(cmd);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(transpose);\t\r\n\r\n\t\tvar length = values.byteLength;\r\n\t\tif ((length % 4) != 0) {\r\n\t\t    alert(\"_uniformMatrixfv_x- len is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);  //byte length\r\n\t\tthis._cmdBuffer.writeArrayBuffer(values.buffer, 0, length);\r\n\t}\r\n\r\n\twebgl.uniformMatrix2fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix2fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix2fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix2fv\");\r\n\t}\r\n\r\n\twebgl.uniformMatrix3fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix3fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix3fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix3fv\");\r\n\t}\r\n\t\r\n\twebgl.uniformMatrix4fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix4fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix4fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix4fv\");\r\n\t}\r\n\t\r\n\twebgl.vertexAttribPointer = function(index, size, type, normalized, stride, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  vertexAttribPointer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_vertexAttribPointer);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\tthis._cmdBuffer.writeUint32(size);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(normalized);\r\n\t\tthis._cmdBuffer.writeUint32(stride);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  vertexAttribPointer\");\r\n\t}\r\n\r\n\twebgl.enableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  enableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  enableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.blendFunc = function(sfactor, dfactor)\r\n\t{\r\n\t\t//alert(\"<IN>  blendFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_blendFunc);\r\n\t\tthis._cmdBuffer.writeUint16(sfactor);\r\n\t\tthis._cmdBuffer.writeUint16(dfactor);\r\n\t\t//alert(\"<OUT>  blendFunc\");\r\n\t}\r\n\t\r\n\twebgl.bufferSubData = function(target, offset, data)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferSubData\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bufferSubData);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t\r\n\t\tvar length = data.byteLength;\r\n\t\tif ((length % 4) != 0)\r\n\t\t{\r\n\t\t    alert(\"bufferSubData- length is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);\r\n\t\tthis._cmdBuffer.writeArrayBuffer(data.buffer, 0, length);\r\n\r\n\t\t//alert(\"<OUT>  bufferSubData\");\r\n\t}\r\n\t\r\n\twebgl.drawElements = function(mode, count, type, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  drawElements\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawElements);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  drawElements\");\r\n\t}\r\n\t\r\n\twebgl.deleteTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\r\n\t\tthis._recycle_ids.push(texture);\r\n\t\t//alert(\"<OUT>  deleteTexture\");\r\n\t}\r\n\r\n\twebgl.drawArrays = function(mode, first,  count)\r\n\t{\r\n\t\t//alert(\"<IN>  drawArrays\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawArrays);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(first);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\t//alert(\"<OUT>  drawArrays\");\r\n\t}\r\n\t\r\n\twebgl.bindAttribLocation = function(program, index, name)\r\n\t{\r\n\t\t//alert(\"<IN>  bindAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t\r\n\t\t//4 byte align\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  bindAttribLocation\");\r\n\t}\r\n\t\r\n\twebgl.cullFace = function(mode)\r\n\t{\r\n\t\t//alert(\"<IN>  cullFace\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_cullFace);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\t//alert(\"<OUT>  cullFace\");\r\n\t}\r\n\t\r\n\twebgl.createFramebuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createFramebuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t    //alert(\"<OUT>  createFramebuffer\");\t\t\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.getParameter = function(pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getParameter);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tvar fadeValue=0;\r\n\t\tif(pname==this.FRAMEBUFFER_BINDING)\r\n\t\t{\r\n\t\t\tvar fadeValue = this._idGenerator.createFadeID();\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(fadeValue);\r\n\t\t//alert(\"<OUT>  getParameter\");\r\n\t\treturn fadeValue;\r\n\t}\r\n\t\r\n\twebgl.bindFramebuffer = function(target, framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\t\t//alert(\"<OUT>  bindFramebuffer\");\r\n\t}\r\n\r\n\twebgl.depthFunc = function(func)\r\n\t{\r\n\t\t//alert(\"<IN>  depthFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\r\n\t\t//alert(\"<OUT>  depthFunc\");\r\n\t}\r\n\t\r\n\twebgl.depthMask = function(flag)\r\n\t{\r\n\t\t//alert(\"<IN>  depthMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthMask);\r\n\t\tthis._cmdBuffer.writeUint32(flag);\t\r\n\t\t//alert(\"<OUT>  depthMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.depthRange = function(zNear, zFar)\r\n\t{\r\n\t\t//alert(\"<IN>  depthRange\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthRange);\r\n\t\tthis._cmdBuffer.writeFloat(zNear);\t\r\n\t\tthis._cmdBuffer.writeFloat(zFar);\t\r\n\t\t//alert(\"<OUT>  depthRange\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilFunc = function(func, ref,  mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\t\r\n\t\tthis._cmdBuffer.writeUint32(ref);\t\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilFunc\");\r\n\t}\r\n\t\r\n\twebgl.stencilMask = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilMask);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilOp = function(fail, zfail, zpass)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilOp\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilOp);\r\n\t\tthis._cmdBuffer.writeUint32(fail);\r\n\t\tthis._cmdBuffer.writeUint32(zfail);\r\n\t\tthis._cmdBuffer.writeUint32(zpass);\r\n\t\t//alert(\"<OUT>  stencilOp\");\r\n\t}\r\n\t\r\n\twebgl.deleteBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\r\n\t\tthis._recycle_ids.push(buffer);\r\n\t\t//alert(\"<OUT>  deleteBuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteFramebuffer = function(framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\r\n\t\tthis._recycle_ids.push(framebuffer);\r\n\t\t//alert(\"<OUT>  deleteFramebuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\r\n\t\tthis._recycle_ids.push(program);\r\n\t\t//alert(\"<OUT>  deleteProgram\");\r\n\t}\r\n\t\r\n\twebgl.deleteRenderbuffer = function(renderbuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteRenderbuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteRenderbuffer);\r\n\t\tthis._cmdBuffer.writeUint32(renderbuffer);\r\n\r\n\t\tthis._recycle_ids.push(renderbuffer);\r\n\t\t//alert(\"<OUT>  deleteRenderbuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\r\n\t\tthis._recycle_ids.push(shader);\r\n\t\t//alert(\"<OUT>  deleteShader\");\r\n\t}\r\n\t\r\n\twebgl.isBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  isBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_isBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\t\t//alert(\"<OUT>  isBuffer\");\r\n\t\treturn true;\r\n\t}\r\n\r\n\twebgl.disableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  disableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  disableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.scissor = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  scissor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_scissor);\r\n\t\tthis._cmdBuffer.writeUint32(x);\r\n\t\tthis._cmdBuffer.writeUint32(y);\r\n\t\tthis._cmdBuffer.writeUint32(width);\t\r\n\t\tthis._cmdBuffer.writeUint32(height);\t\r\n\t\t//alert(\"<OUT>  scissor\");\t\t\r\n\t}\r\n\t\r\n\twebgl.generateMipmap = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  generateMipmap\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_generateMipmap);\r\n\t\tthis._cmdBuffer.writeUint32(target);\t\t\r\n\t\t//alert(\"<OUT>  generateMipmap\");\r\n\t}\r\n\t\r\n\twebgl.framebufferTexture2D = function(target,  attachment, textarget, texture, level)\r\n\t{\r\n\t\t//alert(\"<IN>  framebufferTexture2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_framebufferTexture2D);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(attachment);\r\n\t\tthis._cmdBuffer.writeUint32(textarget);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\tthis._cmdBuffer.writeUint32(level);\r\n\t\t//alert(\"<OUT>  framebufferTexture2D\");\r\n\t}\r\n\t\r\n\twebgl.checkFramebufferStatus = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  checkFramebufferStatus\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_checkFramebufferStatus);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tif(target== this.FRAMEBUFFER)\r\n        {\r\n\t\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n            return this.FRAMEBUFFER_COMPLETE;\r\n        }\r\n\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n\t\treturn 0;\r\n\t}\r\n\r\n    //=======================扩展=======================\r\n    webgl._createMeshRT= function(){\r\n        return new gl_mesh();\r\n    }\r\n    \r\n    webgl._bindShaderFetchRT = function(vertexdesc,program,rundataDescs){\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__bindShaderFetchRT);\r\n\t\tbuff.writeUint32(fadeID); \r\n        buff.writeUint32(program);\r\n        var vdescbuf = vertexdesc.toAB();\r\n        buff.writeUint32(vdescbuf.byteLength);\r\n        buff.writeArrayBuffer(vdescbuf,0,vdescbuf.byteLength);\r\n        buff.writeUint32(rundataDescs.length);\r\n        for( var i=0; i<rundataDescs.length; i++){\r\n            var tmpab = rundataDescs[i].toAB()\r\n            buff.writeUint32(tmpab.byteLength);\r\n            buff.writeArrayBuffer(tmpab,0,tmpab.byteLength);\r\n        }\r\n        //var strVertDesc = vetexdesc.toString();\r\n        //var strRundataDesc = rundataDescs.join(';');\r\n        //var bindret = glBindShaderFetch(strVertDesc, program, strRundataDesc);\r\n        return fadeID;\r\n    }\r\n    \r\n    webgl._renderMeshRT = function(groupData, rundata){\r\n    }\r\n    \r\n    /**\r\n     * \r\n     */\r\n    webgl._renderMesh1RT = function(mesh, begin, end, gpuProgram, shaderInfo, tex, cubetex, rundata){\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__renderMesh1RT);\r\n        var meshid = mesh.getMeshID();\r\n\t\tbuff.writeUint32(meshid);\r\n\t\tbuff.writeUint32(begin);\r\n\t\tbuff.writeUint32(end);\r\n\t\tbuff.writeUint32(gpuProgram);\r\n\t\tbuff.writeUint32(shaderInfo);\r\n        \r\n\t\tif( tex && tex.length )\r\n\t\t\tbuff.writeUint32(tex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUint32(0);\r\n\t\tif( cubetex && cubetex.length )\r\n\t\t\tbuff.writeUint32(cubetex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUnit32(0);\r\n\t\tbuff.writeUint32(rundata.length);\r\n\t\t\r\n\t\tfor(var i=0; i<tex.length; i++){\r\n\t\t\tbuff.writeUint32(tex[i]);\r\n\t\t}\r\n\t\tfor(var i=0; i<cubetex.length; i++){\r\n\t\t\tbuff.writeUint32(cubetex[i]);\r\n\t\t}\r\n\r\n\t\tfor( var i=0; i<rundata.length; i++){\r\n\t\t\tbuff.writeUint32(rundata[i].byteLength);\r\n\t\t\tbuff.writeArrayBuffer(rundata[i],0,rundata[i].byteLength);\r\n\t\t}\r\n    }\r\n    //======================扩展结束======================\r\n\r\n\twebgl._setupConst = function ()\r\n\t{\r\n\t\tthis.DEPTH_BUFFER_BIT               = 0x00000100;\r\n\t\tthis.STENCIL_BUFFER_BIT             = 0x00000400;\r\n\t\tthis.COLOR_BUFFER_BIT               = 0x00004000;\r\n\t\t\r\n\t\t/* BeginMode */\r\n\t\tthis.POINTS                         = 0x0000;\r\n\t\tthis.LINES                          = 0x0001;\r\n\t\tthis.LINE_LOOP                      = 0x0002;\r\n\t\tthis.LINE_STRIP                     = 0x0003;\r\n\t\tthis.TRIANGLES                      = 0x0004;\r\n\t\tthis.TRIANGLE_STRIP                 = 0x0005;\r\n\t\tthis.TRIANGLE_FAN                   = 0x0006;\r\n\t\t\r\n\t\t/* AlphaFunction (not supported in ES20) */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\t\t\r\n\t\t/* BlendingFactorDest */\r\n\t\tthis.ZERO                           = 0;\r\n\t\tthis.ONE                            = 1;\r\n\t\tthis.SRC_COLOR                      = 0x0300;\r\n\t\tthis.ONE_MINUS_SRC_COLOR            = 0x0301;\r\n\t\tthis.SRC_ALPHA                      = 0x0302;\r\n\t\tthis.ONE_MINUS_SRC_ALPHA            = 0x0303;\r\n\t\tthis.DST_ALPHA                      = 0x0304;\r\n\t\tthis.ONE_MINUS_DST_ALPHA            = 0x0305;\r\n\t\t\r\n\t\t/* BlendingFactorSrc */\r\n\t\t/*      ZERO */\r\n\t\t/*      ONE */\r\n\t\tthis.DST_COLOR                      = 0x0306;\r\n\t\tthis.ONE_MINUS_DST_COLOR            = 0x0307;\r\n\t\tthis.SRC_ALPHA_SATURATE             = 0x0308;\r\n\t\t/*      SRC_ALPHA */\r\n\t\t/*      ONE_MINUS_SRC_ALPHA */\r\n\t\t/*      DST_ALPHA */\r\n\t\t/*      ONE_MINUS_DST_ALPHA */\r\n\r\n\t\t/* BlendEquationSeparate */\r\n\t\tthis.FUNC_ADD                       = 0x8006;\r\n\t\tthis.BLEND_EQUATION                 = 0x8009;\r\n\t\tthis.BLEND_EQUATION_RGB             = 0x8009;   /* same as BLEND_EQUATION */\r\n\t\tthis.BLEND_EQUATION_ALPHA           = 0x883D;\r\n\t\t\r\n\t\t/* BlendSubtract */\r\n\t\tthis.FUNC_SUBTRACT                  = 0x800A;\r\n\t\tthis.FUNC_REVERSE_SUBTRACT          = 0x800B;\r\n\r\n\t\t/* Separate Blend Functions */\r\n\t\tthis.BLEND_DST_RGB                  = 0x80C8;\r\n\t\tthis.BLEND_SRC_RGB                  = 0x80C9;\r\n\t\tthis.BLEND_DST_ALPHA                = 0x80CA;\r\n\t\tthis.BLEND_SRC_ALPHA                = 0x80CB;\r\n\t\tthis.CONSTANT_COLOR                 = 0x8001;\r\n\t\tthis.ONE_MINUS_CONSTANT_COLOR       = 0x8002;\r\n\t\tthis.CONSTANT_ALPHA                 = 0x8003;\r\n\t\tthis.ONE_MINUS_CONSTANT_ALPHA       = 0x8004;\r\n\t\tthis.BLEND_COLOR                    = 0x8005;\r\n\r\n\t\t/* Buffer Objects */\r\n\t\tthis.ARRAY_BUFFER                   = 0x8892;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER           = 0x8893;\r\n\t\tthis.ARRAY_BUFFER_BINDING           = 0x8894;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER_BINDING   = 0x8895;\r\n\r\n\t\tthis.STREAM_DRAW                    = 0x88E0;\r\n\t\tthis.STATIC_DRAW                    = 0x88E4;\r\n\t\tthis.DYNAMIC_DRAW                   = 0x88E8;\r\n\r\n\t\tthis.BUFFER_SIZE                    = 0x8764;\r\n\t\tthis.BUFFER_USAGE                   = 0x8765;\r\n\r\n\t\tthis.CURRENT_VERTEX_ATTRIB          = 0x8626;\r\n\r\n\t\t/* CullFaceMode */\r\n\t\tthis.FRONT                          = 0x0404;\r\n\t\tthis.BACK                           = 0x0405;\r\n\t\tthis.FRONT_AND_BACK                 = 0x0408;\r\n\r\n\t\t/* DepthFunction */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\r\n\t\t/* EnableCap */\r\n\t\t/* TEXTURE_2D */\r\n\t\tthis.CULL_FACE                      = 0x0B44;\r\n\t\tthis.BLEND                          = 0x0BE2;\r\n\t\tthis.DITHER                         = 0x0BD0;\r\n\t\tthis.STENCIL_TEST                   = 0x0B90;\r\n\t\tthis.DEPTH_TEST                     = 0x0B71;\r\n\t\tthis.SCISSOR_TEST                   = 0x0C11;\r\n\t\tthis.POLYGON_OFFSET_FILL            = 0x8037;\r\n\t\tthis.SAMPLE_ALPHA_TO_COVERAGE       = 0x809E;\r\n\t\tthis.SAMPLE_COVERAGE                = 0x80A0;\r\n\r\n\t\t/* ErrorCode */\r\n\t\t//this.NO_ERROR                       = 0;\r\n\t\tthis.INVALID_ENUM                   = 0x0500;\r\n\t\tthis.INVALID_VALUE                  = 0x0501;\r\n\t\tthis.INVALID_OPERATION              = 0x0502;\r\n\t\tthis.OUT_OF_MEMORY                  = 0x0505;\r\n\r\n\t\t/* FrontFaceDirection */\r\n\t\tthis.CW                             = 0x0900;\r\n\t\tthis.CCW                            = 0x0901;\r\n\r\n\t\t/* GetPName */\r\n\t\tthis.LINE_WIDTH                     = 0x0B21;\r\n\t\tthis.ALIASED_POINT_SIZE_RANGE       = 0x846D;\r\n\t\tthis.ALIASED_LINE_WIDTH_RANGE       = 0x846E;\r\n\t\tthis.CULL_FACE_MODE                 = 0x0B45;\r\n\t\tthis.FRONT_FACE                     = 0x0B46;\r\n\t\tthis.DEPTH_RANGE                    = 0x0B70;\r\n\t\tthis.DEPTH_WRITEMASK                = 0x0B72;\r\n\t\tthis.DEPTH_CLEAR_VALUE              = 0x0B73;\r\n\t\tthis.DEPTH_FUNC                     = 0x0B74;\r\n\t\tthis.STENCIL_CLEAR_VALUE            = 0x0B91;\r\n\t\tthis.STENCIL_FUNC                   = 0x0B92;\r\n\t\tthis.STENCIL_FAIL                   = 0x0B94;\r\n\t\tthis.STENCIL_PASS_DEPTH_FAIL        = 0x0B95;\r\n\t\tthis.STENCIL_PASS_DEPTH_PASS        = 0x0B96;\r\n\t\tthis.STENCIL_REF                    = 0x0B97;\r\n\t\tthis.STENCIL_VALUE_MASK             = 0x0B93;\r\n\t\tthis.STENCIL_WRITEMASK              = 0x0B98;\r\n\t\tthis.STENCIL_BACK_FUNC              = 0x8800;\r\n\t\tthis.STENCIL_BACK_FAIL              = 0x8801;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_FAIL   = 0x8802;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_PASS   = 0x8803;\r\n\t\tthis.STENCIL_BACK_REF               = 0x8CA3;\r\n\t\tthis.STENCIL_BACK_VALUE_MASK        = 0x8CA4;\r\n\t\tthis.STENCIL_BACK_WRITEMASK         = 0x8CA5;\r\n\t\tthis.VIEWPORT                       = 0x0BA2;\r\n\t\tthis.SCISSOR_BOX                    = 0x0C10;\r\n\t\t/*      SCISSOR_TEST */\r\n\t\tthis.COLOR_CLEAR_VALUE              = 0x0C22;\r\n\t\tthis.COLOR_WRITEMASK                = 0x0C23;\r\n\t\tthis.UNPACK_ALIGNMENT               = 0x0CF5;\r\n\t\tthis.PACK_ALIGNMENT                 = 0x0D05;\r\n\t\tthis.MAX_TEXTURE_SIZE               = 0x0D33;\r\n\t\tthis.MAX_VIEWPORT_DIMS              = 0x0D3A;\r\n\t\tthis.SUBPIXEL_BITS                  = 0x0D50;\r\n\t\tthis.RED_BITS                       = 0x0D52;\r\n\t\tthis.GREEN_BITS                     = 0x0D53;\r\n\t\tthis.BLUE_BITS                      = 0x0D54;\r\n\t\tthis.ALPHA_BITS                     = 0x0D55;\r\n\t\tthis.DEPTH_BITS                     = 0x0D56;\r\n\t\tthis.STENCIL_BITS                   = 0x0D57;\r\n\t\tthis.POLYGON_OFFSET_UNITS           = 0x2A00;\r\n\t\t/*      POLYGON_OFFSET_FILL */\r\n\t\tthis.POLYGON_OFFSET_FACTOR          = 0x8038;\r\n\t\tthis.TEXTURE_BINDING_2D             = 0x8069;\r\n\t\tthis.SAMPLE_BUFFERS                 = 0x80A8;\r\n\t\tthis.SAMPLES                        = 0x80A9;\r\n\t\tthis.SAMPLE_COVERAGE_VALUE          = 0x80AA;\r\n\t\tthis.SAMPLE_COVERAGE_INVERT         = 0x80AB;\r\n\r\n\t\t/* GetTextureParameter */\r\n\t\t/*      TEXTURE_MAG_FILTER */\r\n\t\t/*      TEXTURE_MIN_FILTER */\r\n\t\t/*      TEXTURE_WRAP_S */\r\n\t\t/*      TEXTURE_WRAP_T */\r\n\r\n\t\tthis.COMPRESSED_TEXTURE_FORMATS     = 0x86A3;\r\n\r\n\t\t/* HintMode */\r\n\t\tthis.DONT_CARE                      = 0x1100;\r\n\t\tthis.FASTEST                        = 0x1101;\r\n\t\tthis.NICEST                         = 0x1102;\r\n\r\n\t\t/* HintTarget */\r\n\t\tthis.GENERATE_MIPMAP_HINT            = 0x8192;\r\n\r\n\t\t/* DataType */\r\n\t\tthis.BYTE                           = 0x1400;\r\n\t\tthis.UNSIGNED_BYTE                  = 0x1401;\r\n\t\tthis.SHORT                          = 0x1402;\r\n\t\tthis.UNSIGNED_SHORT                 = 0x1403;\r\n\t\tthis.INT                            = 0x1404;\r\n\t\tthis.UNSIGNED_INT                   = 0x1405;\r\n\t\tthis.FLOAT                          = 0x1406;\r\n\r\n\t\t/* PixelFormat */\r\n\t\tthis.DEPTH_COMPONENT                = 0x1902;\r\n\t\tthis.ALPHA                          = 0x1906;\r\n\t\tthis.RGB                            = 0x1907;\r\n\t\tthis.RGBA                           = 0x1908;\r\n\t\tthis.LUMINANCE                      = 0x1909;\r\n\t\tthis.LUMINANCE_ALPHA                = 0x190A;\r\n\r\n\t\t/* PixelType */\r\n\t\t/*      UNSIGNED_BYTE */\r\n\t\tthis.UNSIGNED_SHORT_4_4_4_4         = 0x8033;\r\n\t\tthis.UNSIGNED_SHORT_5_5_5_1         = 0x8034;\r\n\t\tthis.UNSIGNED_SHORT_5_6_5           = 0x8363;\r\n\r\n\t\t/* Shaders */\r\n\t\tthis.FRAGMENT_SHADER                  = 0x8B30;\r\n\t\tthis.VERTEX_SHADER                    = 0x8B31;\r\n\t\tthis.MAX_VERTEX_ATTRIBS               = 0x8869;\r\n\t\tthis.MAX_VERTEX_UNIFORM_VECTORS       = 0x8DFB;\r\n\t\tthis.MAX_VARYING_VECTORS              = 0x8DFC;\r\n\t\tthis.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D;\r\n\t\tthis.MAX_VERTEX_TEXTURE_IMAGE_UNITS   = 0x8B4C;\r\n\t\tthis.MAX_TEXTURE_IMAGE_UNITS          = 0x8872;\r\n\t\tthis.MAX_FRAGMENT_UNIFORM_VECTORS     = 0x8DFD;\r\n\t\tthis.SHADER_TYPE                      = 0x8B4F;\r\n\t\tthis.DELETE_STATUS                    = 0x8B80;\r\n\t\tthis.LINK_STATUS                      = 0x8B82;\r\n\t\tthis.VALIDATE_STATUS                  = 0x8B83;\r\n\t\tthis.ATTACHED_SHADERS                 = 0x8B85;\r\n\t\tthis.ACTIVE_UNIFORMS                  = 0x8B86;\r\n\t\tthis.ACTIVE_ATTRIBUTES                = 0x8B89;\r\n\t\tthis.SHADING_LANGUAGE_VERSION         = 0x8B8C;\r\n\t\tthis.CURRENT_PROGRAM                  = 0x8B8D;\r\n\r\n\t\t/* StencilFunction */\r\n\t\tthis.NEVER                          = 0x0200;\r\n\t\tthis.LESS                           = 0x0201;\r\n\t\tthis.EQUAL                          = 0x0202;\r\n\t\tthis.LEQUAL                         = 0x0203;\r\n\t\tthis.GREATER                        = 0x0204;\r\n\t\tthis.NOTEQUAL                       = 0x0205;\r\n\t\tthis.GEQUAL                         = 0x0206;\r\n\t\tthis.ALWAYS                         = 0x0207;\r\n\r\n\t\t/* StencilOp */\r\n\t\t/*      ZERO */\r\n\t\tthis.KEEP                           = 0x1E00;\r\n\t\tthis.REPLACE                        = 0x1E01;\r\n\t\tthis.INCR                           = 0x1E02;\r\n\t\tthis.DECR                           = 0x1E03;\r\n\t\tthis.INVERT                         = 0x150A;\r\n\t\tthis.INCR_WRAP                      = 0x8507;\r\n\t\tthis.DECR_WRAP                      = 0x8508;\r\n\r\n\t\t/* StringName */\r\n\t\tthis.VENDOR                         = 0x1F00;\r\n\t\tthis.RENDERER                       = 0x1F01;\r\n\t\tthis.VERSION                        = 0x1F02;\r\n\r\n\t\t/* TextureMagFilter */\r\n\t\tthis.NEAREST                        = 0x2600;\r\n\t\tthis.LINEAR                         = 0x2601;\r\n\r\n\t\t/* TextureMinFilter */\r\n\t\t/*      NEAREST */\r\n\t\t/*      LINEAR */\r\n\t\tthis.NEAREST_MIPMAP_NEAREST         = 0x2700;\r\n\t\tthis.LINEAR_MIPMAP_NEAREST          = 0x2701;\r\n\t\tthis.NEAREST_MIPMAP_LINEAR          = 0x2702;\r\n\t\tthis.LINEAR_MIPMAP_LINEAR           = 0x2703;\r\n\r\n\t\t/* TextureParameterName */\r\n\t\tthis.TEXTURE_MAG_FILTER             = 0x2800;\r\n\t\tthis.TEXTURE_MIN_FILTER             = 0x2801;\r\n\t\tthis.TEXTURE_WRAP_S                 = 0x2802;\r\n\t\tthis.TEXTURE_WRAP_T                 = 0x2803;\r\n\r\n\t\t/* TextureTarget */\r\n\t\tthis.TEXTURE_2D                     = 0x0DE1;\r\n\t\tthis.TEXTURE                        = 0x1702;\r\n\r\n\t\tthis.TEXTURE_CUBE_MAP               = 0x8513;\r\n\t\tthis.TEXTURE_BINDING_CUBE_MAP       = 0x8514;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_X    = 0x8515;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_X    = 0x8516;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Y    = 0x8517;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Y    = 0x8518;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Z    = 0x8519;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Z    = 0x851A;\r\n\t\tthis.MAX_CUBE_MAP_TEXTURE_SIZE      = 0x851C;\r\n\r\n\t\t/* TextureUnit */\r\n\t\tthis.TEXTURE0                       = 0x84C0;\r\n\t\tthis.TEXTURE1                       = 0x84C1;\r\n\t\tthis.TEXTURE2                       = 0x84C2;\r\n\t\tthis.TEXTURE3                       = 0x84C3;\r\n\t\tthis.TEXTURE4                       = 0x84C4;\r\n\t\tthis.TEXTURE5                       = 0x84C5;\r\n\t\tthis.TEXTURE6                       = 0x84C6;\r\n\t\tthis.TEXTURE7                       = 0x84C7;\r\n\t\tthis.TEXTURE8                       = 0x84C8;\r\n\t\tthis.TEXTURE9                       = 0x84C9;\r\n\t\tthis.TEXTURE10                      = 0x84CA;\r\n\t\tthis.TEXTURE11                      = 0x84CB;\r\n\t\tthis.TEXTURE12                      = 0x84CC;\r\n\t\tthis.TEXTURE13                      = 0x84CD;\r\n\t\tthis.TEXTURE14                      = 0x84CE;\r\n\t\tthis.TEXTURE15                      = 0x84CF;\r\n\t\tthis.TEXTURE16                      = 0x84D0;\r\n\t\tthis.TEXTURE17                      = 0x84D1;\r\n\t\tthis.TEXTURE18                      = 0x84D2;\r\n\t\tthis.TEXTURE19                      = 0x84D3;\r\n\t\tthis.TEXTURE20                      = 0x84D4;\r\n\t\tthis.TEXTURE21                      = 0x84D5;\r\n\t\tthis.TEXTURE22                      = 0x84D6;\r\n\t\tthis.TEXTURE23                      = 0x84D7;\r\n\t\tthis.TEXTURE24                      = 0x84D8;\r\n\t\tthis.TEXTURE25                      = 0x84D9;\r\n\t\tthis.TEXTURE26                      = 0x84DA;\r\n\t\tthis.TEXTURE27                      = 0x84DB;\r\n\t\tthis.TEXTURE28                      = 0x84DC;\r\n\t\tthis.TEXTURE29                      = 0x84DD;\r\n\t\tthis.TEXTURE30                      = 0x84DE;\r\n\t\tthis.TEXTURE31                      = 0x84DF;\r\n\t\tthis.ACTIVE_TEXTURE                 = 0x84E0;\r\n\r\n\t\t/* TextureWrapMode */\r\n\t\tthis.REPEAT                         = 0x2901;\r\n\t\tthis.CLAMP_TO_EDGE                  = 0x812F;\r\n\t\tthis.MIRRORED_REPEAT                = 0x8370;\r\n\r\n\t\t/* Uniform Types */\r\n\t\tthis.FLOAT_VEC2                     = 0x8B50;\r\n\t\tthis.FLOAT_VEC3                     = 0x8B51;\r\n\t\tthis.FLOAT_VEC4                     = 0x8B52;\r\n\t\tthis.INT_VEC2                       = 0x8B53;\r\n\t\tthis.INT_VEC3                       = 0x8B54;\r\n\t\tthis.INT_VEC4                       = 0x8B55;\r\n\t\tthis.BOOL                           = 0x8B56;\r\n\t\tthis.BOOL_VEC2                      = 0x8B57;\r\n\t\tthis.BOOL_VEC3                      = 0x8B58;\r\n\t\tthis.BOOL_VEC4                      = 0x8B59;\r\n\t\tthis.FLOAT_MAT2                     = 0x8B5A;\r\n\t\tthis.FLOAT_MAT3                     = 0x8B5B;\r\n\t\tthis.FLOAT_MAT4                     = 0x8B5C;\r\n\t\tthis.SAMPLER_2D                     = 0x8B5E;\r\n\t\tthis.SAMPLER_CUBE                   = 0x8B60;\r\n\r\n\t\t/* Vertex Arrays */\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_ENABLED        = 0x8622;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_SIZE           = 0x8623;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_STRIDE         = 0x8624;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_TYPE           = 0x8625;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_NORMALIZED     = 0x886A;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_POINTER        = 0x8645;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889F;\r\n\r\n\t\t/* Read Format */\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_TYPE   = 0x8B9A;\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_FORMAT = 0x8B9B;\r\n\r\n\t\t/* Shader Source */\r\n\t\tthis.COMPILE_STATUS                 = 0x8B81;\r\n\r\n\t\t/* Shader Precision-Specified Types */\r\n\t\tthis.LOW_FLOAT                      = 0x8DF0;\r\n\t\tthis.MEDIUM_FLOAT                   = 0x8DF1;\r\n\t\tthis.HIGH_FLOAT                     = 0x8DF2;\r\n\t\tthis.LOW_INT                        = 0x8DF3;\r\n\t\tthis.MEDIUM_INT                     = 0x8DF4;\r\n\t\tthis.HIGH_INT                       = 0x8DF5;\r\n\r\n\t\t/* Framebuffer Object. */\r\n\t\tthis.FRAMEBUFFER                    = 0x8D40;\r\n\t\tthis.RENDERBUFFER                   = 0x8D41;\r\n\r\n\t\tthis.RGBA4                          = 0x8056;\r\n\t\tthis.RGB5_A1                        = 0x8057;\r\n\t\tthis.RGB565                         = 0x8D62;\r\n\t\tthis.DEPTH_COMPONENT16              = 0x81A5;\r\n\t\tthis.STENCIL_INDEX                  = 0x1901;\r\n\t\tthis.STENCIL_INDEX8                 = 0x8D48;\r\n\t\tthis.DEPTH_STENCIL                  = 0x84F9;\r\n\r\n\t\tthis.RENDERBUFFER_WIDTH             = 0x8D42;\r\n\t\tthis.RENDERBUFFER_HEIGHT            = 0x8D43;\r\n\t\tthis.RENDERBUFFER_INTERNAL_FORMAT   = 0x8D44;\r\n\t\tthis.RENDERBUFFER_RED_SIZE          = 0x8D50;\r\n\t\tthis.RENDERBUFFER_GREEN_SIZE        = 0x8D51;\r\n\t\tthis.RENDERBUFFER_BLUE_SIZE         = 0x8D52;\r\n\t\tthis.RENDERBUFFER_ALPHA_SIZE        = 0x8D53;\r\n\t\tthis.RENDERBUFFER_DEPTH_SIZE        = 0x8D54;\r\n\t\tthis.RENDERBUFFER_STENCIL_SIZE      = 0x8D55;\r\n\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           = 0x8CD0;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           = 0x8CD1;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         = 0x8CD2;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8CD3;\r\n\r\n\t\tthis.COLOR_ATTACHMENT0              = 0x8CE0;\r\n\t\tthis.DEPTH_ATTACHMENT               = 0x8D00;\r\n\t\tthis.STENCIL_ATTACHMENT             = 0x8D20;\r\n\t\tthis.DEPTH_STENCIL_ATTACHMENT       = 0x821A;\r\n\r\n\t\tthis.NONE                           = 0;\r\n\r\n\t\tthis.FRAMEBUFFER_COMPLETE                      = 0x8CD5;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_ATTACHMENT         = 0x8CD6;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_DIMENSIONS         = 0x8CD9;\r\n\t\tthis.FRAMEBUFFER_UNSUPPORTED                   = 0x8CDD;\r\n\r\n\t\tthis.FRAMEBUFFER_BINDING            = 0x8CA6;\r\n\t\tthis.RENDERBUFFER_BINDING           = 0x8CA7;\r\n\t\tthis.MAX_RENDERBUFFER_SIZE          = 0x84E8;\r\n\r\n\t\tthis.INVALID_FRAMEBUFFER_OPERATION  = 0x0506;\r\n\r\n\t\t/* WebGL-specific enums */\r\n\t\tthis.UNPACK_FLIP_Y_WEBGL            = 0x9240;\r\n\t\tthis.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;\r\n\t\tthis.CONTEXT_LOST_WEBGL             = 0x9242;\r\n\t\tthis.UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;\r\n\t\tthis.BROWSER_DEFAULT_WEBGL          = 0x9244;\t\r\n\t}\t\t\r\n\r\n\twebgl._setupRenderCmdID= function()\r\n\t{\r\n\t\tthis.FT_getExtension = 0;\r\n\t\tthis.FT_createBuffer = 1;\r\n\t\tthis.FT_bindBuffer = 2;\r\n\t\tthis.FT_bufferData_vector = 3;\r\n\t\tthis.FT_bufferData_size = 4;\r\n\t\tthis.FT_createShader = 5;\r\n\t\tthis.FT_shaderSource = 6;\r\n\t\tthis.FT_compileShader = 7;\r\n\t\tthis.FT_getShaderParameter = 8;\r\n\t\tthis.FT_createProgram = 9;\r\n\t\tthis.FT_attachShader = 10\r\n\t\tthis.FT_linkProgram = 11;\r\n\t\tthis.FT_getProgramParameter = 12;\r\n\t\tthis.FT_useProgram = 13;\r\n\t\tthis.FT_getUniformLocation = 14;\r\n\t\tthis.FT_getAttribLocation = 15;\r\n\t\tthis.FT_disable = 16;\r\n\t\tthis.FT_enable = 17;\r\n\t\tthis.FT_colorMask = 18;\r\n\t\tthis.FT_viewport = 19;\r\n\t\tthis.FT_clear = 20;\r\n\t\tthis.FT_clearColor = 21;\r\n\t\tthis.FT_createTexture = 22;\r\n\t\tthis.FT_bindTexture = 23;\r\n\t\tthis.FT_pixelStorei = 24;\r\n\t\tthis.FT_texImage2D_06 = 25;\r\n\t\tthis.FT_texImage2D_09 = 26;\r\n\t\tthis.FT_texSubImage2D = 27;\r\n\t\tthis.FT_texParameterf = 28;\r\n\t\tthis.FT_texParameteri = 29;\r\n\t\tthis.FT_activeTexture = 30;\r\n\t\tthis.FT_getShaderInfoLog = 31;\r\n\t\tthis.FT_uniform1f = 32;\r\n\t\tthis.FT_uniform1i = 33;\r\n\t\tthis.FT_uniform2f = 34;\r\n\t\tthis.FT_uniform2i = 35;\r\n\t\tthis.FT_uniform3f = 36;\r\n\t    this.FT_uniform3i = 37;\r\n        this.FT_uniform4f = 38;\r\n\t    this.FT_uniform4i = 39;\r\n\t    this.FT_uniformMatrix2fv = 40;\r\n\t    this.FT_uniformMatrix3fv = 41;\r\n\t    this.FT_uniformMatrix4fv = 42;\r\n\t    this.FT_vertexAttribPointer = 43;\r\n\t    this.FT_enableVertexAttribArray = 44;\r\n\t    this.FT_blendFunc = 45;\r\n\t    this.FT_bufferSubData = 46;\r\n\t    this.FT_drawElements = 47;\r\n\t    this.FT_deleteTexture = 48;\r\n        this.FT_drawArrays = 49;\r\n        this.FT_bindAttribLocation = 50;\r\n        this.FT_cullFace = 51;\r\n        this.FT_createFramebuffer = 52;\r\n        this.FT_getParameter = 53;\r\n        this.FT_bindFramebuffer = 54;\r\n        this.FT_depthFunc = 55;\r\n        this.FT_depthMask = 56;\r\n        this.FT_depthRange = 57;\r\n        this.FT_stencilFunc = 58;\r\n        this.FT_stencilMask = 59;\r\n        this.FT_stencilOp = 60;\r\n        this.FT_deleteBuffer = 61;\r\n        this.FT_deleteFramebuffer = 62;\r\n        this.FT_deleteProgram = 63;\r\n        this.FT_deleteRenderbuffer = 64;\r\n        this.FT_deleteShader = 65;\r\n        this.FT_isBuffer = 66;\r\n        this.FT_disableVertexAttribArray = 67;\r\n        this.FT_scissor = 68;\r\n        this.FT_generateMipmap = 69;\r\n        this.FT_framebufferTexture2D = 70;\r\n        this.FT_checkFramebufferStatus = 71;\r\n        this.FT__bindShaderFetchRT = 72;\r\n        this.FT__renderMesh1RT = 73;\r\n\t}\r\n\r\n\twebgl._setupConst();\r\n\twebgl._setupRenderCmdID();\r\n}\r\n})(window)","sourceLength":52234,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":2},"text":"undefined (lines: 1689)"},{"handle":36,"type":"script","id":30,"lineOffset":0,"columnOffset":0,"lineCount":54,"source":"(function(exports){?\r\n(function(exports){\r\n\tvar platEvt={};\r\n\tandroidBridge.addPlatformMsgListener=function(msg,func){\r\n\t\tif(!platEvt[msg])platEvt[msg]=[func];\r\n\t\telse platEvt[msg].push(func);\r\n\t}\r\n\tandroidBridge.delPlatformMsgListener=function(msg,func){\r\n\t\tvar handlers = platEvt[msg];\r\n\t\tvar newhd = [];\r\n\t\tif(handlers){\r\n\t\t\thandlers.forEach(function(h){\r\n\t\t\t\tif(h!=func)newhd.push(h);\r\n\t\t\t});\r\n\t\t}\r\n\t\tplatEvt[msg] = newhd;\r\n\t}\r\n\tandroidBridge.onPlatformMsg=function(msg,param){\r\n\t\tvar listeners = platEvt['webview_MSG_'+androidBridge.name+'_'+msg];\r\n\t\tif(listeners){\r\n\t\t\tlisteners.forEach(function(func){func(param);});\r\n\t\t}\r\n\t}\r\n\tandroidBridge.setJavaMsgHandler(androidBridge.onPlatformMsg);\r\n\t\r\n\tfunction jsExternalInterface(){\r\n\t\tvar jsJava={}\r\n\t\tthis.addCallBack = function(method,func){\r\n\t\t\tjsJava[method] = func;\r\n\t\t}\r\n\t\tthis.call = function(method,params){\r\n\t\t\treturn androidBridge.callArray('callExternalMethod',method,params);\r\n\t\t}\r\n\t\tthis.executeJS = function(param){\r\n\t\t\tvar _func = jsJava[param.functionName]; \r\n\t\t\tif( !_func ){\r\n\t\t\t\twindow[param.functionName](param.value);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(param.value.length>1){\r\n\t\t\t\tvar _pa = JSON.parse(param.value);\t\t\t\t\r\n\t\t\t\t_func.apply(this,_pa);\r\n\t\t\t}else{\r\n\t\t\t\t_func();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar _ExternalInterface = new jsExternalInterface();\r\n\twindow.JavaCallJS = function(param){\r\n\t\t_ExternalInterface.executeJS(param);\r\n\t}\r\n\texports.externalInterface=_ExternalInterface;\r\n})(window||exports);\r\n})(window)","sourceLength":1470,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":35},"text":"undefined (lines: 54)"},{"handle":38,"type":"script","id":23,"lineOffset":0,"columnOffset":0,"lineCount":169,"source":"(function(exports){//输入相关的闭包\r\nlayaDoc = window.layaDoc;\r\n(function (layaDoc){\r\n\tvar APP_TOUCH_DOWN=0;\r\n\tvar APP_TOUCH_UP=1;\r\n\tvar APP_TOUCH_MOV=2;\r\n\tvar APP_TOUCH_PT_DOWN=5;\r\n\tvar APP_TOUCH_PT_UP=6;\r\n\tvar m_vTouchs=[];\r\n\r\n\tvar touchObj = function(id,type,nX,nY){ \r\n\t\tthis.id = id;\r\n\t\tthis.type = type;\r\n\t\tthis.identifier = id;\r\n\t\tthis.clientX = nX;\r\n\t\tthis.clientY = nY;\r\n\t};\r\n\r\n\tvar touchEvt = function(p_nType,p_nID,p_sName,p_nX,p_nY){\r\n\t\tthis.type =  p_nType;\r\n\t\tthis.changedTouches=[]; \r\n\t\tthis.touches=[];\r\n\t\tvar touch = new touchObj(p_nID,p_sName,p_nX,p_nY);\r\n\t\ttouch.id =  p_nID;\r\n\t\ttouch.identifier = p_nID;\r\n\t\ttouch.clientX = p_nX;\r\n\t\ttouch.clientY = p_nY;\r\n\t\ttouch.type = p_sName;\r\n\t\tthis.changedTouches.push(touch);\r\n\t\t\r\n\t\t//touches\r\n\t\tif( p_nType == APP_TOUCH_DOWN || p_nType == APP_TOUCH_PT_DOWN ){\r\n\t\t\tm_vTouchs.push(touch);\r\n\t\t}\r\n\t\telse if( p_nType==APP_TOUCH_PT_UP )\t{\r\n\t\t\t//DEL. 已知事件都是一个一个发送的。\r\n\t\t\tvar epos=0;\r\n\t\t\tvar tnum = m_vTouchs.length;\r\n\t\t\tvar cid = touch.id;\r\n\t\t\twhile ( epos < tnum ){\r\n\t\t\t\tvar ce = m_vTouchs[epos];\r\n\t\t\t\tif( ce.id == cid ){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tepos++;\r\n\t\t\t}\r\n\t\t\tif( epos>=tnum){\r\n\t\t\t\t//error not find\r\n\t\t\t}else{\r\n\t\t\t\tm_vTouchs.splice( epos, 1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if( p_nType==APP_TOUCH_MOV ){\r\n\t\t\t//修改. 已知事件都是一个一个发送的。\r\n\t\t\tvar tnum=m_vTouchs.length;\r\n\t\t\tvar cid = touch.id;\r\n\t\t\tvar ti = 0;\r\n\t\t\twhile( ti<tnum ){\r\n\t\t\t\tvar ce = m_vTouchs[ti];\r\n\t\t\t\tif(ce.id==cid){\r\n\t\t\t\t\tm_vTouchs[ti]=touch;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if( p_nType==APP_TOUCH_UP ){\r\n\t\t\t//Clear\r\n\t\t\tm_vTouchs=[];\r\n\t\t}\r\n\t\tthis.touches = m_vTouchs;\r\n\t}\t\r\n\tvar mouseEvt = function(p_sName,p_nX,p_nY,p_nWheel){\r\n\t\tthis.type=p_sName;\r\n\t\tthis.clientX = p_nX;\r\n\t\tthis.clientY = p_nY;\r\n\t\tthis.wheelDelta = p_nWheel;\r\n\t}\t\r\n\r\n\tvar joystickEvt = function(TL_xOffset,TL_yOffset,TR_xOffset,TR_yOffset,LT_Offset,RT_Offset){\r\n\t\tthis.THUMBL_xOffset = TL_xOffset;\r\n\t\tthis.THUMBL_yOffset = TL_yOffset;\r\n\t\tthis.THUMBR_xOffset = TR_xOffset;\r\n\t\tthis.THUMBR_yOffset = TR_yOffset;\r\n\t\tthis.LT_Offset = LT_Offset;\r\n\t\tthis.RT_Offset = RT_Offset;\r\n\t}\r\n\t\t\r\n\tvar keyEvt = function(name,code,keychar,flag){ this.type=name; this.keyCode=code; this.keyChar=keychar; this.altKey=flag&0x1; this.shiftKey=(flag&0x2)!=0; this.ctrlKey=(flag&0x4)!=0; }\r\n\r\n\tsetTouchEvtFunction(function(p_nType,p_nID,p_sName,p_nX,p_nY){\r\n\t\tlayaDoc.onEvt(p_sName,new touchEvt(p_nType,p_nID,p_sName,p_nX,p_nY));\t//TODO new 优化\r\n\t});\r\n\r\n\tsetKeyEvtFunction(function(name,code,keychar,flag){\r\n\t\tlayaDoc.onEvt(name,new keyEvt(name,code,keychar,flag));\r\n\t\t//为了兼容错误的监听 onkeydown  onkeyup\r\n\t\tlayaDoc.onEvt(\"on\"+name,new keyEvt(name,code,keychar,flag));\r\n\t});\r\n\r\n\tsetMouseEvtFunction( function(p_sType,p_sName,p_nX,p_nY,p_nWheel){\r\n\t\tlayaDoc.onEvt( p_sName,new mouseEvt( p_sName,p_nX,p_nY,p_nWheel ) );\r\n\t});\r\n\t\r\n\tsetJoystickEvtFunction( function(p_sName,THUMBL_xOffset,THUMBL_yOffset,THUMBR_xOffset,THUMBR_yOffset,LT_Offset,RT_Offset){\r\n\t\tlayaDoc.onEvt( p_sName,new joystickEvt( THUMBL_xOffset,THUMBL_yOffset,THUMBR_xOffset,THUMBR_yOffset,LT_Offset,RT_Offset ) );\r\n\t});\r\n\tObject.defineProperty( layaDoc, \"keydown\", {   \r\n\t\tget : function () {       \r\n\t\t\treturn null; \r\n\t\t},    \r\n\t\tset : function ( p_pFunc ) { \r\n\t\t\tthis.addEventListener( \"keydown\",p_pFunc );\r\n\t\t} \r\n\t}); \r\n\tObject.defineProperty( layaDoc, \"keyup\", {   \r\n\t\tget : function () {       \r\n\t\t\treturn null; \r\n\t\t},\r\n\t\tset : function ( p_pFunc ) { \r\n\t\t\tthis.addEventListener( \"keyup\",p_pFunc );\r\n\t\t} \r\n\t});\t\r\n\t//为了兼容错误的监听 onkeydown  onkeyup\r\n\tObject.defineProperty( layaDoc, \"onkeydown\", {   \r\n\t\tget : function () {       \r\n\t\t\treturn null; \r\n\t\t},    \r\n\t\tset : function ( p_pFunc ) { \r\n\t\t\tthis.addEventListener( \"onkeydown\",p_pFunc );\r\n\t\t} \r\n\t}); \r\n\tObject.defineProperty( layaDoc, \"onkeyup\", {   \r\n\t\tget : function () {       \r\n\t\t\treturn null; \r\n\t\t},\r\n\t\tset : function ( p_pFunc ) { \r\n\t\t\tthis.addEventListener( \"onkeyup\",p_pFunc );\r\n\t\t} \r\n\t});\r\n})(layaDoc);\r\n\r\nlayaDoc.evtMaps=[];\r\nlayaDoc.addEventListener=function( name,func ){\r\n\tvar listeners = this.evtMaps[name]||[];\r\n\tlisteners.push(func);\r\n\tthis.evtMaps[name] = listeners;\r\n}\r\n\r\nlayaDoc.removeEventListener=function(name, func){\r\n\tvar listeners = this.evtMaps[name];\r\n\tvar newlisteners = [];\r\n\tfor(var i=0,sz=listeners.length; i<sz; i++){\r\n\t\tif( listeners[i]!=func){\r\n\t\t\tnewlisteners.push(listeners[i]);\r\n\t\t}\r\n\t}\r\n\tthis.evtMaps[name] = newlisteners;\r\n};\r\n\r\nlayaDoc.onEvt=function(evtname,evt){\r\n\tvar listeners = this.evtMaps[evtname];\r\n\tif(listeners ){\r\n\t\tlisteners.forEach( function(e){\r\n\t\t\tif(e)e(evt);\r\n\t\t});\r\n\t}\r\n}\r\n})(window)","sourceLength":4514,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":37},"text":"undefined (lines: 169)"},{"handle":40,"type":"script","id":28,"lineOffset":0,"columnOffset":0,"lineCount":50,"source":"(function(exports){//url对象\r\n(function(exports){\r\n\tfunction URL(url){\r\n\t\tthis._href=url.trim();\r\n\t\tthis.isAbs=function(){\r\n\t\t\treturn this._href.indexOf('://')>0;\r\n\t\t}\r\n\t\t/*\r\n\t\tget href:function(){}\r\n\t\tget host=function(){}\r\n\t\tget pathname=function(){}\r\n\t\tget search = function(){}\r\n\t\tget path = function(){}\r\n\t\tget query=function(){}\r\n\t\t*/\r\n\t\tthis.resolve=function(from,to){\r\n\t\t\t//from是路径么\r\n\t\t\tvar tfrom=from.trim();\r\n\r\n\t\t\tvar qst=tfrom.indexOf('?');\r\n\t\t\tif(qst>0)\r\n\t\t\t\ttfrom=tfrom.substr(0,qst);\r\n\r\n\t\t\tif(tfrom[tfrom.length-1]=='/'||tfrom[tfrom.length-1]=='\\\\'){\r\n\t\t\t\treturn tfrom+to;\r\n\t\t\t}else{\r\n\t\t\t\tvar p = tfrom.lastIndexOf('/');\r\n\t\t\t\tvar p1 = tfrom.lastIndexOf('\\\\');\r\n\t\t\t\tp=p<p1?p1:p;\r\n\t\t\t\treturn tfrom.substr(0,p+1)+to;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\texports.URL=URL;\r\n})(window||exports);\r\n\r\n//history对象\r\n(function(exports){\r\n\tvar history=function(){\r\n\t\tthis.back=function(){\r\n\t\t\turlBack();\r\n\t\t}\r\n\t\tthis.forward=function(){\r\n\t\t\turlForward();\r\n\t\t}\r\n\t}\r\n\texports.history=new history();\r\n})(window||exports)\r\n\r\n})(window)","sourceLength":1011,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":39},"text":"undefined (lines: 50)"},{"handle":42,"type":"script","id":33,"lineOffset":0,"columnOffset":0,"lineCount":95,"source":"(function(exports){\r\nwindow.DOMParser  =(function()\r\n{\r\n\tfunction DOMParser()\r\n\t{\r\n\t\tthis._parser=new _DOMParser();\r\n\t}\r\n\tDOMParser.prototype={\r\n\t\tset src(s)\r\n\t\t{\r\n\t\t\tthis._src=s;\r\n\t\t\tthis._parser.src=s;\r\n\t\t},\r\n\t\tget src()\r\n\t\t{\r\n\t\t\treturn this._src;\r\n\t\t},\r\n\t\tset onload(callback)\r\n\t\t{\r\n\t\t\tthis._onload=callback;\r\n\t\t\tthis._parser.onload=callback;\r\n\t\t},\r\n\t\tget onload()\r\n\t\t{\r\n\t\t\treturn this._onload;\r\n\t\t},\r\n\t\tset\tonerror(callback)\r\n\t\t{\r\n\t\t\tthis._onerror=callback;\r\n\t\t},\r\n\t\tget\tonerror()\r\n\t\t{\r\n\t\t\treturn this._onerror;\r\n\t\t}\r\n\t};\r\n\tvar __proto__=DOMParser.prototype;\r\n\t__proto__.parseFromString=function(s,t)\r\n\t{\r\n\t\tvar xml= this._parser.parseFromString(s,t);\r\n\t\tvar root={};\r\n\t\troot.childNodes=[];\r\n\t\troot.childNodes[0]=initXMl(xml.childNodes[0]);\r\n\t\treturn root;\r\n\t}\r\n\t__proto__.getResult=function()\r\n\t{\r\n\t\tif(!this.result)\r\n\t\t{\r\n\t\t    this.result={};\r\n\t\t    this.result.childNodes=[];\r\n\t\t    this.result.childNodes[0]=initXMl(this._parser.getResult().childNodes[0]);\r\n\t\t}\r\n\t\treturn this.result;\r\n\t}\r\n\tfunction initXMl(xml)\r\n\t{\r\n\t\tvar result=new _jsXmlNode();\r\n\t\tresult.nodeName=xml.nodeName;\r\n\t\tresult.nodeValue=xml.nodeValue;\r\n\t\tresult.textContent=xml.textContent;\r\n\t\tvar attrs=xml.attributes;\r\n\t\tfor(var i=0,sz1=attrs.length;i<sz1;i++)\r\n\t\t{\r\n\t\t\tvar attr=attrs[i];\r\n\t\t\tvar key=attr.nodeName;\r\n\t\t\tvar tempAttr=new _jsXmlAttr(key,attr.nodeValue);\r\n\t\t\tresult.attributes[i]=tempAttr;\r\n\t\t\tresult.attributes[key]=tempAttr;\r\n\t\t}\r\n\t\t var childs=xml.childNodes;\r\n\t\tfor(var i=0,sz1=childs.length;i<sz1;i++)\r\n\t\t{\r\n\t\t\tvar chd=childs[i];\r\n\t\t\tvar nodeName=chd.nodeName;\r\n\t\t\tresult.childNodes[i]=initXMl(chd);\r\n\t\t} \r\n\t\treturn result;\r\n\t}\r\n\treturn DOMParser;\r\n})();\r\n\r\nvar _jsXmlNode=function()\r\n{\r\n\tthis.childNodes=[];\r\n\tthis.nodeValue=\"\";\r\n\tthis.nodeName=\"\";\r\n\tthis.textContent=\"\";\r\n\tthis.attributes=[];\r\n}\r\nvar _jsXmlAttr=function(key,value)\r\n{\r\n\tthis.nodeValue=value;\r\n\tthis.nodeName=key;\r\n\tthis.textContent=value;\r\n}})(window)","sourceLength":1915,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":41},"text":"undefined (lines: 95)"},{"handle":44,"type":"script","id":29,"lineOffset":0,"columnOffset":0,"lineCount":31,"source":"(function(exports){\r\n//websocket相关的\r\n(function(exports){\r\n\tfunction msgdata(obj){\r\n\t\t\tthis.data=obj;\t//不管什么类型，都是直接封装到data中\r\n\t}\r\n\tvar ws = function(url){\r\n\t\tvar ret = new _WebSocket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\texports.WebSocket = ws;\r\n})(window||exports);\r\n\r\n//Socket相关的\r\n(function(exports){\r\n\tfunction msgdata(obj){\r\n\t\t\tthis.data=obj;\t//不管什么类型，都是直接封装到data中\r\n\t}\r\n\tvar ws = function(url){\r\n\t\tvar ret = new _Socket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\texports.Socket = ws;\r\n})(window||exports);\r\n})(window)","sourceLength":738,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":43},"text":"undefined (lines: 31)"},{"handle":46,"type":"script","id":26,"lineOffset":0,"columnOffset":0,"lineCount":128,"source":"(function(exports){//定时器相关\r\n(function(exports){\r\n\t//TODO怎么避免new\r\n\tvar timerobj=function(curtm,interval,obj,func,args,num){\r\n\t\tthis.interval=interval;\r\n\t\tthis.tm=curtm+interval;\r\n\t\tthis.obj=obj;\r\n\t\tthis.func=func;\r\n\t\tthis.args=args;\r\n\t\tthis.num=num;\r\n\t}\r\n\r\n\t//TODO 优化\r\n\tvar timerqueue = function(){\r\n\t\tthis.AniFrame = [];\r\n\t\tthis.curtm = new Date().valueOf();\r\n\t\tthis.addTimer=function(tm,obj,func,args,num ){\r\n\t\t\tvar tmobj = new timerobj(this.curtm,tm,obj,func,args,num);\r\n\t\t\tthis.tmq.push(tmobj);\r\n\t\t\treturn tmobj;\r\n\t\t}\r\n\t\t\r\n\t\tthis.delTimer=function(obj){\r\n\t\t\tfor(var i=0,sz=this.tmq.length; i<sz; i++){\r\n\t\t\t\tif(this.tmq[i]===obj){\r\n\t\t\t\t\t//this.tmq.splice(i,1);\r\n\t\t\t\t\tthis.tmq[i].del=true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.tmq=[];\r\n\t\tthis.update=function(){\r\n\t\t\tvar curAnimFrms = this.AniFrame;\r\n\t\t\tthis.AniFrame=[];\r\n\t\t\tcurAnimFrms.forEach(function(af){\r\n\t\t\t\tif(af.del)return;\r\n\t\t\t\taf.func(tmGetCurms()-gTimerQueue.AniFrameStTm);\r\n\t\t\t});\r\n\t\t\tthis.curtm = new Date().valueOf();\r\n\t\t\tvar i=0;\r\n\t\t\tvar btmq=[];\r\n\t\t\tfor(var sz=this.tmq.length; i<sz; i++){\r\n\t\t\t\tvar ctm = this.tmq[i];\r\n\t\t\t\tif(ctm.del)continue;\r\n\t\t\t\t//log('func['+i+']='+ctm.func);\r\n\t\t\t\tvar dt = ctm.tm-this.curtm;\r\n\t\t\t\tif(dt<0){\r\n\t\t\t\t\t//run\r\n\t\t\t\t\tif(typeof(ctm.func)==='function'){\r\n\t\t\t\t\t\tif(ctm.obj)\r\n\t\t\t\t\t\t\tctm.func.call(ctm.obj);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tctm.func();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\teval(ctm.func);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//多次\r\n\t\t\t\t\tif(ctm.num<0 || --ctm.num>0 ){\r\n\t\t\t\t\t\tctm.tm=dt+this.curtm+ctm.interval;\r\n\t\t\t\t\t\tbtmq.push(ctm);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbtmq.push(ctm);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.tmq.splice(0,sz);//因为在运行的时候也可能添加新的定时器。所以不能直接删掉，只能删掉已经运行的\r\n\t\t\tthis.tmq=this.tmq.concat(btmq);\r\n\t\t\t\r\n\t\t\t//this.tmq.splice(0,i-1);\r\n\t\t}\r\n\t\t/*\r\n\t\t\tvar tmi=0;\r\n\t\t\tvar ctm = this.tmq[tmi];\r\n\t\t\twhile(ctm.tm<curtm)\r\n\t\t\t\tctm.func.call();\r\n\t\t\t\ttmq.remove(tmi);\r\n\t\t\t\tif(ctm.num-->0)\r\n\t\t\t\t\ttmq.insert(curtm+ctm.interval,ctm)\r\n\t\t\t\ttmi++;\r\n\t\t*/\r\n\t}\r\n\r\n\tvar gTimerQueue = new timerqueue();\r\n\r\n\t//定时器对象\r\n\t//现在的问题是不能在回调中删除自己，否则会导致非法：\r\n\t//    tm=null; gc();\r\n\texports.setTimeout=function(exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,1);\r\n\t}\r\n\r\n\texports.stopTimeout=function(tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}\r\n\r\n\texports.setInterval=function(exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,-1);\r\n\t}\r\n\r\n\texports.clearInterval=function(tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}\r\n\t\r\n\tvar animfrm=0;\r\n\texports.requestAnimationFrame=function(updatefunc){\r\n\t\tvar id = animfrm++;\r\n\t\tgTimerQueue.AniFrame.push({id:id,func:updatefunc});\r\n\t\tif(!gTimerQueue.AniFrameStTm)\r\n\t\t\tgTimerQueue.AniFrameStTm=tmGetCurms();\r\n\t\treturn id;\r\n\t}\r\n\texports.cancelAnimationFrame=function(handle){\r\n\t\tfor(var i=0,sz=gTimerQueue.AniFrame.length; i<sz; i++){\r\n\t\t\tvar obj = gTimerQueue.AniFrame[i];\r\n\t\t\tif(obj.id===handle){\r\n\t\t\t\tobj.del=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tconch.setOnFrame(function(handle){\r\n\t\tgTimerQueue.update();\r\n\t});\r\n\t\r\n})(window||exports);\r\n})(window)","sourceLength":2904,"scriptType":2,"compilationType":1,"evalFromScript":{"ref":22},"evalFromLocation":{"line":60,"column":7},"evalFromFunctionName":{"type_":"string","value_":"require","handle_":23},"context":{"ref":45},"text":"undefined (lines: 128)"},{"handle":22,"type":"script","id":18,"lineOffset":0,"columnOffset":0,"lineCount":578,"source":"//TODO 下面几个函数以后加到程序中。这样会更方便一些。\r\nvar window=this;\r\nconchConfig.PerfUpdateDt = PerfUpdateDt;\r\nconchConfig.PerfAddData = PerfAddData;\r\nconchConfig.PerfDelData = PerfDelData;\r\nconchConfig.PerfShow = PerfShow;\r\nconchConfig.RenderStreamType = 0;\r\nconch.config = conchConfig;\r\n\r\nvar temp=new image();\r\n//新的\r\nif(temp.imgId)\r\n{\r\n\tvar iagPro=temp.__proto__;\r\n\t//var iagPro= image;\r\n\tiagPro.addEventListener=function(type,fn,b)\r\n\t{\r\n\t\tthis._lylist_=this._lylist_||{};\r\n\t\t if(this._lylist_[type]==null)\r\n\t\t {\r\n\t\t\t this._lylist_[type]=[];\r\n\t\t }\r\n\t\t var temp=this._lylist_[type];//注意相同的事件的同一函数只能使用一次\r\n\t\t temp.push(fn);\r\n\t\t !this._lyhasRegOnload&&this._lyregOnload();\r\n\t}\r\n\r\n\tiagPro._lyregOnload=function()\r\n\t{\r\n\t\tthis._onload=function()\r\n\t\t{\r\n\t\t\tif(this._lylist_)\r\n\t\t\t{\r\n\t\t\t\tvar temp=this._lylist_[\"load\"];\r\n\t\t\t\tfor(var s in temp)\r\n\t\t\t\t{\r\n\t\t\t\t  temp[s]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._lyonload&&this._lyonload();\r\n\t\t}\r\n\t\tthis._lyhasRegOnload=true;\r\n\t}\r\n\r\n\tObject.defineProperty(iagPro,'onload',{set:function(fn)\r\n\t{\r\n\t\tthis._lyonload=fn;\r\n\t\t!this._lyhasRegOnload&&this._lyregOnload();\r\n\t}});\r\n}\r\n\r\n//市场相关的\r\nconch.market = conchMarket;\r\nfunction require(file,obj){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\tif(!fc||fc.length<=0){\r\n\t\talert('加载脚本失败：'+file);\r\n\t}\r\n\tvar str = '(function(exports){'+fc+'})(window)'; \r\n\ttry{\r\n\t\teval(str);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}\r\nvar  layaHtml5={};\r\nlayaHtml5.File=File;//初始化html5内置的类 防止项目层给重置\r\nfunction include(file){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\ttry{\r\n\t\teval( fc);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}\r\n\r\nrequire('init.js');\r\nrequire('input.js');\r\nrequire('localstorage.js');\r\nrequire('location.js');\r\nrequire('timer.js');\r\nrequire('XMLHttpRequest.js');\r\nrequire('url_history.js');\r\nrequire('websocket.js');\r\nrequire('androidBridge.js');\r\nrequire('webview.js');\r\nrequire('webgl.js');\r\nrequire('DomParser.js');\r\nif( conchConfig.RenderStreamType == 1 ){\r\n\trequire('ConchNode.js');\r\n}\r\n\r\n\r\nvar div = function(){};\r\n//添加一个空div的创建。会影响老谢么\r\ndocument.createElement=function(name){\r\n\tif(name=='div')\treturn {};\r\n\telse \r\n\t\treturn layaDoc._createElement(name);\r\n}\r\nwindow.layabox={\r\n\tdevinfo:(function getDevInfo(){\r\n\t\tvar devi = conchConfig.getDeviceInfo();\r\n\t\tconsole.log(devi);\r\n\t\treturn JSON.parse(devi);\r\n\t})(),\r\n\tgetDeviceInfo:function(){return this.devinfo;}\r\n};\r\n\r\n\r\nvar _$innerWidth=getInnerWidth();\r\nvar _$innerHeight=getInnerHeight();\r\nObject.defineProperty(window,'innerWidth',{get:function(){return _$innerWidth}});\r\nObject.defineProperty(window,'innerHeight',{get:function(){return _$innerHeight}});\r\nconch.setOnResize(function(w,h){\r\n _$innerWidth=w;\r\n _$innerHeight=h;\r\n console.log(\">>>>>>>>>>>>>>>>innerWidth:\"+innerWidth+\"innerHeight:\"+innerHeight);\r\n  window.onresize&&window.onresize(null);\r\n});\r\nvar ConchVirtualBitmap = function(){\r\n\tvar ret = new _ConchVirtualBitmap();\r\n\tret.setImage=function(img){\r\n\t\tret._setImage(img);\r\n\t\tret._img=img;\r\n\t}\r\n\tret.getImage=function(){\r\n\t\treturn ret._img;\r\n\t}\r\n\tret.clone=function()\r\n\t{\r\n\t\tvar result=this._clone();\r\n\t\tresult._img = this._img;\r\n\t\tresult.setImage=function(img){\r\n\t\t\tthis._setImage(img);\r\n\t\t\tthis._img=img;\r\n\t\t}\r\n\t\tresult.getImage=function(){\r\n\t\t\treturn this._img;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nsetOnActive(function(){\r\n\t//alert('start');\r\n});\r\n\r\nsetOnDeactive(function(){\r\n\t//alert('end');\r\n});\r\n\r\nwindow.runcontext={\r\n\tlayarepo:'http://10.10.20.31:7777/platform/layarepo/',\r\n}\r\n\r\n//主流程\r\nvar runSeqs= new function(){\r\n\tthis.seqs=[];\t\t\t//等待执行的函数\r\n\tthis.run=function(p){\t\t//依次执行，可以递归调用。注意没有做插入等操作，因为在递归的时候处理起来比较麻烦\r\n\t\tvar f = this.seqs.shift();\r\n\t\tif(f)f(p);\r\n\t}\r\n};\r\n\r\nfunction loadUrl(url){\r\n\tlog('_loadUrl('+url+')');\r\n\tif(url.length<2)return;\r\n\turl = url.replace(/\\\\/g,'/');\r\n\tif(url[0]==='/' ) url = 'file://'+url;\r\n\telse if(url[1]==':') url = 'file:///'+url;\r\n\turl = url.trim();\r\n\tlocation.setHref(url);\t//只是设置，不希望触发跳转。所以用函数。\r\n\tvar layainfo=null;\r\n\tvar urlpath=(function(str){\r\n\t\tvar qst=str.indexOf('?');\r\n\t\tif(qst>0)\r\n\t\t\tstr=str.substr(0,qst);\r\n\t\tvar p=str.lastIndexOf('/');\r\n\t\tif(p>=0) return str.substr(0,p+1);\r\n\t\treturn str;\r\n\t\t})(url);\r\n\tlocalStorage = loadLocalStorage( urlpath );\r\n\tappcache = new AppCache(urlpath);//这时候会加载资源索引，因此如果更新了索引，必须重新创建。\r\n\t\t\t\t\t\t\t\t\t\t//为了让启动html也使用缓存，需要在loadUrl刚开始的时候就创建appcache对象。\r\n\t\t\t\t\t\t\t\t\t\t\r\n\tvar cookiepath=(function(url){\r\n\t\tvar filename='';\r\n\t\tvar filepos=url.indexOf('file:///');\r\n\t\tif(url.indexOf('?')>0){\r\n\t\t\turl = url.substr(0,url.indexOf('?'));\t//去掉?\r\n\t\t}\r\n\t\tif(filepos>=0){\r\n\t\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\t\tfilename = filename.replace(/:/g,'_');\r\n\t\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\t}else{\r\n\t\t\tvar vv = url.split('/');\r\n\t\t\tvv.shift();vv.shift();vv.pop();\r\n\t\t\tvv[0]=vv[0].replace(':','_');\r\n\t\t\tfilename=vv.join('_');\r\n\t\t}\r\n\t\treturn filename;\r\n\t})(url);\r\n\tdocument.loadCookie( cookiepath );\r\n\r\n\tvar preloads = [];\t//需要预先下载的文件\r\n\tvar scripts=[];\t\t//需要执行的文件\r\n\t\r\n\tvar runNext = function(p){runSeqs.run.call(runSeqs,p);}\r\n\t\r\n\tfunction downloadfile(url,onok,onerr,ignoree){\r\n\t\tvar file = new layaHtml5.File(url);\r\n\t\tvar filereader = new FileReader();\r\n\t\tfilereader.setIgnoreError(ignoree?true:false);\r\n\t\tfilereader.onload=function(){ onok(filereader.result);}\r\n\t\tfilereader.onerror=function(){log('下载文件错误：'+url);onerr();}\r\n\t\tfilereader.readAsText(file);\r\n\t}\r\n\t\r\n\tfunction getPageInfo(){\r\n\t\t//字符串可以是'也可以是\"。现在先临时写一个不太严格的。\r\n\t\tvar reg = new RegExp(/([a-zA-Z0-9]+)\\s?=['\"]([^'^\"]*)['\"]/g);\r\n\t\tfunction parseKVPair(str,obj){\r\n\t\t\tvar ret = null;\r\n\t\t\twhile(ret=reg.exec(str)){\r\n\t\t\t\tvar keyv=ret[1];\r\n\t\t\t\tvar valv=ret[2];\r\n\t\t\t\tobj[keyv]=valv;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onStartPageData(data){\r\n\t\t\t//加载流程和标准见文档的 <页面加载流程.txt>\r\n\t\t\t//meta里面的laya信息\r\n\t\t\tlayainfo=(function(data){\r\n\t\t\t\tvar layametas = data.match(/<\\s*meta\\s*name=['\"]laya['\"].*/g);//原来的写法遇到路径分隔符/就会出错\r\n\t\t\t\tif(layametas){\r\n\t\t\t\t\t//判断是不是laya页面\r\n\t\t\t\t\tvar retobj={/*version:'1.0',*/screenorientation:'landscape',cacheid:'CDCDCDCD'};\r\n\t\t\t\t\tlayametas.forEach(function(layameta){\r\n\t\t\t\t\t\tparseKVPair(layameta,retobj);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retobj;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t})(data);\r\n\t\t\t//先加入一个执行的js。这个应该都是laya.js\r\n\t\t\tif(layainfo ){\r\n\t\t\t\tvar layaurl=(layainfo.layaurl);//||(runcontext.layarepo+layainfo.version+'/laya.js');\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif(layaurl && layaurl.indexOf('://')<0){//相对路径\r\n\t\t\t\t\tlayaurl = urlobj.resolve(url,layaurl);\r\n\t\t\t\t\tscripts.push(layaurl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//由微端加载的script标签。只能有一个\r\n\t\t\tvar layascriptSrc = (function(data){\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tvar lscript = data.match(/<script\\s+.*loader=['\"]laya['\"].*/g);\r\n\t\t\t\tif(lscript){\r\n\t\t\t\t\tlscript.forEach(function(script){\r\n\t\t\t\t\t\tvar ret = script.match(/src=([^\\s]+)/);\r\n\t\t\t\t\t\tif(ret){\r\n\t\t\t\t\t\t\tvar scriptsrc=ret[1].substr(1,ret[1].length-2);\r\n\t\t\t\t\t\t\tif(scriptsrc.indexOf('://')<0){//相对路径\r\n\t\t\t\t\t\t\t\tscriptsrc = urlobj.resolve(url,scriptsrc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscripts.push(scriptsrc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn scripts;\r\n\t\t\t})(data); \r\n\t\t\t//需要预先加载的文件\r\n\t\t\tpreloads = (function(data){\r\n\t\t\t\tvar files=[];\r\n\t\t\t\tvar preloadmetas = data.match(/<\\s*meta\\s*name=['\"]preload['\"].*/g);\r\n\t\t\t\tif(preloadmetas){\r\n\t\t\t\t\tpreloadmetas.forEach(function(meta){\r\n\t\t\t\t\t\tvar ret={};\r\n\t\t\t\t\t\tparseKVPair(meta,ret);\r\n\t\t\t\t\t\tif(ret.files){\r\n\t\t\t\t\t\t\tfiles=files.concat(ret.files.split(';'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn files;\r\n\t\t\t})(data);\r\n\t\t\t\r\n\t\t\tif(scripts.length){\r\n\t\t\t\trunNext();\r\n\t\t\t}else{\r\n\t\t\t\t//不是laya页面\r\n\t\t\t\talert('Sorry, this is a normal html page. i cant render it yet!\\n'+data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdownloadfile(url+'?rand='+Math.random()*(new Date().valueOf()),\t//优先尝试强制下载。\r\n\t\t\tonStartPageData//on download OK\r\n\t\t\t, function(e){//on download error\r\n\t\t\t\t//如果失败了再尝试有没有打包版的页面数据。\r\n\t\t\t\tdownloadfile(url,onStartPageData//on download OK\r\n\t\t\t\t\t,function(e){//on download error\r\n\t\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\talert('load start page error!url='+url);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tfunction setOrientation(){\r\n\t\tvar nameToVal={\r\n\t\t\tlandscape:0,portrait:1,user:2,behind:3,sensor:4,nosensor:5,sensor_landscape:6,\r\n\t\t\tsensor_portrait:7,reverse_landscape:8,reverse_portrait:9,full_sensor:10,}\r\n\t\tvar nOri = (function(name){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar n = nameToVal[name];\r\n\t\t\t\t\treturn n||0;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t})(layainfo.screenorientation);\r\n\t\t\t\r\n\t\tif(conchConfig.getScreenOrientation()!=nOri){\r\n\t\t\tconchConfig.setScreenOrientation(nOri);\r\n\t\t}\r\n\t\trunNext();\r\n\t}\r\n\tfunction runConfig()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.configjs )\r\n\t\t\t{\r\n\t\t\t\tvar configJsUrl = layainfo.configjs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( configJsUrl && configJsUrl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tconfigJsUrl = urlobj.resolve(url,configJsUrl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( configJsUrl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download configjs error e=\" + e);runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\tfunction showLogo()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.logojs )\r\n\t\t\t{\r\n\t\t\t\tlayainfo.bShowLogoJS = true;\r\n\t\t\t\tvar logojsurl = layainfo.logojs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( logojsurl && logojsurl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tlogojsurl = urlobj.resolve(url,logojsurl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( logojsurl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download logjs error e=\" + e);layainfo.bShowLogoJS=false;runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateDcc(){\r\n\t\tappcache.setResourceID('appurl',urlpath);\r\n\t\tvar curassets = appcache.getResourceID('netassetsid');\r\n\t\tdownloadfile(urlpath+'update/assetsid.txt?rand='+Math.random()*(new Date().valueOf()),//加随机是为了防止不小心把它加入了缓存\r\n\t\t\tfunction(data){\r\n\t\t\t\tif( data!=curassets ){\r\n\t\t\t\t    //下载新的包\r\n\t\t\t\t    //先下载二进制。\r\n\t\t\t\t    var file = new layaHtml5.File(urlpath + 'update/filetable.bin?rand=' + Math.random() * (new Date().valueOf()));\r\n\t\t\t\t    var filereader = new FileReader();\r\n\t\t\t\t\tfilereader.setIgnoreError(true);\r\n\t\t\t\t    filereader.onload = function () {\r\n\t\t\t\t        if (filereader.result instanceof ArrayBuffer) {\r\n\t\t\t\t            idxdata = \"\";\r\n\t\t\t\t            var v = new Uint32Array(filereader.result);\r\n\t\t\t\t\t\t\tif(v[0]!=0xffeeddcc || v[1]!=1){//需要校验\r\n\t\t\t\t\t\t\t\tonloadfterr();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor (var ii = 2, isz = v.length / 2; ii < isz; ii++) \r\n\t\t\t\t\t\t\t\t\tidxdata += v[ii * 2].toString(16) + ' ' + v[ii * 2+1].toString(16)+'\\n';\r\n\t\t\t\t\t\t\t\tappcache.saveFileTable(idxdata);\r\n\t\t\t\t\t\t\t\tappcache = new AppCache(urlpath);\r\n\t\t\t\t\t\t\t\t//设置新的id。只有写完filetable之后才能写这个\r\n\t\t\t\t\t\t\t\tappcache.setResourceID('netassetsid', data);\r\n\t\t\t\t\t\t\t\trunNext();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t        } else { alert('下载filetable.bin失败。类型不对');};\r\n\t\t\t\t    }\r\n\t\t\t\t    function onloadfterr() {\r\n\t\t\t\t        //出错的话，下载文本的\r\n\t\t\t\t        downloadfile(urlpath + 'update/filetable.txt?rand=' + Math.random() * (new Date().valueOf()),\r\n                            function (idxdata) {\r\n                                appcache.saveFileTable(idxdata);\r\n                                appcache = new AppCache(urlpath);\r\n                                //设置新的id。只有写完filetable之后才能写这个\r\n                                appcache.setResourceID('netassetsid', data);\r\n                                runNext();\r\n                            },\r\n                            function (e) {\r\n                                runNext();\r\n                            }, true);\r\n\t\t\t\t    }\r\n\t\t\t\t\tfilereader.onerror = onloadfterr;\r\n\t\t\t\t    filereader.readAsArrayBuffer(file);\r\n\t\t\t\t}else\r\n\t\t\t\t\trunNext();\r\n\t\t\t},\r\n\t\t\tfunction (e) {\r\n                //如果没有assetsid，则去掉校验功能。\r\n\t\t\t    appcache.saveFileTable('');\r\n\t\t\t    appcache = new AppCache(urlpath);\r\n\t\t\t\trunNext();\r\n\t\t\t},true);\t\r\n\t}\r\n\t\r\n\t//下载必须文件\r\n\tfunction predownload(){\r\n\t\tvar num = preloads.length;\r\n\t\tif(num<=0)\r\n\t\t\trunNext();\r\n\t\tfunction preloadret(b){\r\n\t\t\tnum--;\r\n\t\t\tif(num<=0){\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpreloads.forEach(function(f){\r\n\t\t\tvar absurl=f;\r\n\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\tif(absurl.indexOf('://')<0){//相对路径\r\n\t\t\t\tabsurl = urlobj.resolve(url,absurl);\r\n\t\t\t}\r\n\t\t\t//读取二进制文件\r\n\t\t\tvar file = new layaHtml5.File(absurl);\r\n\t\t\tvar filereader = new FileReader();\r\n\t\t\tfilereader.onload=function(){ preloadret(true);}\r\n\t\t\tfilereader.onerror=function(){preloadret(false);}\r\n\t\t\tfilereader.readAsArrayBuffer(file);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction startApp(){\r\n\t\tfunction getIsEval()\r\n\t\t{\r\n\t\t\tif( layainfo.bShowLogoJS == true )\r\n\t\t\t{\r\n\t\t\t\tvar nOldTime = new Date().valueOf();\r\n\t\t\t\tif( conch.getLogoImageState() )\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t\t}\r\n\t\t\t\telse if( new Date().valueOf() - nOldTime > 15000 )\r\n\t\t\t\t{\r\n\t\t\t\t\tdownloadscript();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdownloadscript();\r\n\t\t\t}\r\n\t\t}\r\n\t\t//依次执行所有的js\r\n\t\tfunction downloadscript(){\r\n\t\t\tclearInterval( conch.scriptTimeInterval );\r\n\t\t\tif( scripts.length <= 0 )\r\n\t\t\t\treturn;\r\n\t\t\tvar ssrc=scripts[0];\r\n\t\t\tscripts.shift();\r\n\t\t\tlog('downloadjs:'+ssrc);\t\t\t\r\n\t\t\tdownloadfile(ssrc,scriptret,\r\n\t\t\t\tfunction(e){\r\n\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t}else\t\t\t\t\r\n\t\t\t\t\t\talert('download js error:url='+ssrc);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tfunction scriptret(data){\r\n\t\t\tlog('downloadjs ok');\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\twindow.eval(data);\r\n\t\t\t\tif( !layainfo.bShowLogoJS )\r\n\t\t\t\t{\r\n\t\t\t\t\tconch.showLoadingView( false );\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\talert(e+' '+e.stack);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//scripts.shift();\r\n\t\t\tif(scripts.length<=0){\r\n\t\t\t\tif( window.onload ) window.onload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconch.scriptTimeInterval=setInterval(getIsEval,17);\r\n\t}\r\n\t//需要依次执行的函数\r\n\trunSeqs.seqs=[getPageInfo,setOrientation,updateDcc,runConfig,showLogo,predownload,startApp];\r\n\trunSeqs.run();//这个函数不会退出，直到程序结束\t\t\r\n}\r\n\r\nlayaDoc.addEventListener('onkeydown',function(e){\r\n\r\n\tif(e.keyCode==116){\r\n\t\t//reloadCurProcess();\r\n\t\tsimAndroidRefresh();\r\n\t}\r\n\tif(e.keyCode==117){\r\n\t\t//gc();\r\n\t\turlBack();\r\n\t}\r\n});\r\nfunction getStartDefaultHtmlPath()\r\n{\r\n\tvar sExePath = getExePath();\r\n\tif( sExePath != null )\r\n\t{\r\n\t\tvar sStartHtml = \"\";\r\n\t\tvar vString = sExePath.split( '\\\\' );\r\n\t\tvString.pop();vString.pop();\r\n\t\tsStartHtml = vString.join( '/' );\r\n\t\tsStartHtml += '/starthtml/default.html'\r\n\t\treturn sStartHtml\r\n\t}\r\n\treturn null;\r\n}\r\nfunction downloadfile(url, force,onok,onerr)\r\n{\r\n\tif(force){\r\n\t\turl=(function(url){\r\n\t\t\tvar ret=url;\r\n\t\t\tif(url.indexOf('?')<0){\r\n\t\t\t\tret = url+'?rnd='+Math.random();\r\n\t\t\t}else{\r\n\t\t\t\tret = url+'&downloadrnd'+Math.random().toString().substr(2)+'=1';\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t})(url);\r\n\t}\r\n\tvar file = new layaHtml5.File(url);\r\n\tvar filereader = new FileReader();\r\n\tfilereader.onload=function(){ onok(filereader.result);}\r\n\tfilereader.onerror=function(){onerr();}\r\n\tfilereader.readAsText(file);\r\n}\r\n\r\n\r\n//loadUrl(location.href||'file:///' + getStartDefaultHtmlPath() );\r\n//loadUrl(location.href||'http://10.10.20.31:8899/bench.html');\r\n//loadUrl(location.href||'http://10.10.20.31:8888/test/webgltest/bench.html');\r\n//loadUrl(location.href||'http://10.10.20.31:8888/test/canv3dmod.html');\r\nloadUrl(location.href||'http://localhost:8899/MyTest/webgl-benchmark-conch/bench.html');\r\n//loadUrl(location.href||'http://www.686wan.com/triple/laya1/preloader.max.html?kk=12345&gameid=101&sp=40');\r\n//loadUrl(location.href||'http://10.10.20.102/niubi/hxh.max.html');\r\n//loadUrl(location.href||'http://www.layabox.com/demo/layamain.max.html');\r\n","sourceLength":15476,"scriptType":2,"compilationType":0,"context":{"ref":21},"text":"undefined (lines: 578)"}],"refs":[{"handle":22,"type":"script","id":18,"lineOffset":0,"columnOffset":0,"lineCount":578,"source":"//TODO 下面几个函数以后加到程序中。这样会更方便一些。\r\nvar window=this;\r\nconchConfig.PerfUpdateDt = PerfUpdateDt;\r\nconchConfig.PerfAddData = PerfAddData;\r\nconchConfig.PerfDelData = PerfDelData;\r\nconchConfig.PerfShow = PerfShow;\r\nconchConfig.RenderStreamType = 0;\r\nconch.config = conchConfig;\r\n\r\nvar temp=new image();\r\n//新的\r\nif(temp.imgId)\r\n{\r\n\tvar iagPro=temp.__proto__;\r\n\t//var iagPro= image;\r\n\tiagPro.addEventListener=function(type,fn,b)\r\n\t{\r\n\t\tthis._lylist_=this._lylist_||{};\r\n\t\t if(this._lylist_[type]==null)\r\n\t\t {\r\n\t\t\t this._lylist_[type]=[];\r\n\t\t }\r\n\t\t var temp=this._lylist_[type];//注意相同的事件的同一函数只能使用一次\r\n\t\t temp.push(fn);\r\n\t\t !this._lyhasRegOnload&&this._lyregOnload();\r\n\t}\r\n\r\n\tiagPro._lyregOnload=function()\r\n\t{\r\n\t\tthis._onload=function()\r\n\t\t{\r\n\t\t\tif(this._lylist_)\r\n\t\t\t{\r\n\t\t\t\tvar temp=this._lylist_[\"load\"];\r\n\t\t\t\tfor(var s in temp)\r\n\t\t\t\t{\r\n\t\t\t\t  temp[s]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._lyonload&&this._lyonload();\r\n\t\t}\r\n\t\tthis._lyhasRegOnload=true;\r\n\t}\r\n\r\n\tObject.defineProperty(iagPro,'onload',{set:function(fn)\r\n\t{\r\n\t\tthis._lyonload=fn;\r\n\t\t!this._lyhasRegOnload&&this._lyregOnload();\r\n\t}});\r\n}\r\n\r\n//市场相关的\r\nconch.market = conchMarket;\r\nfunction require(file,obj){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\tif(!fc||fc.length<=0){\r\n\t\talert('加载脚本失败：'+file);\r\n\t}\r\n\tvar str = '(function(exports){'+fc+'})(window)'; \r\n\ttry{\r\n\t\teval(str);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}\r\nvar  layaHtml5={};\r\nlayaHtml5.File=File;//初始化html5内置的类 防止项目层给重置\r\nfunction include(file){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\ttry{\r\n\t\teval( fc);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}\r\n\r\nrequire('init.js');\r\nrequire('input.js');\r\nrequire('localstorage.js');\r\nrequire('location.js');\r\nrequire('timer.js');\r\nrequire('XMLHttpRequest.js');\r\nrequire('url_history.js');\r\nrequire('websocket.js');\r\nrequire('androidBridge.js');\r\nrequire('webview.js');\r\nrequire('webgl.js');\r\nrequire('DomParser.js');\r\nif( conchConfig.RenderStreamType == 1 ){\r\n\trequire('ConchNode.js');\r\n}\r\n\r\n\r\nvar div = function(){};\r\n//添加一个空div的创建。会影响老谢么\r\ndocument.createElement=function(name){\r\n\tif(name=='div')\treturn {};\r\n\telse \r\n\t\treturn layaDoc._createElement(name);\r\n}\r\nwindow.layabox={\r\n\tdevinfo:(function getDevInfo(){\r\n\t\tvar devi = conchConfig.getDeviceInfo();\r\n\t\tconsole.log(devi);\r\n\t\treturn JSON.parse(devi);\r\n\t})(),\r\n\tgetDeviceInfo:function(){return this.devinfo;}\r\n};\r\n\r\n\r\nvar _$innerWidth=getInnerWidth();\r\nvar _$innerHeight=getInnerHeight();\r\nObject.defineProperty(window,'innerWidth',{get:function(){return _$innerWidth}});\r\nObject.defineProperty(window,'innerHeight',{get:function(){return _$innerHeight}});\r\nconch.setOnResize(function(w,h){\r\n _$innerWidth=w;\r\n _$innerHeight=h;\r\n console.log(\">>>>>>>>>>>>>>>>innerWidth:\"+innerWidth+\"innerHeight:\"+innerHeight);\r\n  window.onresize&&window.onresize(null);\r\n});\r\nvar ConchVirtualBitmap = function(){\r\n\tvar ret = new _ConchVirtualBitmap();\r\n\tret.setImage=function(img){\r\n\t\tret._setImage(img);\r\n\t\tret._img=img;\r\n\t}\r\n\tret.getImage=function(){\r\n\t\treturn ret._img;\r\n\t}\r\n\tret.clone=function()\r\n\t{\r\n\t\tvar result=this._clone();\r\n\t\tresult._img = this._img;\r\n\t\tresult.setImage=function(img){\r\n\t\t\tthis._setImage(img);\r\n\t\t\tthis._img=img;\r\n\t\t}\r\n\t\tresult.getImage=function(){\r\n\t\t\treturn this._img;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\nsetOnActive(function(){\r\n\t//alert('start');\r\n});\r\n\r\nsetOnDeactive(function(){\r\n\t//alert('end');\r\n});\r\n\r\nwindow.runcontext={\r\n\tlayarepo:'http://10.10.20.31:7777/platform/layarepo/',\r\n}\r\n\r\n//主流程\r\nvar runSeqs= new function(){\r\n\tthis.seqs=[];\t\t\t//等待执行的函数\r\n\tthis.run=function(p){\t\t//依次执行，可以递归调用。注意没有做插入等操作，因为在递归的时候处理起来比较麻烦\r\n\t\tvar f = this.seqs.shift();\r\n\t\tif(f)f(p);\r\n\t}\r\n};\r\n\r\nfunction loadUrl(url){\r\n\tlog('_loadUrl('+url+')');\r\n\tif(url.length<2)return;\r\n\turl = url.replace(/\\\\/g,'/');\r\n\tif(url[0]==='/' ) url = 'file://'+url;\r\n\telse if(url[1]==':') url = 'file:///'+url;\r\n\turl = url.trim();\r\n\tlocation.setHref(url);\t//只是设置，不希望触发跳转。所以用函数。\r\n\tvar layainfo=null;\r\n\tvar urlpath=(function(str){\r\n\t\tvar qst=str.indexOf('?');\r\n\t\tif(qst>0)\r\n\t\t\tstr=str.substr(0,qst);\r\n\t\tvar p=str.lastIndexOf('/');\r\n\t\tif(p>=0) return str.substr(0,p+1);\r\n\t\treturn str;\r\n\t\t})(url);\r\n\tlocalStorage = loadLocalStorage( urlpath );\r\n\tappcache = new AppCache(urlpath);//这时候会加载资源索引，因此如果更新了索引，必须重新创建。\r\n\t\t\t\t\t\t\t\t\t\t//为了让启动html也使用缓存，需要在loadUrl刚开始的时候就创建appcache对象。\r\n\t\t\t\t\t\t\t\t\t\t\r\n\tvar cookiepath=(function(url){\r\n\t\tvar filename='';\r\n\t\tvar filepos=url.indexOf('file:///');\r\n\t\tif(url.indexOf('?')>0){\r\n\t\t\turl = url.substr(0,url.indexOf('?'));\t//去掉?\r\n\t\t}\r\n\t\tif(filepos>=0){\r\n\t\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\t\tfilename = filename.replace(/:/g,'_');\r\n\t\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\t}else{\r\n\t\t\tvar vv = url.split('/');\r\n\t\t\tvv.shift();vv.shift();vv.pop();\r\n\t\t\tvv[0]=vv[0].replace(':','_');\r\n\t\t\tfilename=vv.join('_');\r\n\t\t}\r\n\t\treturn filename;\r\n\t})(url);\r\n\tdocument.loadCookie( cookiepath );\r\n\r\n\tvar preloads = [];\t//需要预先下载的文件\r\n\tvar scripts=[];\t\t//需要执行的文件\r\n\t\r\n\tvar runNext = function(p){runSeqs.run.call(runSeqs,p);}\r\n\t\r\n\tfunction downloadfile(url,onok,onerr,ignoree){\r\n\t\tvar file = new layaHtml5.File(url);\r\n\t\tvar filereader = new FileReader();\r\n\t\tfilereader.setIgnoreError(ignoree?true:false);\r\n\t\tfilereader.onload=function(){ onok(filereader.result);}\r\n\t\tfilereader.onerror=function(){log('下载文件错误：'+url);onerr();}\r\n\t\tfilereader.readAsText(file);\r\n\t}\r\n\t\r\n\tfunction getPageInfo(){\r\n\t\t//字符串可以是'也可以是\"。现在先临时写一个不太严格的。\r\n\t\tvar reg = new RegExp(/([a-zA-Z0-9]+)\\s?=['\"]([^'^\"]*)['\"]/g);\r\n\t\tfunction parseKVPair(str,obj){\r\n\t\t\tvar ret = null;\r\n\t\t\twhile(ret=reg.exec(str)){\r\n\t\t\t\tvar keyv=ret[1];\r\n\t\t\t\tvar valv=ret[2];\r\n\t\t\t\tobj[keyv]=valv;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onStartPageData(data){\r\n\t\t\t//加载流程和标准见文档的 <页面加载流程.txt>\r\n\t\t\t//meta里面的laya信息\r\n\t\t\tlayainfo=(function(data){\r\n\t\t\t\tvar layametas = data.match(/<\\s*meta\\s*name=['\"]laya['\"].*/g);//原来的写法遇到路径分隔符/就会出错\r\n\t\t\t\tif(layametas){\r\n\t\t\t\t\t//判断是不是laya页面\r\n\t\t\t\t\tvar retobj={/*version:'1.0',*/screenorientation:'landscape',cacheid:'CDCDCDCD'};\r\n\t\t\t\t\tlayametas.forEach(function(layameta){\r\n\t\t\t\t\t\tparseKVPair(layameta,retobj);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retobj;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t})(data);\r\n\t\t\t//先加入一个执行的js。这个应该都是laya.js\r\n\t\t\tif(layainfo ){\r\n\t\t\t\tvar layaurl=(layainfo.layaurl);//||(runcontext.layarepo+layainfo.version+'/laya.js');\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif(layaurl && layaurl.indexOf('://')<0){//相对路径\r\n\t\t\t\t\tlayaurl = urlobj.resolve(url,layaurl);\r\n\t\t\t\t\tscripts.push(layaurl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//由微端加载的script标签。只能有一个\r\n\t\t\tvar layascriptSrc = (function(data){\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tvar lscript = data.match(/<script\\s+.*loader=['\"]laya['\"].*/g);\r\n\t\t\t\tif(lscript){\r\n\t\t\t\t\tlscript.forEach(function(script){\r\n\t\t\t\t\t\tvar ret = script.match(/src=([^\\s]+)/);\r\n\t\t\t\t\t\tif(ret){\r\n\t\t\t\t\t\t\tvar scriptsrc=ret[1].substr(1,ret[1].length-2);\r\n\t\t\t\t\t\t\tif(scriptsrc.indexOf('://')<0){//相对路径\r\n\t\t\t\t\t\t\t\tscriptsrc = urlobj.resolve(url,scriptsrc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscripts.push(scriptsrc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn scripts;\r\n\t\t\t})(data); \r\n\t\t\t//需要预先加载的文件\r\n\t\t\tpreloads = (function(data){\r\n\t\t\t\tvar files=[];\r\n\t\t\t\tvar preloadmetas = data.match(/<\\s*meta\\s*name=['\"]preload['\"].*/g);\r\n\t\t\t\tif(preloadmetas){\r\n\t\t\t\t\tpreloadmetas.forEach(function(meta){\r\n\t\t\t\t\t\tvar ret={};\r\n\t\t\t\t\t\tparseKVPair(meta,ret);\r\n\t\t\t\t\t\tif(ret.files){\r\n\t\t\t\t\t\t\tfiles=files.concat(ret.files.split(';'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn files;\r\n\t\t\t})(data);\r\n\t\t\t\r\n\t\t\tif(scripts.length){\r\n\t\t\t\trunNext();\r\n\t\t\t}else{\r\n\t\t\t\t//不是laya页面\r\n\t\t\t\talert('Sorry, this is a normal html page. i cant render it yet!\\n'+data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdownloadfile(url+'?rand='+Math.random()*(new Date().valueOf()),\t//优先尝试强制下载。\r\n\t\t\tonStartPageData//on download OK\r\n\t\t\t, function(e){//on download error\r\n\t\t\t\t//如果失败了再尝试有没有打包版的页面数据。\r\n\t\t\t\tdownloadfile(url,onStartPageData//on download OK\r\n\t\t\t\t\t,function(e){//on download error\r\n\t\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\talert('load start page error!url='+url);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tfunction setOrientation(){\r\n\t\tvar nameToVal={\r\n\t\t\tlandscape:0,portrait:1,user:2,behind:3,sensor:4,nosensor:5,sensor_landscape:6,\r\n\t\t\tsensor_portrait:7,reverse_landscape:8,reverse_portrait:9,full_sensor:10,}\r\n\t\tvar nOri = (function(name){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar n = nameToVal[name];\r\n\t\t\t\t\treturn n||0;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t})(layainfo.screenorientation);\r\n\t\t\t\r\n\t\tif(conchConfig.getScreenOrientation()!=nOri){\r\n\t\t\tconchConfig.setScreenOrientation(nOri);\r\n\t\t}\r\n\t\trunNext();\r\n\t}\r\n\tfunction runConfig()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.configjs )\r\n\t\t\t{\r\n\t\t\t\tvar configJsUrl = layainfo.configjs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( configJsUrl && configJsUrl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tconfigJsUrl = urlobj.resolve(url,configJsUrl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( configJsUrl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download configjs error e=\" + e);runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\tfunction showLogo()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.logojs )\r\n\t\t\t{\r\n\t\t\t\tlayainfo.bShowLogoJS = true;\r\n\t\t\t\tvar logojsurl = layainfo.logojs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( logojsurl && logojsurl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tlogojsurl = urlobj.resolve(url,logojsurl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( logojsurl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download logjs error e=\" + e);layainfo.bShowLogoJS=false;runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateDcc(){\r\n\t\tappcache.setResourceID('appurl',urlpath);\r\n\t\tvar curassets = appcache.getResourceID('netassetsid');\r\n\t\tdownloadfile(urlpath+'update/assetsid.txt?rand='+Math.random()*(new Date().valueOf()),//加随机是为了防止不小心把它加入了缓存\r\n\t\t\tfunction(data){\r\n\t\t\t\tif( data!=curassets ){\r\n\t\t\t\t    //下载新的包\r\n\t\t\t\t    //先下载二进制。\r\n\t\t\t\t    var file = new layaHtml5.File(urlpath + 'update/filetable.bin?rand=' + Math.random() * (new Date().valueOf()));\r\n\t\t\t\t    var filereader = new FileReader();\r\n\t\t\t\t\tfilereader.setIgnoreError(true);\r\n\t\t\t\t    filereader.onload = function () {\r\n\t\t\t\t        if (filereader.result instanceof ArrayBuffer) {\r\n\t\t\t\t            idxdata = \"\";\r\n\t\t\t\t            var v = new Uint32Array(filereader.result);\r\n\t\t\t\t\t\t\tif(v[0]!=0xffeeddcc || v[1]!=1){//需要校验\r\n\t\t\t\t\t\t\t\tonloadfterr();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor (var ii = 2, isz = v.length / 2; ii < isz; ii++) \r\n\t\t\t\t\t\t\t\t\tidxdata += v[ii * 2].toString(16) + ' ' + v[ii * 2+1].toString(16)+'\\n';\r\n\t\t\t\t\t\t\t\tappcache.saveFileTable(idxdata);\r\n\t\t\t\t\t\t\t\tappcache = new AppCache(urlpath);\r\n\t\t\t\t\t\t\t\t//设置新的id。只有写完filetable之后才能写这个\r\n\t\t\t\t\t\t\t\tappcache.setResourceID('netassetsid', data);\r\n\t\t\t\t\t\t\t\trunNext();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t        } else { alert('下载filetable.bin失败。类型不对');};\r\n\t\t\t\t    }\r\n\t\t\t\t    function onloadfterr() {\r\n\t\t\t\t        //出错的话，下载文本的\r\n\t\t\t\t        downloadfile(urlpath + 'update/filetable.txt?rand=' + Math.random() * (new Date().valueOf()),\r\n                            function (idxdata) {\r\n                                appcache.saveFileTable(idxdata);\r\n                                appcache = new AppCache(urlpath);\r\n                                //设置新的id。只有写完filetable之后才能写这个\r\n                                appcache.setResourceID('netassetsid', data);\r\n                                runNext();\r\n                            },\r\n                            function (e) {\r\n                                runNext();\r\n                            }, true);\r\n\t\t\t\t    }\r\n\t\t\t\t\tfilereader.onerror = onloadfterr;\r\n\t\t\t\t    filereader.readAsArrayBuffer(file);\r\n\t\t\t\t}else\r\n\t\t\t\t\trunNext();\r\n\t\t\t},\r\n\t\t\tfunction (e) {\r\n                //如果没有assetsid，则去掉校验功能。\r\n\t\t\t    appcache.saveFileTable('');\r\n\t\t\t    appcache = new AppCache(urlpath);\r\n\t\t\t\trunNext();\r\n\t\t\t},true);\t\r\n\t}\r\n\t\r\n\t//下载必须文件\r\n\tfunction predownload(){\r\n\t\tvar num = preloads.length;\r\n\t\tif(num<=0)\r\n\t\t\trunNext();\r\n\t\tfunction preloadret(b){\r\n\t\t\tnum--;\r\n\t\t\tif(num<=0){\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpreloads.forEach(function(f){\r\n\t\t\tvar absurl=f;\r\n\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\tif(absurl.indexOf('://')<0){//相对路径\r\n\t\t\t\tabsurl = urlobj.resolve(url,absurl);\r\n\t\t\t}\r\n\t\t\t//读取二进制文件\r\n\t\t\tvar file = new layaHtml5.File(absurl);\r\n\t\t\tvar filereader = new FileReader();\r\n\t\t\tfilereader.onload=function(){ preloadret(true);}\r\n\t\t\tfilereader.onerror=function(){preloadret(false);}\r\n\t\t\tfilereader.readAsArrayBuffer(file);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction startApp(){\r\n\t\tfunction getIsEval()\r\n\t\t{\r\n\t\t\tif( layainfo.bShowLogoJS == true )\r\n\t\t\t{\r\n\t\t\t\tvar nOldTime = new Date().valueOf();\r\n\t\t\t\tif( conch.getLogoImageState() )\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t\t}\r\n\t\t\t\telse if( new Date().valueOf() - nOldTime > 15000 )\r\n\t\t\t\t{\r\n\t\t\t\t\tdownloadscript();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdownloadscript();\r\n\t\t\t}\r\n\t\t}\r\n\t\t//依次执行所有的js\r\n\t\tfunction downloadscript(){\r\n\t\t\tclearInterval( conch.scriptTimeInterval );\r\n\t\t\tif( scripts.length <= 0 )\r\n\t\t\t\treturn;\r\n\t\t\tvar ssrc=scripts[0];\r\n\t\t\tscripts.shift();\r\n\t\t\tlog('downloadjs:'+ssrc);\t\t\t\r\n\t\t\tdownloadfile(ssrc,scriptret,\r\n\t\t\t\tfunction(e){\r\n\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t}else\t\t\t\t\r\n\t\t\t\t\t\talert('download js error:url='+ssrc);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tfunction scriptret(data){\r\n\t\t\tlog('downloadjs ok');\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\twindow.eval(data);\r\n\t\t\t\tif( !layainfo.bShowLogoJS )\r\n\t\t\t\t{\r\n\t\t\t\t\tconch.showLoadingView( false );\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\talert(e+' '+e.stack);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//scripts.shift();\r\n\t\t\tif(scripts.length<=0){\r\n\t\t\t\tif( window.onload ) window.onload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconch.scriptTimeInterval=setInterval(getIsEval,17);\r\n\t}\r\n\t//需要依次执行的函数\r\n\trunSeqs.seqs=[getPageInfo,setOrientation,updateDcc,runConfig,showLogo,predownload,startApp];\r\n\trunSeqs.run();//这个函数不会退出，直到程序结束\t\t\r\n}\r\n\r\nlayaDoc.addEventListener('onkeydown',function(e){\r\n\r\n\tif(e.keyCode==116){\r\n\t\t//reloadCurProcess();\r\n\t\tsimAndroidRefresh();\r\n\t}\r\n\tif(e.keyCode==117){\r\n\t\t//gc();\r\n\t\turlBack();\r\n\t}\r\n});\r\nfunction getStartDefaultHtmlPath()\r\n{\r\n\tvar sExePath = getExePath();\r\n\tif( sExePath != null )\r\n\t{\r\n\t\tvar sStartHtml = \"\";\r\n\t\tvar vString = sExePath.split( '\\\\' );\r\n\t\tvString.pop();vString.pop();\r\n\t\tsStartHtml = vString.join( '/' );\r\n\t\tsStartHtml += '/starthtml/default.html'\r\n\t\treturn sStartHtml\r\n\t}\r\n\treturn null;\r\n}\r\nfunction downloadfile(url, force,onok,onerr)\r\n{\r\n\tif(force){\r\n\t\turl=(function(url){\r\n\t\t\tvar ret=url;\r\n\t\t\tif(url.indexOf('?')<0){\r\n\t\t\t\tret = url+'?rnd='+Math.random();\r\n\t\t\t}else{\r\n\t\t\t\tret = url+'&downloadrnd'+Math.random().toString().substr(2)+'=1';\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t})(url);\r\n\t}\r\n\tvar file = new layaHtml5.File(url);\r\n\tvar filereader = new FileReader();\r\n\tfilereader.onload=function(){ onok(filereader.result);}\r\n\tfilereader.onerror=function(){onerr();}\r\n\tfilereader.readAsText(file);\r\n}\r\n\r\n\r\n//loadUrl(location.href||'file:///' + getStartDefaultHtmlPath() );\r\n//loadUrl(location.href||'http://10.10.20.31:8899/bench.html');\r\n//loadUrl(location.href||'http://10.10.20.31:8888/test/webgltest/bench.html');\r\n//loadUrl(location.href||'http://10.10.20.31:8888/test/canv3dmod.html');\r\nloadUrl(location.href||'http://localhost:8899/MyTest/webgl-benchmark-conch/bench.html');\r\n//loadUrl(location.href||'http://www.686wan.com/triple/laya1/preloader.max.html?kk=12345&gameid=101&sp=40');\r\n//loadUrl(location.href||'http://10.10.20.102/niubi/hxh.max.html');\r\n//loadUrl(location.href||'http://www.layabox.com/demo/layamain.max.html');\r\n","sourceLength":15476,"scriptType":2,"compilationType":0,"context":{"ref":21},"text":"undefined (lines: 578)"},{"handle":25,"type":"context","text":"#<ContextMirror>"},{"handle":27,"type":"context","text":"#<ContextMirror>"},{"handle":29,"type":"context","text":"#<ContextMirror>"},{"handle":31,"type":"context","text":"#<ContextMirror>"},{"handle":15,"type":"context","text":"#<ContextMirror>"},{"handle":33,"type":"context","text":"#<ContextMirror>"},{"handle":2,"type":"context","text":"#<ContextMirror>"},{"handle":35,"type":"context","text":"#<ContextMirror>"},{"handle":37,"type":"context","text":"#<ContextMirror>"},{"handle":39,"type":"context","text":"#<ContextMirror>"},{"handle":41,"type":"context","text":"#<ContextMirror>"},{"handle":43,"type":"context","text":"#<ContextMirror>"},{"handle":45,"type":"context","text":"#<ContextMirror>"},{"handle":21,"type":"context","text":"#<ContextMirror>"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:55

{"seq":16,"type":"request","command":"listbreakpoints"}
> end of message

> Received from Chrome:
Content-Length: 199

{"seq":4,"request_seq":16,"type":"response","command":"listbreakpoints","success":true,"body":{"breakpoints":[],"breakOnExceptions":false,"breakOnUncaughtExceptions":false},"refs":[],"running":false}
> end of message

> Sent to Chrome:
Content-Length:167

{"seq":17,"type":"request","command":"flags","arguments":{"flags":[{"name":"breakOnUncaughtException","value":false},{"name":"breakOnCaughtException","value":false}]}}
> end of message

> Received from Chrome:
Content-Length: 220

{"seq":5,"request_seq":17,"type":"response","command":"flags","success":true,"body":{"flags":[{"name":"breakOnUncaughtException","value":false},{"name":"breakOnCaughtException","value":false}]},"refs":[],"running":false}
> end of message

> Sent to Chrome:
Content-Length:104

{"seq":18,"type":"request","command":"scope","arguments":{"number":0,"inlineRefs":true,"frameNumber":0}}
> end of message

> Received from Chrome:
Content-Length: 787

{"seq":6,"request_seq":18,"type":"response","command":"scope","success":true,"body":{"type":1,"index":0,"frameIndex":0,"object":{"handle":-1,"type":"object","className":"Object","constructorFunction":{"ref":47,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":50,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"size","value":{"ref":4,"type":"number","value":20480}},{"name":"expand","value":{"ref":4,"type":"number","value":20480}},{"name":"littleEndian","value":{"ref":5,"type":"boolean","value":true}}],"text":"#<Object>"},"text":"#<ScopeMirror>"},"refs":[{"handle":4,"type":"number","value":20480,"text":"20480"},{"handle":5,"type":"boolean","value":true,"text":"true"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:104

{"seq":19,"type":"request","command":"scope","arguments":{"number":1,"inlineRefs":true,"frameNumber":0}}
> end of message

> Received from Chrome:
Content-Length: 2268

{"seq":7,"request_seq":19,"type":"response","command":"scope","success":true,"body":{"type":3,"index":1,"frameIndex":0,"object":{"handle":-2,"type":"object","className":"Object","constructorFunction":{"ref":47,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":50,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"obj","value":{"ref":9,"type":"undefined"}},{"name":"file","value":{"ref":51,"type":"string","value":"webgl.js"}},{"name":"arguments","value":{"ref":52,"type":"object","className":"Arguments"}},{"name":"fc","value":{"ref":53,"type":"string","value":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)"}},{"name":"str","value":{"ref":54,"type":"string","value":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)"}}],"text":"#<Object>"},"text":"#<ScopeMirror>"},"refs":[{"handle":9,"type":"undefined","text":"undefined"},{"handle":51,"type":"string","value":"webgl.js","length":8,"text":"webgl.js"},{"handle":52,"type":"object","className":"Arguments","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"callee","value":{"ref":57,"type":"function","name":"require","inferredName":"","scriptId":18}},{"name":0,"value":{"ref":51,"type":"string","value":"webgl.js"}}],"text":"#<Object>"},{"handle":53,"type":"string","value":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)","fromIndex":0,"toIndex":80,"length":52205,"text":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)"},{"handle":54,"type":"string","value":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)","fromIndex":0,"toIndex":80,"length":52234,"text":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:104

{"seq":20,"type":"request","command":"scope","arguments":{"number":0,"inlineRefs":true,"frameNumber":1}}
> end of message

> Received from Chrome:
Content-Length: 1385

{"seq":8,"request_seq":20,"type":"response","command":"scope","success":true,"body":{"type":1,"index":0,"frameIndex":1,"object":{"handle":-3,"type":"object","className":"Object","constructorFunction":{"ref":47,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":50,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"webgl","value":{"ref":8,"type":"object","className":"Object"}}],"text":"#<Object>"},"text":"#<ScopeMirror>"},"refs":[{"handle":8,"type":"object","className":"Object","constructorFunction":{"ref":13,"type":"function","name":"","inferredName":""},"protoObject":{"ref":58,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"flushRenderCommands","value":{"ref":59,"type":"function","name":"flushRenderCommands","inferredName":""}},{"name":"flushNeededRT","value":{"ref":60,"type":"function","name":"flushNeededRT","inferredName":""}},{"name":"BUFFER_SIZE","value":{"ref":4,"type":"number","value":20480}},{"name":"width","value":{"ref":61,"type":"number","value":0}},{"name":"height","value":{"ref":61,"type":"number","value":0}},{"name":"_idGenerator","value":{"ref":62,"type":"object","className":"Object"}},{"name":"_locTable","value":{"ref":63,"type":"object","className":"Object"}}],"text":"#<Object>"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:104

{"seq":21,"type":"request","command":"scope","arguments":{"number":1,"inlineRefs":true,"frameNumber":1}}
> end of message

> Received from Chrome:
Content-Length: 2268

{"seq":9,"request_seq":21,"type":"response","command":"scope","success":true,"body":{"type":3,"index":1,"frameIndex":1,"object":{"handle":-4,"type":"object","className":"Object","constructorFunction":{"ref":47,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":50,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"obj","value":{"ref":9,"type":"undefined"}},{"name":"file","value":{"ref":51,"type":"string","value":"webgl.js"}},{"name":"arguments","value":{"ref":52,"type":"object","className":"Arguments"}},{"name":"fc","value":{"ref":53,"type":"string","value":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)"}},{"name":"str","value":{"ref":54,"type":"string","value":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)"}}],"text":"#<Object>"},"text":"#<ScopeMirror>"},"refs":[{"handle":9,"type":"undefined","text":"undefined"},{"handle":51,"type":"string","value":"webgl.js","length":8,"text":"webgl.js"},{"handle":52,"type":"object","className":"Arguments","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"callee","value":{"ref":57,"type":"function","name":"require","inferredName":"","scriptId":18}},{"name":0,"value":{"ref":51,"type":"string","value":"webgl.js"}}],"text":"#<Object>"},{"handle":53,"type":"string","value":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)","fromIndex":0,"toIndex":80,"length":52205,"text":"DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis.... (length: 52205)"},{"handle":54,"type":"string","value":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)","fromIndex":0,"toIndex":80,"length":52234,"text":"(function(exports){DataBuffer = function(size,expand,littleEndian)\r\n{\r\n\tthis._po... (length: 52234)"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:104

{"seq":22,"type":"request","command":"scope","arguments":{"number":2,"inlineRefs":true,"frameNumber":0}}
> end of message

> Received from Chrome:
Content-Length: 376069

{"seq":10,"request_seq":22,"type":"response","command":"scope","success":true,"body":{"type":0,"index":2,"frameIndex":0,"object":{"handle":64,"type":"object","className":"Object","constructorFunction":{"ref":65,"type":"function","name":"","inferredName":""},"protoObject":{"ref":10,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"runcontext","value":{"ref":66,"type":"object","className":"Object"}},{"name":"g_loadedCount","value":{"ref":67,"type":"number","value":12}},{"name":"Uint8Array","value":{"ref":68,"type":"function","name":"Uint8Array","inferredName":"","scriptId":15}},{"name":"createProcess","value":{"ref":71,"type":"function","name":"","inferredName":""}},{"name":"XMLHttpRequest","value":{"ref":72,"type":"function","name":"","inferredName":"window.XMLHttpRequest","scriptId":27}},{"name":"ConchTextWordArrary","value":{"ref":73,"type":"function","name":"","inferredName":""}},{"name":"div","value":{"ref":74,"type":"function","name":"","inferredName":"div","scriptId":18}},{"name":"getInnerHeight","value":{"ref":75,"type":"function","name":"","inferredName":""}},{"name":"SetupWebglContext","value":{"ref":7,"type":"function","name":"","inferredName":"SetupWebglContext","scriptId":32}},{"name":"TypeError","value":{"ref":76,"type":"function","name":"TypeError","inferredName":"","scriptId":9}},{"name":"context","value":{"ref":79,"type":"function","name":"","inferredName":""}},{"name":"_XmlDocument","value":{"ref":80,"type":"function","name":"","inferredName":""}},{"name":"initShaderProgram","value":{"ref":81,"type":"function","name":"initShaderProgram","inferredName":"","scriptId":34}},{"name":"setOnActive","value":{"ref":82,"type":"function","name":"","inferredName":""}},{"name":"dbg_uploadAllLog","value":{"ref":83,"type":"function","name":"","inferredName":""}},{"name":"audio","value":{"ref":84,"type":"function","name":"","inferredName":""}},{"name":"print","value":{"ref":85,"type":"function","name":"","inferredName":""}},{"name":"externalInterface","value":{"ref":86,"type":"object","className":"Object"}},{"name":"itv","value":{"ref":87,"type":"object","className":"Object"}},{"name":"layabox","value":{"ref":88,"type":"object","className":"Object"}},{"name":"urlForward","value":{"ref":89,"type":"function","name":"","inferredName":""}},{"name":"Array","value":{"ref":90,"type":"function","name":"Array","inferredName":""}},{"name":"ConchTextWord","value":{"ref":91,"type":"function","name":"","inferredName":""}},{"name":"canvas","value":{"ref":92,"type":"function","name":"","inferredName":""}},{"name":"loadLocalStorage","value":{"ref":93,"type":"function","name":"","inferredName":"exports.loadLocalStorage","scriptId":24}},{"name":"Socket","value":{"ref":94,"type":"function","name":"","inferredName":"ws","scriptId":29}},{"name":"location","value":{"ref":95,"type":"object","className":"Object"}},{"name":"URL","value":{"ref":96,"type":"function","name":"URL","inferredName":"","scriptId":28}},{"name":"AppCache","value":{"ref":97,"type":"function","name":"","inferredName":""}},{"name":"temp","value":{"ref":98,"type":"object","className":"Object"}},{"name":"JSBegin","value":{"ref":99,"type":"function","name":"","inferredName":""}},{"name":"loadUrl","value":{"ref":100,"type":"function","name":"loadUrl","inferredName":"","scriptId":18}},{"name":"eval","value":{"ref":101,"type":"function","name":"eval","inferredName":"","scriptId":4}},{"name":"SyntaxError","value":{"ref":102,"type":"function","name":"SyntaxError","inferredName":"","scriptId":9}},{"name":"createTextureByImgObject","value":{"ref":103,"type":"function","name":"createTextureByImgObject","inferredName":"","scriptId":34}},{"name":"Float32Array","value":{"ref":104,"type":"function","name":"Float32Array","inferredName":"","scriptId":15}},{"name":"BoneInfo","value":{"ref":105,"type":"function","name":"","inferredName":""}},{"name":"Number","value":{"ref":106,"type":"function","name":"Number","inferredName":"","scriptId":4}},{"name":"Uint32Array","value":{"ref":107,"type":"function","name":"Uint32Array","inferredName":"","scriptId":15}},{"name":"DataBuffer","value":{"ref":1,"type":"function","name":"","inferredName":"DataBuffer","scriptId":32}},{"name":"_$innerHeight","value":{"ref":108,"type":"number","value":720}},{"name":"setInterval","value":{"ref":109,"type":"function","name":"","inferredName":"exports.setInterval","scriptId":26}},{"name":"conchMarket","value":{"ref":110,"type":"object","className":"Object"}},{"name":"v4TexCoodIndex","value":{"ref":56,"type":"number","value":1}},{"name":"g_updateCount","value":{"ref":61,"type":"number","value":0}},{"name":"Float64Array","value":{"ref":111,"type":"function","name":"Float64Array","inferredName":"","scriptId":15}},{"name":"Int32Array","value":{"ref":112,"type":"function","name":"Int32Array","inferredName":"","scriptId":15}},{"name":"iagPro","value":{"ref":20,"type":"object","className":"Object"}},{"name":"MULTI_BUFFER_IO","value":{"ref":56,"type":"number","value":1}},{"name":"DataView","value":{"ref":113,"type":"function","name":"DataView","inferredName":"","scriptId":15}},{"name":"fragmentShaderObject","value":{"ref":12,"type":"null","value":null}},{"name":"URIError","value":{"ref":114,"type":"function","name":"URIError","inferredName":"","scriptId":9}},{"name":"window","value":{"ref":6,"type":"object","className":"global"}},{"name":"DOMParser","value":{"ref":115,"type":"function","name":"DOMParser","inferredName":"","scriptId":33}},{"name":"_ConchNode","value":{"ref":116,"type":"function","name":"","inferredName":""}},{"name":"writeStrFileSync","value":{"ref":117,"type":"function","name":"","inferredName":""}},{"name":"measureText","value":{"ref":118,"type":"function","name":"","inferredName":""}},{"name":"undefined","value":{"ref":9,"type":"undefined"}},{"name":"history","value":{"ref":119,"type":"object","className":"Object"}},{"name":"g_vertice_buffer","value":{"ref":120,"type":"object","className":"Float32Array"}},{"name":"ProgramLocationTable","value":{"ref":121,"type":"function","name":"","inferredName":"ProgramLocationTable","scriptId":32}},{"name":"setMouseEvtFunction","value":{"ref":122,"type":"function","name":"","inferredName":""}},{"name":"MULTI_DRAWCALL","value":{"ref":56,"type":"number","value":1}},{"name":"Uint8ClampedArray","value":{"ref":123,"type":"function","name":"Uint8ClampedArray","inferredName":"","scriptId":15}},{"name":"log","value":{"ref":124,"type":"function","name":"","inferredName":"exports.log","scriptId":22}},{"name":"clearInterval","value":{"ref":125,"type":"function","name":"","inferredName":"exports.clearInterval","scriptId":26}},{"name":"myCanvasObject","value":{"ref":126,"type":"object","className":"Object"}},{"name":"File","value":{"ref":127,"type":"function","name":"","inferredName":""}},{"name":"PerfShow","value":{"ref":128,"type":"function","name":"","inferredName":""}},{"name":"setKeyEvtFunction","value":{"ref":129,"type":"function","name":"","inferredName":""}},{"name":"layaHtml5","value":{"ref":130,"type":"object","className":"Object"}},{"name":"ConchVirtualBitmap","value":{"ref":131,"type":"function","name":"","inferredName":"ConchVirtualBitmap","scriptId":18}},{"name":"Infinity","value":{"ref":132,"type":"number","value":null}},{"name":"Int8Array","value":{"ref":133,"type":"function","name":"Int8Array","inferredName":"","scriptId":15}},{"name":"downloadfile","value":{"ref":134,"type":"function","name":"downloadfile","inferredName":"","scriptId":18}},{"name":"PerfUpdateDt","value":{"ref":135,"type":"function","name":"","inferredName":""}},{"name":"_writeFileSync","value":{"ref":136,"type":"function","name":"","inferredName":""}},{"name":"g_index_buffer","value":{"ref":137,"type":"object","className":"Uint16Array"}},{"name":"IdGenerator","value":{"ref":138,"type":"function","name":"","inferredName":"IdGenerator","scriptId":32}},{"name":"i","value":{"ref":67,"type":"number","value":12}},{"name":"initDataBuffer","value":{"ref":139,"type":"function","name":"initDataBuffer","inferredName":"","scriptId":34}},{"name":"childs","value":{"ref":140,"type":"object","className":"Array"}},{"name":"appcache","value":{"ref":141,"type":"object","className":"Object"}},{"name":"pImg","value":{"ref":142,"type":"object","className":"Object"}},{"name":"Object","value":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4}},{"name":"decodeURIComponent","value":{"ref":143,"type":"function","name":"decodeURIComponent","inferredName":"","scriptId":7}},{"name":"FileReader","value":{"ref":146,"type":"function","name":"","inferredName":""}},{"name":"ArrayBuffer","value":{"ref":147,"type":"function","name":"ArrayBuffer","inferredName":"","scriptId":14}},{"name":"console","value":{"ref":150,"type":"object","className":"Object"}},{"name":"programObject","value":{"ref":12,"type":"null","value":null}},{"name":"decodeURI","value":{"ref":151,"type":"function","name":"decodeURI","inferredName":"","scriptId":7}},{"name":"open","value":{"ref":152,"type":"function","name":"","inferredName":"exports.open","scriptId":22}},{"name":"Int16Array","value":{"ref":153,"type":"function","name":"Int16Array","inferredName":"","scriptId":15}},{"name":"Date","value":{"ref":154,"type":"function","name":"Date","inferredName":"","scriptId":11}},{"name":"TextureGroup","value":{"ref":157,"type":"function","name":"","inferredName":""}},{"name":"RegExp","value":{"ref":158,"type":"function","name":"RegExp","inferredName":"","scriptId":13}},{"name":"isFinite","value":{"ref":161,"type":"function","name":"isFinite","inferredName":"","scriptId":4}},{"name":"include","value":{"ref":162,"type":"function","name":"include","inferredName":"","scriptId":18}},{"name":"initTexrures","value":{"ref":163,"type":"function","name":"initTexrures","inferredName":"","scriptId":34}},{"name":"Math","value":{"ref":164,"type":"object","className":"Math"}},{"name":"stopTimeout","value":{"ref":165,"type":"function","name":"","inferredName":"exports.stopTimeout","scriptId":26}},{"name":"WebSocket","value":{"ref":166,"type":"function","name":"","inferredName":"ws","scriptId":29}},{"name":"MemoryCanvas","value":{"ref":167,"type":"function","name":"","inferredName":""}},{"name":"gc","value":{"ref":168,"type":"function","name":"gc","inferredName":""}},{"name":"IsStreamMode","value":{"ref":169,"type":"function","name":"","inferredName":""}},{"name":"requestAnimationFrame","value":{"ref":170,"type":"function","name":"","inferredName":"exports.requestAnimationFrame","scriptId":26}},{"name":"setTimeout","value":{"ref":171,"type":"function","name":"","inferredName":"exports.setTimeout","scriptId":26}},{"name":"isNaN","value":{"ref":172,"type":"function","name":"isNaN","inferredName":"","scriptId":4}},{"name":"encodeURI","value":{"ref":173,"type":"function","name":"encodeURI","inferredName":"","scriptId":7}},{"name":"getWebview","value":{"ref":174,"type":"function","name":"","inferredName":"exports.getWebview","scriptId":31}},{"name":"ConchNode","value":{"ref":175,"type":"function","name":"","inferredName":""}},{"name":"boneAnimTemplate","value":{"ref":176,"type":"function","name":"","inferredName":""}},{"name":"genCanvasTexture","value":{"ref":177,"type":"function","name":"genCanvasTexture","inferredName":"","scriptId":34}},{"name":"androidBridge","value":{"ref":178,"type":"object","className":"Object"}},{"name":"_DOMParser","value":{"ref":179,"type":"function","name":"","inferredName":""}},{"name":"onDrawFrame","value":{"ref":180,"type":"function","name":"onDrawFrame","inferredName":"","scriptId":34}},{"name":"conch","value":{"ref":181,"type":"object","className":"Object"}},{"name":"createChildren","value":{"ref":182,"type":"function","name":"createChildren","inferredName":"","scriptId":34}},{"name":"_$innerWidth","value":{"ref":183,"type":"number","value":1280}},{"name":"alert1","value":{"ref":184,"type":"function","name":"","inferredName":""}},{"name":"screen","value":{"ref":185,"type":"object","className":"Object"}},{"name":"showLoadingView","value":{"ref":186,"type":"function","name":"","inferredName":""}},{"name":"SHOW_PERFORMANCE","value":{"ref":56,"type":"number","value":1}},{"name":"navigator","value":{"ref":187,"type":"object","className":"Object"}},{"name":"ReferenceError","value":{"ref":188,"type":"function","name":"ReferenceError","inferredName":"","scriptId":9}},{"name":"boneAnimation","value":{"ref":189,"type":"function","name":"","inferredName":""}},{"name":"require","value":{"ref":57,"type":"function","name":"require","inferredName":"","scriptId":18}},{"name":"NaN","value":{"ref":190,"type":"number","value":null}},{"name":"readFileSync","value":{"ref":191,"type":"function","name":"","inferredName":""}},{"name":"Image","value":{"ref":192,"type":"function","name":"","inferredName":""}},{"name":"RangeError","value":{"ref":193,"type":"function","name":"RangeError","inferredName":"","scriptId":9}},{"name":"encodeURIComponent","value":{"ref":194,"type":"function","name":"encodeURIComponent","inferredName":"","scriptId":7}},{"name":"Intl","value":{"ref":195,"type":"object","className":"Object"}},{"name":"webglInit","value":{"ref":14,"type":"function","name":"webglInit","inferredName":"","scriptId":34}},{"name":"vsh_origin","value":{"ref":196,"type":"string","value":"precision mediump float;\nattribute vec2 position;\nattribute vec2 inputTextureCoo... (length: 240)"}},{"name":"String","value":{"ref":197,"type":"function","name":"String","inferredName":"","scriptId":6}},{"name":"_ConchVirtualBitmap","value":{"ref":200,"type":"function","name":"","inferredName":""}},{"name":"parseFloat","value":{"ref":201,"type":"function","name":"parseFloat","inferredName":"","scriptId":4}},{"name":"_uploadFile","value":{"ref":202,"type":"function","name":"","inferredName":""}},{"name":"getExePath","value":{"ref":203,"type":"function","name":"","inferredName":""}},{"name":"si","value":{"ref":204,"type":"number","value":6}},{"name":"v4PositionIndex","value":{"ref":61,"type":"number","value":0}},{"name":"setJoystickEvtFunction","value":{"ref":205,"type":"function","name":"","inferredName":""}},{"name":"_ConchMask","value":{"ref":206,"type":"function","name":"","inferredName":""}},{"name":"_XmlNode","value":{"ref":207,"type":"function","name":"","inferredName":""}},{"name":"setOnDeactive","value":{"ref":208,"type":"function","name":"","inferredName":""}},{"name":"g_texCanvasIDs","value":{"ref":209,"type":"object","className":"Array"}},{"name":"JSEnd","value":{"ref":210,"type":"function","name":"","inferredName":""}},{"name":"image","value":{"ref":192,"type":"function","name":"","inferredName":""}},{"name":"urlBack","value":{"ref":211,"type":"function","name":"","inferredName":""}},{"name":"getInnerWidth","value":{"ref":212,"type":"function","name":"","inferredName":""}},{"name":"input","value":{"ref":213,"type":"function","name":"","inferredName":""}},{"name":"ConchArrayTextStr","value":{"ref":214,"type":"function","name":"","inferredName":""}},{"name":"localStorage","value":{"ref":215,"type":"object","className":"Object"}},{"name":"reloadCurProcess","value":{"ref":216,"type":"function","name":"","inferredName":""}},{"name":"readTextAsset","value":{"ref":217,"type":"function","name":"","inferredName":""}},{"name":"alert","value":{"ref":218,"type":"function","name":"","inferredName":""}},{"name":"createWebview","value":{"ref":219,"type":"function","name":"","inferredName":"exports.createWebview","scriptId":31}},{"name":"layaDoc","value":{"ref":220,"type":"object","className":"Object"}},{"name":"TextWordImage","value":{"ref":221,"type":"function","name":"","inferredName":""}},{"name":"Function","value":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4}},{"name":"_WebSocket","value":{"ref":223,"type":"function","name":"","inferredName":""}},{"name":"PerfAddData","value":{"ref":224,"type":"function","name":"","inferredName":""}},{"name":"simAndroidRefresh","value":{"ref":225,"type":"function","name":"","inferredName":""}},{"name":"conchConfig","value":{"ref":226,"type":"object","className":"Object"}},{"name":"tmGetCurms","value":{"ref":227,"type":"function","name":"","inferredName":""}},{"name":"g_texIDs","value":{"ref":228,"type":"object","className":"Array"}},{"name":"shaderInitWithVertexAndFragmentShader","value":{"ref":229,"type":"function","name":"shaderInitWithVertexAndFragmentShader","inferredName":"","scriptId":34}},{"name":"getStartDefaultHtmlPath","value":{"ref":230,"type":"function","name":"getStartDefaultHtmlPath","inferredName":"","scriptId":18}},{"name":"innerHeight","value":{"ref":9,"type":"undefined"}},{"name":"allwebview","value":{"ref":231,"type":"object","className":"Object"}},{"name":"_Socket","value":{"ref":232,"type":"function","name":"","inferredName":""}},{"name":"PerfDelData","value":{"ref":233,"type":"function","name":"","inferredName":""}},{"name":"setTouchEvtFunction","value":{"ref":234,"type":"function","name":"","inferredName":""}},{"name":"gl_mesh","value":{"ref":235,"type":"function","name":"","inferredName":""}},{"name":"innerWidth","value":{"ref":9,"type":"undefined"}},{"name":"escape","value":{"ref":236,"type":"function","name":"escape","inferredName":"","scriptId":7}},{"name":"_canvas","value":{"ref":237,"type":"function","name":"","inferredName":""}},{"name":"document","value":{"ref":220,"type":"object","className":"Object"}},{"name":"Uint16Array","value":{"ref":238,"type":"function","name":"Uint16Array","inferredName":"","scriptId":15}},{"name":"_location","value":{"ref":239,"type":"function","name":"","inferredName":""}},{"name":"cancelAnimationFrame","value":{"ref":240,"type":"function","name":"","inferredName":"exports.cancelAnimationFrame","scriptId":26}},{"name":"_XMLHttpRequest","value":{"ref":241,"type":"function","name":"","inferredName":""}},{"name":"LayaWebGL2","value":{"ref":242,"type":"function","name":"","inferredName":""}},{"name":"ConchTextStr","value":{"ref":243,"type":"function","name":"","inferredName":""}},{"name":"EvalError","value":{"ref":244,"type":"function","name":"EvalError","inferredName":"","scriptId":9}},{"name":"CHILD_NUMBER","value":{"ref":245,"type":"number","value":3}},{"name":"fs_mkdir","value":{"ref":246,"type":"function","name":"","inferredName":""}},{"name":"SINGLE_DRAWCALL","value":{"ref":61,"type":"number","value":0}},{"name":"JavaCallJS","value":{"ref":247,"type":"function","name":"","inferredName":"window.JavaCallJS","scriptId":30}},{"name":"JSON","value":{"ref":248,"type":"object","className":"JSON"}},{"name":"vertexShaderObject","value":{"ref":12,"type":"null","value":null}},{"name":"runSeqs","value":{"ref":249,"type":"object","className":"Object"}},{"name":"_XmlAttr","value":{"ref":250,"type":"function","name":"","inferredName":""}},{"name":"evalJS","value":{"ref":251,"type":"function","name":"","inferredName":""}},{"name":"unescape","value":{"ref":252,"type":"function","name":"unescape","inferredName":"","scriptId":7}},{"name":"printstack","value":{"ref":253,"type":"function","name":"","inferredName":"exports.printstack","scriptId":22}},{"name":"pattern","value":{"ref":254,"type":"function","name":"","inferredName":""}},{"name":"fs_exists","value":{"ref":255,"type":"function","name":"","inferredName":""}},{"name":"EJTextureData","value":{"ref":256,"type":"function","name":"","inferredName":""}},{"name":"webgl","value":{"ref":8,"type":"object","className":"Object"}},{"name":"parseInt","value":{"ref":257,"type":"function","name":"parseInt","inferredName":"","scriptId":4}},{"name":"g_images","value":{"ref":258,"type":"object","className":"Array"}},{"name":"closeCurProcess","value":{"ref":259,"type":"function","name":"","inferredName":""}},{"name":"Error","value":{"ref":260,"type":"function","name":"Error","inferredName":"","scriptId":9}},{"name":"Boolean","value":{"ref":261,"type":"function","name":"Boolean","inferredName":"","scriptId":4}},{"name":"enableTouch","value":{"ref":61,"type":"number","value":0}},{"name":"_boneAnimation","value":{"ref":262,"type":"function","name":"","inferredName":""}},{"name":"fsh_origin","value":{"ref":263,"type":"string","value":"precision mediump float;\nvarying vec2 textureCoordinate;\nuniform sampler2D input... (length: 174)"}}],"text":"#<Object>"},"text":"#<ScopeMirror>"},"refs":[{"handle":66,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"layarepo","value":{"ref":264,"type":"string","value":"http://10.10.20.31:7777/platform/layarepo/"}}],"text":"#<Object>"},{"handle":67,"type":"number","value":12,"text":"12"},{"handle":68,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":268,"type":"object","className":"Object"},"name":"Uint8Array","inferredName":"","resolved":true,"source":"function Uint8Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":1171,"line":52,"column":30,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":269,"type":"string","value":"Uint8Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":268,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":56,"type":"number","value":1}}],"text":"function Uint8Array() { [native code] }"},{"handle":71,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":270,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":270,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":72,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":272,"type":"object","className":"Object"},"name":"","inferredName":"window.XMLHttpRequest","resolved":true,"source":"function () {\r\n    var xhr = new _XMLHttpRequest();\r\n\txhr.responseType = \"text\";\r\n\txhr.responseText = null;\r\n\txhr.response = null;\r\n\txhr.url = null;\r\n\txhr.async = false;\r\n\txhr.method = 'GET';\r\n\txhr.evtmap={};\r\n\txhr.set_onreadystatechange(function (r) {\r\n\t    if (r == 1) {\r\n\t        this.readyState = 1;\r\n\t    }\r\n\t    if (this.onreadystatechange ) {\r\n            //标准的回调是没有参数的。\r\n\t        this.onreadystatechange.call(xhr);\r\n\t    }\r\n\t\t//模拟事件\r\n\t\tif(xhr.status==200){\r\n\t\t\tvar ls = xhr.evtmap['load'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f();});\r\n\t\t}else if(xhr.status==404){\r\n\t\t\tvar ls = xhr.evtmap['error'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f(null);});\r\n\t\t}\r\n\t});\r\n\txhr.validevt={'progress':1,'error':1,'abort':1,'load':1};\r\n\txhr.addEventListener=function(type, listener, useCapture){\r\n\t\tif(!xhr.validevt[type]){\r\n\t\t\tthrow('不支持的事件：'+type);\r\n\t\t}\r\n\t\txhr.evtmap[type] = xhr.evtmap[type]||[];\r\n\t\txhr.evtmap[type].push(listener);\r\n\t}\r\n\txhr.open = function (type, url, async) {\r\n\t\tthis.method=(type==='POST'?'POST':'GET');\r\n\t\tif (url.indexOf(':') < 0) url = location.fullpath + \"/\" + url;\r\n\t\tthis.url = url;\r\n\t\tthis.async = (async == null || async == undefined || async == true) ? true : false;\r\n\t\tthis._open(this.method, this.url, this.async);\r\n\t}\r\n\txhr.send = function (body) {\r\n\t    if (body instanceof ArrayBuffer || body instanceof DataView ) {\r\n\t        this.responseType = 'arraybuffer';\r\n\t    }\r\n\t\tvar _this = this;\r\n\t\tif(this.method=='POST' && body){\r\n\t\t    xhr.setPostCB(function onload(buf,strbuf) {\r\n\t\t        if (_this.responseType == 'arraybuffer') {\r\n\t\t            _this.response = buf;\r\n\t\t\t\t\t_this.responseText = strbuf;\r\n\t\t        }else{\r\n\t\t\t\t\t_this.responseText=buf;\r\n\t\t\t\t}\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n                if(_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t    }, function onerror(e) {\r\n\t\t        _this.readyState = 4;\r\n\t\t        _this.status = 404;//e; 目前好像只有200和404\r\n\t\t        _this._changeState(4);\r\n                if(_this.onerror)\r\n\t\t\t\t    _this.onerror();\t\t\t\r\n\t\t\t})\r\n\t\t\txhr.postData(this.url,body);\r\n\t\t} else {\r\n\t\t\tvar file = new layaHtml5.File(this.url);\r\n\t\t\tvar fileRead = new FileReader();\r\n\t\t\tfileRead.sync = !this.async;\r\n\t\t\tif( this.responseType == \"text\" || this.responseType == \"TEXT\" ){\r\n\t\t\t\tfileRead.responseType = 0;\r\n\t\t\t}else if( this.responseType == \"arraybuffer\" ){\r\n\t\t\t\tfileRead.responseType = 1;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"XMLhttpRequest 暂不支持的类型 responseType=\" + this.responseType );\r\n\t\t\t}\r\n\t\t\tfunction onload1()\r\n\t\t\t{\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n\t\t\t\tif (_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t\t}\r\n\t\t\tfileRead.onload = function () {\r\n\t\t\t\tif( _this.responseType == \"arraybuffer\" ){\r\n\t\t\t\t\t_this.response = fileRead.result;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.responseText = fileRead.result;\r\n\t\t\t\t}\r\n\t\t\t\tif(conchConfig.IsAsync)\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout (onload1,1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t   onload1();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfileRead.onerror = function () {\r\n\t\t\t    _this.readyState = 4;\r\n\t\t\t    _this.status = 404;\r\n\t\t\t    _this._changeState(4);\r\n                if(_this.onerror)\r\n                    _this.onerror();\r\n\t\t\t}\r\n\t\t\tif( _this.responseType == \"arraybuffer\" )\r\n\t\t\t\tfileRead.readAsArrayBuffer(file);\r\n\t\t\telse\r\n\t\t\t\tfileRead.readAsText(file);\r\n\t\t}\r\n\t}\r\n\treturn xhr;\r\n}","script":{"ref":34},"scriptId":27,"position":77,"line":1,"column":33,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":272,"type":"object","className":"Object"}}],"text":"function () {\r\n    var xhr = new _XMLHttpRequest();\r\n\txhr.responseType = \"text\";\r\n\txhr.responseText = null;\r\n\txhr.response = null;\r\n\txhr.url = null;\r\n\txhr.async = false;\r\n\txhr.method = 'GET';\r\n\txhr.evtmap={};\r\n\txhr.set_onreadystatechange(function (r) {\r\n\t    if (r == 1) {\r\n\t        this.readyState = 1;\r\n\t    }\r\n\t    if (this.onreadystatechange ) {\r\n            //标准的回调是没有参数的。\r\n\t        this.onreadystatechange.call(xhr);\r\n\t    }\r\n\t\t//模拟事件\r\n\t\tif(xhr.status==200){\r\n\t\t\tvar ls = xhr.evtmap['load'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f();});\r\n\t\t}else if(xhr.status==404){\r\n\t\t\tvar ls = xhr.evtmap['error'];\r\n\t\t\tif(ls)\r\n\t\t\t\tls.forEach(function(f){f(null);});\r\n\t\t}\r\n\t});\r\n\txhr.validevt={'progress':1,'error':1,'abort':1,'load':1};\r\n\txhr.addEventListener=function(type, listener, useCapture){\r\n\t\tif(!xhr.validevt[type]){\r\n\t\t\tthrow('不支持的事件：'+type);\r\n\t\t}\r\n\t\txhr.evtmap[type] = xhr.evtmap[type]||[];\r\n\t\txhr.evtmap[type].push(listener);\r\n\t}\r\n\txhr.open = function (type, url, async) {\r\n\t\tthis.method=(type==='POST'?'POST':'GET');\r\n\t\tif (url.indexOf(':') < 0) url = location.fullpath + \"/\" + url;\r\n\t\tthis.url = url;\r\n\t\tthis.async = (async == null || async == undefined || async == true) ? true : false;\r\n\t\tthis._open(this.method, this.url, this.async);\r\n\t}\r\n\txhr.send = function (body) {\r\n\t    if (body instanceof ArrayBuffer || body instanceof DataView ) {\r\n\t        this.responseType = 'arraybuffer';\r\n\t    }\r\n\t\tvar _this = this;\r\n\t\tif(this.method=='POST' && body){\r\n\t\t    xhr.setPostCB(function onload(buf,strbuf) {\r\n\t\t        if (_this.responseType == 'arraybuffer') {\r\n\t\t            _this.response = buf;\r\n\t\t\t\t\t_this.responseText = strbuf;\r\n\t\t        }else{\r\n\t\t\t\t\t_this.responseText=buf;\r\n\t\t\t\t}\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n                if(_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t    }, function onerror(e) {\r\n\t\t        _this.readyState = 4;\r\n\t\t        _this.status = 404;//e; 目前好像只有200和404\r\n\t\t        _this._changeState(4);\r\n                if(_this.onerror)\r\n\t\t\t\t    _this.onerror();\t\t\t\r\n\t\t\t})\r\n\t\t\txhr.postData(this.url,body);\r\n\t\t} else {\r\n\t\t\tvar file = new layaHtml5.File(this.url);\r\n\t\t\tvar fileRead = new FileReader();\r\n\t\t\tfileRead.sync = !this.async;\r\n\t\t\tif( this.responseType == \"text\" || this.responseType == \"TEXT\" ){\r\n\t\t\t\tfileRead.responseType = 0;\r\n\t\t\t}else if( this.responseType == \"arraybuffer\" ){\r\n\t\t\t\tfileRead.responseType = 1;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log(\"XMLhttpRequest 暂不支持的类型 responseType=\" + this.responseType );\r\n\t\t\t}\r\n\t\t\tfunction onload1()\r\n\t\t\t{\r\n\t\t\t\t_this.readyState = 4;\r\n\t\t\t\t_this.status = 200;\r\n\t\t\t\t_this._changeState(4);\r\n\t\t\t\tif (_this.onload)\r\n\t\t\t\t    _this.onload();\r\n\t\t\t}\r\n\t\t\tfileRead.onload = function () {\r\n\t\t\t\tif( _this.responseType == \"arraybuffer\" ){\r\n\t\t\t\t\t_this.response = fileRead.result;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.responseText = fileRead.result;\r\n\t\t\t\t}\r\n\t\t\t\tif(conchConfig.IsAsync)\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout (onload1,1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t   onload1();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfileRead.onerror = function () {\r\n\t\t\t    _this.readyState = 4;\r\n\t\t\t    _this.status = 404;\r\n\t\t\t    _this._changeState(4);\r\n                if(_this.onerror)\r\n                    _this.onerror();\r\n\t\t\t}\r\n\t\t\tif( _this.responseType == \"arraybuffer\" )\r\n\t\t\t\tfileRead.readAsArrayBuffer(file);\r\n\t\t\telse\r\n\t\t\t\tfileRead.readAsText(file);\r\n\t\t}\r\n\t}\r\n\treturn xhr;\r\n}"},{"handle":73,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":273,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":273,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":74,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":274,"type":"object","className":"Object"},"name":"","inferredName":"div","resolved":true,"source":"function (){}","script":{"ref":22},"scriptId":18,"position":2028,"line":93,"column":18,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":274,"type":"object","className":"Object"}}],"text":"function (){}"},{"handle":75,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":275,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":275,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":7,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":276,"type":"object","className":"Object"},"name":"","inferredName":"SetupWebglContext","resolved":true,"source":"function (webgl)\r\n{\r\n\t//setup the internal properties\r\n\twebgl.BUFFER_SIZE = 20480;  //min 1024\r\n\twebgl.BUFFER_SIZE = webgl.BUFFER_SIZE<1024?1024:webgl.BUFFER_SIZE;\r\n\twebgl.width  = 0;\r\n\twebgl.height = 0;\t\r\n\twebgl._idGenerator = new IdGenerator();\r\n\twebgl._locTable = new ProgramLocationTable();\t\r\n\twebgl._cmdBuffer = new DataBuffer(webgl.BUFFER_SIZE, webgl.BUFFER_SIZE, true);\r\n\twebgl._RTObjBuffer = [];// new DataBuffer(32, 32, true);\r\n\twebgl._RTObjAB = new Uint32Array(64);   //这个是为了提高效率。\r\n\twebgl._recycle_ids = [];\r\n\r\n\t//setup js functions\r\n    webgl.getExtension = function(name)\r\n\t{\r\n\t\t//alert(\"<IN>  getExtension\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getExtension);\r\n\t\t//alert(\"<OUT>  getExtension\");\r\n\t}\t\r\n\t\r\n\twebgl.createBuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createBuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createBuffer\");\r\n\t\treturn fadeID;\r\n\t}\r\n\r\n\twebgl.bindBuffer = function(target, buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindBuffer);\r\n\t\tthis._cmdBuffer.writeUint16(target);\t\r\n\t\tthis._cmdBuffer.writeUint16(buffer);\t\r\n\t\t//alert(\"<OUT>  bindBuffer\");\t\t\r\n\t}\r\n\t\r\n\twebgl.flush = function()\r\n\t{\r\n\t\t//alert(\"<IN>  flush\");\r\n\t\tif(this._cmdBuffer.getLength()==0)\r\n\t\t{\r\n\t\t\t//to avoid multi-call flush interface\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this._RTObjBuffer.length>= this._RTObjAB.length){\r\n\t\t    this._RTObjAB = new Uint32Array(this._RTObjBuffer.length+4);\r\n\t\t}\r\n\r\n\t\tthis._RTObjAB.set(this._RTObjBuffer);\r\n\t\tthis.flushNeededRT(this._RTObjBuffer.length, this._RTObjAB);\r\n\t\tthis._RTObjBuffer.length = 0;\r\n\t\tthis.flushRenderCommands(this._cmdBuffer.getByteArray(), this._cmdBuffer.getOffset());\r\n\t\t\t\r\n\t    //clear buffer\r\n\t\tif (this._recycle_ids.length > 0)\r\n\t\t{\r\n\t\t    this._idGenerator.recycle(this._recycle_ids);\r\n\t\t    this._recycle_ids = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis._cmdBuffer.reset();\r\n\t\t//alert(\"<OUT>  flush\");\r\n\t}\r\n\t\r\n\twebgl.bufferData=function(target, sizeOrArray, usage)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferData\");\r\n\t\t////alert(\"arguments[1] :\"+arguments[1]);\r\n\t\tif(typeof(arguments[1]) === 'number')\r\n\t\t{\r\n\t\t\t////alert(\"size :\"+arguments[1]);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_size);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[1]);\t//size\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t////alert(\"vector :\"+arguments[1].length);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_vector);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\r\n\t\t\tvar length = arguments[1].byteLength;\r\n\t\t\tif ((length % 4) != 0)\r\n\t\t\t{\r\n\t\t\t    alert(\"bufferData,len is not 4 align,length=\" + length);\r\n\t\t\t}\r\n\r\n\t\t\tthis._cmdBuffer.writeUint32(length);\t//length\t\t\r\n\t\t\tthis._cmdBuffer.writeArrayBuffer(arguments[1].buffer, 0, length);\t//buffer\t\t\r\n\t\t}\r\n\t\t//alert(\"<OUT>  bufferData\");\r\n\t}\r\n\r\n\twebgl.createShader = function(type)\r\n\t{\r\n\t\t//alert(\"<IN>  createShader\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createShader);\r\n\t\tthis._cmdBuffer.writeUint16(type);\r\n\t\tthis._cmdBuffer.writeUint16(fadeID);\r\n\t\t//alert(\"<OUT>  createShader\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.shaderSource = function(shader, source)\r\n\t{\r\n\t\t//alert(\"<IN>  shaderSource\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_shaderSource);\r\n\t\tthis._cmdBuffer.writeUint16(shader);\r\n\r\n\t\t//4 byte align\r\n\t\tvar len = (source.length+3)&0xfffffffc;\r\n\t\tif(len==source.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\t////alert(\"source.length=\"+source.length+\",len=\"+len);\r\n\t\t\r\n\t\tthis._cmdBuffer.writeUint16(len);\t\r\n\t\tthis._cmdBuffer.writeString(source,len);\r\n\t\t//alert(\"shaderSource:len=\"+len+\",src=\"+source);\r\n\t\t//alert(\"<OUT>  shaderSource\");\r\n\t}\r\n\t\r\n\twebgl.compileShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  compileShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_compileShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  compileShader\");\r\n\t}\r\n\t\r\n\twebgl.getShaderParameter = function(shader, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getShaderParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getShaderParameter);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\t\r\n\t\t//alert(\"<OUT>  getShaderParameter\");\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\twebgl.createProgram = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createProgram\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createProgram);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createProgram\");\r\n\t\treturn fadeID;\t\r\n\t}\r\n\r\n\twebgl.attachShader = function(program, shader)\r\n\t{\r\n\t\t//alert(\"<IN>  attachShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_attachShader);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  attachShader\");\t\t\r\n\t}\r\n\t\r\n\twebgl.linkProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  linkProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_linkProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  linkProgram\");\r\n\t}\r\n\t\r\n\twebgl.getProgramParameter = function(program, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getProgramParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getProgramParameter);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\t//alert(\"<OUT>  getProgramParameter\");\r\n\t\treturn true;\t\t\r\n\t}\r\n\t\r\n\twebgl.useProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  useProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_useProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  useProgram\");\t\t\r\n\t}\r\n\t\r\n\twebgl.getUniformLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getUniformLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getUniformLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getUniformLocation\");\r\n\t\treturn fadeLoc;\r\n\t}\r\n\r\n\twebgl.getAttribLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getAttribLocation\");\r\n\t\t////alert(\"getAttribLocation: fadeLoc=\"+fadeLoc+\",name=\"+name);\t\t\r\n\t\treturn fadeLoc;\r\n\t}\r\n\t\r\n\twebgl.disable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  disable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\r\n\t\t//alert(\"<OUT>  disable\");\r\n\t}\r\n\t\r\n\twebgl.enable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  enable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\t\r\n\t\t//alert(\"<OUT>  enable\");\t\t\r\n\t}\r\n\t\r\n\twebgl.colorMask = function(red, green,  blue, alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  colorMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_colorMask);\r\n\t\tthis._cmdBuffer.writeBoolean(red);\r\n\t\tthis._cmdBuffer.writeBoolean(green);\t\r\n\t\tthis._cmdBuffer.writeBoolean(blue);\t\r\n\t\tthis._cmdBuffer.writeBoolean(alpha);\r\n\t\t//alert(\"<OUT>  colorMask\");\r\n\t}\r\n\r\n\twebgl.viewport = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  viewport\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_viewport);\r\n\t\tthis._cmdBuffer.writeUint16(x);\t\r\n\t\tthis._cmdBuffer.writeUint16(y);\t\r\n\t\tthis._cmdBuffer.writeUint16(width);\t\r\n\t\tthis._cmdBuffer.writeUint16(height);\t\r\n\t\t//alert(\"<OUT>  viewport\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clear = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  clear\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clear);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  clear\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clearColor = function(red, green, blue,  alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  clearColor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clearColor);\r\n\t\tthis._cmdBuffer.writeFloat(red);\r\n\t\tthis._cmdBuffer.writeFloat(green);\r\n\t\tthis._cmdBuffer.writeFloat(blue);\r\n\t\tthis._cmdBuffer.writeFloat(alpha);\r\n\t\t//alert(\"<OUT>  clearColor\");\r\n\t}\r\n\t\r\n\twebgl.createTexture = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createTexture\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createTexture);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createTexture\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.bindTexture = function(target, texture)\r\n\t{\r\n\t\t//alert(\"<IN>  bindTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindTexture);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  bindTexture\");\r\n\t}\r\n\t\r\n\twebgl.pixelStorei = function(pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  pixelStorei\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_pixelStorei);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  pixelStorei\");\r\n\t}\r\n\t\r\n\twebgl.texImage2D = function(target, level, internalformat, width, height, border, format, type, pixels)\r\n\t{\r\n\t\t//alert(\"<IN>  texImage2D\");\r\n\t\tif(arguments.length==9)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_09);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//width\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//height\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//border\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[6]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[7]);\t//type\r\n\t\t\tif(arguments[8])\r\n\t\t\t{\r\n\t\t\t    //if( )\r\n\t\t\t    alert('判断 canvas');\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[8].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse if(arguments.length==6)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_06);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[4]);\t//type\r\n\t\t\tif(arguments[5])\r\n\t\t\t{\r\n\t\t\t    if (arguments[5].isCanvas && arguments[5].isCanvas()) {\r\n\t\t\t        this._RTObjBuffer.push(arguments[5].conchThisID);\r\n\t\t\t    }\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[5].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t}\r\n\t\t//alert(\"<OUT>  texImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texSubImage2D = function(target, level, xoffset, yoffset,  format, type, source)\r\n\t{\r\n\t\t//alert(\"<IN>  texSubImage2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texSubImage2D);\r\n\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//xoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//yoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//format\r\n\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//type\r\n\t\tif(arguments[6])\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[6].conchThisID);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t}\t\r\n\t\t//alert(\"<OUT>  texSubImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texParameterf = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameterf\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameterf);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeFloat(param);\t\t\r\n\t\t//alert(\"<OUT>  texParameterf\");\r\n\t}\r\n\t\r\n\twebgl.texParameteri = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameteri\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameteri);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  texParameteri\");\r\n\t}\r\n\t\r\n\twebgl.activeTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  activeTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_activeTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  activeTexture\");\r\n\t}\r\n\t\r\n\twebgl.getShaderInfoLog = function(shader)\r\n\t{\r\n\t\treturn \"unknown log\";\r\n\t}\r\n\r\n\twebgl.uniform1f = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\r\n\t\t//alert(\"<OUT>  uniform1f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform1i = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\r\n\t\t//alert(\"<OUT>  uniform1i\");\r\n\t}\r\n\t\r\n\twebgl.uniform2f = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\t//alert(\"<OUT>  uniform2f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform2i = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\t//alert(\"<OUT>  uniform2i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3f = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\t//alert(\"<OUT>  uniform3f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3i = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\t//alert(\"<OUT>  uniform3i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform4f = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\tthis._cmdBuffer.writeFloat(w);\r\n\t\t//alert(\"<OUT>  uniform4f\");\r\n\t}\r\n\t\t\t\t\t\r\n\twebgl.uniform4i = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\tthis._cmdBuffer.writeUint32(w);\t\r\n\t\t//alert(\"<OUT>  uniform4i\");\r\n\t}\r\n\t\r\n\twebgl.uniform1iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1iv\");\r\n\t\tthis.uniform1i(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1iv\");\r\n\t}\r\n\twebgl.uniform1fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1fv\");\r\n\t\tthis.uniform1f(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1fv\");\r\n\t}\r\n\twebgl.uniform2iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2iv\");\r\n\t\tthis.uniform2i(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2iv\");\r\n\t}\r\n\twebgl.uniform2fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2fv\");\r\n\t\tthis.uniform2f(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2fv\");\r\n\t}\r\n\twebgl.uniform3iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3iv\");\r\n\t\tthis.uniform3i(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3iv\");\r\n\t}\r\n\twebgl.uniform3fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3fv\");\r\n\t\tthis.uniform3f(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3fv\");\r\n\t}\r\n\twebgl.uniform4iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4iv\");\r\n\t\tthis.uniform4i(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4iv\");\r\n\t}\r\n\twebgl.uniform4fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4fv\");\r\n\t\tthis.uniform4f(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4fv\");\r\n\t}\t\r\n\t\r\n\t\r\n\twebgl._uniformMatrixfv_x = function(cmd,location, transpose, values,number)\r\n\t{\r\n\t\tthis._cmdBuffer.writeUint32(cmd);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(transpose);\t\r\n\r\n\t\tvar length = values.byteLength;\r\n\t\tif ((length % 4) != 0) {\r\n\t\t    alert(\"_uniformMatrixfv_x- len is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);  //byte length\r\n\t\tthis._cmdBuffer.writeArrayBuffer(values.buffer, 0, length);\r\n\t}\r\n\r\n\twebgl.uniformMatrix2fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix2fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix2fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix2fv\");\r\n\t}\r\n\r\n\twebgl.uniformMatrix3fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix3fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix3fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix3fv\");\r\n\t}\r\n\t\r\n\twebgl.uniformMatrix4fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix4fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix4fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix4fv\");\r\n\t}\r\n\t\r\n\twebgl.vertexAttribPointer = function(index, size, type, normalized, stride, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  vertexAttribPointer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_vertexAttribPointer);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\tthis._cmdBuffer.writeUint32(size);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(normalized);\r\n\t\tthis._cmdBuffer.writeUint32(stride);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  vertexAttribPointer\");\r\n\t}\r\n\r\n\twebgl.enableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  enableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  enableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.blendFunc = function(sfactor, dfactor)\r\n\t{\r\n\t\t//alert(\"<IN>  blendFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_blendFunc);\r\n\t\tthis._cmdBuffer.writeUint16(sfactor);\r\n\t\tthis._cmdBuffer.writeUint16(dfactor);\r\n\t\t//alert(\"<OUT>  blendFunc\");\r\n\t}\r\n\t\r\n\twebgl.bufferSubData = function(target, offset, data)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferSubData\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bufferSubData);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t\r\n\t\tvar length = data.byteLength;\r\n\t\tif ((length % 4) != 0)\r\n\t\t{\r\n\t\t    alert(\"bufferSubData- length is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);\r\n\t\tthis._cmdBuffer.writeArrayBuffer(data.buffer, 0, length);\r\n\r\n\t\t//alert(\"<OUT>  bufferSubData\");\r\n\t}\r\n\t\r\n\twebgl.drawElements = function(mode, count, type, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  drawElements\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawElements);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  drawElements\");\r\n\t}\r\n\t\r\n\twebgl.deleteTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\r\n\t\tthis._recycle_ids.push(texture);\r\n\t\t//alert(\"<OUT>  deleteTexture\");\r\n\t}\r\n\r\n\twebgl.drawArrays = function(mode, first,  count)\r\n\t{\r\n\t\t//alert(\"<IN>  drawArrays\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawArrays);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(first);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\t//alert(\"<OUT>  drawArrays\");\r\n\t}\r\n\t\r\n\twebgl.bindAttribLocation = function(program, index, name)\r\n\t{\r\n\t\t//alert(\"<IN>  bindAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t\r\n\t\t//4 byte align\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  bindAttribLocation\");\r\n\t}\r\n\t\r\n\twebgl.cullFace = function(mode)\r\n\t{\r\n\t\t//alert(\"<IN>  cullFace\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_cullFace);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\t//alert(\"<OUT>  cullFace\");\r\n\t}\r\n\t\r\n\twebgl.createFramebuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createFramebuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t    //alert(\"<OUT>  createFramebuffer\");\t\t\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.getParameter = function(pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getParameter);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tvar fadeValue=0;\r\n\t\tif(pname==this.FRAMEBUFFER_BINDING)\r\n\t\t{\r\n\t\t\tvar fadeValue = this._idGenerator.createFadeID();\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(fadeValue);\r\n\t\t//alert(\"<OUT>  getParameter\");\r\n\t\treturn fadeValue;\r\n\t}\r\n\t\r\n\twebgl.bindFramebuffer = function(target, framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\t\t//alert(\"<OUT>  bindFramebuffer\");\r\n\t}\r\n\r\n\twebgl.depthFunc = function(func)\r\n\t{\r\n\t\t//alert(\"<IN>  depthFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\r\n\t\t//alert(\"<OUT>  depthFunc\");\r\n\t}\r\n\t\r\n\twebgl.depthMask = function(flag)\r\n\t{\r\n\t\t//alert(\"<IN>  depthMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthMask);\r\n\t\tthis._cmdBuffer.writeUint32(flag);\t\r\n\t\t//alert(\"<OUT>  depthMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.depthRange = function(zNear, zFar)\r\n\t{\r\n\t\t//alert(\"<IN>  depthRange\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthRange);\r\n\t\tthis._cmdBuffer.writeFloat(zNear);\t\r\n\t\tthis._cmdBuffer.writeFloat(zFar);\t\r\n\t\t//alert(\"<OUT>  depthRange\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilFunc = function(func, ref,  mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\t\r\n\t\tthis._cmdBuffer.writeUint32(ref);\t\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilFunc\");\r\n\t}\r\n\t\r\n\twebgl.stencilMask = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilMask);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilOp = function(fail, zfail, zpass)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilOp\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilOp);\r\n\t\tthis._cmdBuffer.writeUint32(fail);\r\n\t\tthis._cmdBuffer.writeUint32(zfail);\r\n\t\tthis._cmdBuffer.writeUint32(zpass);\r\n\t\t//alert(\"<OUT>  stencilOp\");\r\n\t}\r\n\t\r\n\twebgl.deleteBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\r\n\t\tthis._recycle_ids.push(buffer);\r\n\t\t//alert(\"<OUT>  deleteBuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteFramebuffer = function(framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\r\n\t\tthis._recycle_ids.push(framebuffer);\r\n\t\t//alert(\"<OUT>  deleteFramebuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\r\n\t\tthis._recycle_ids.push(program);\r\n\t\t//alert(\"<OUT>  deleteProgram\");\r\n\t}\r\n\t\r\n\twebgl.deleteRenderbuffer = function(renderbuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteRenderbuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteRenderbuffer);\r\n\t\tthis._cmdBuffer.writeUint32(renderbuffer);\r\n\r\n\t\tthis._recycle_ids.push(renderbuffer);\r\n\t\t//alert(\"<OUT>  deleteRenderbuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\r\n\t\tthis._recycle_ids.push(shader);\r\n\t\t//alert(\"<OUT>  deleteShader\");\r\n\t}\r\n\t\r\n\twebgl.isBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  isBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_isBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\t\t//alert(\"<OUT>  isBuffer\");\r\n\t\treturn true;\r\n\t}\r\n\r\n\twebgl.disableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  disableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  disableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.scissor = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  scissor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_scissor);\r\n\t\tthis._cmdBuffer.writeUint32(x);\r\n\t\tthis._cmdBuffer.writeUint32(y);\r\n\t\tthis._cmdBuffer.writeUint32(width);\t\r\n\t\tthis._cmdBuffer.writeUint32(height);\t\r\n\t\t//alert(\"<OUT>  scissor\");\t\t\r\n\t}\r\n\t\r\n\twebgl.generateMipmap = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  generateMipmap\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_generateMipmap);\r\n\t\tthis._cmdBuffer.writeUint32(target);\t\t\r\n\t\t//alert(\"<OUT>  generateMipmap\");\r\n\t}\r\n\t\r\n\twebgl.framebufferTexture2D = function(target,  attachment, textarget, texture, level)\r\n\t{\r\n\t\t//alert(\"<IN>  framebufferTexture2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_framebufferTexture2D);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(attachment);\r\n\t\tthis._cmdBuffer.writeUint32(textarget);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\tthis._cmdBuffer.writeUint32(level);\r\n\t\t//alert(\"<OUT>  framebufferTexture2D\");\r\n\t}\r\n\t\r\n\twebgl.checkFramebufferStatus = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  checkFramebufferStatus\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_checkFramebufferStatus);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tif(target== this.FRAMEBUFFER)\r\n        {\r\n\t\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n            return this.FRAMEBUFFER_COMPLETE;\r\n        }\r\n\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n\t\treturn 0;\r\n\t}\r\n\r\n    //=======================扩展=======================\r\n    webgl._createMeshRT= function(){\r\n        return new gl_mesh();\r\n    }\r\n    \r\n    webgl._bindShaderFetchRT = function(vertexdesc,program,rundataDescs){\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__bindShaderFetchRT);\r\n\t\tbuff.writeUint32(fadeID); \r\n        buff.writeUint32(program);\r\n        var vdescbuf = vertexdesc.toAB();\r\n        buff.writeUint32(vdescbuf.byteLength);\r\n        buff.writeArrayBuffer(vdescbuf,0,vdescbuf.byteLength);\r\n        buff.writeUint32(rundataDescs.length);\r\n        for( var i=0; i<rundataDescs.length; i++){\r\n            var tmpab = rundataDescs[i].toAB()\r\n            buff.writeUint32(tmpab.byteLength);\r\n            buff.writeArrayBuffer(tmpab,0,tmpab.byteLength);\r\n        }\r\n        //var strVertDesc = vetexdesc.toString();\r\n        //var strRundataDesc = rundataDescs.join(';');\r\n        //var bindret = glBindShaderFetch(strVertDesc, program, strRundataDesc);\r\n        return fadeID;\r\n    }\r\n    \r\n    webgl._renderMeshRT = function(groupData, rundata){\r\n    }\r\n    \r\n    /**\r\n     * \r\n     */\r\n    webgl._renderMesh1RT = function(mesh, begin, end, gpuProgram, shaderInfo, tex, cubetex, rundata){\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__renderMesh1RT);\r\n        var meshid = mesh.getMeshID();\r\n\t\tbuff.writeUint32(meshid);\r\n\t\tbuff.writeUint32(begin);\r\n\t\tbuff.writeUint32(end);\r\n\t\tbuff.writeUint32(gpuProgram);\r\n\t\tbuff.writeUint32(shaderInfo);\r\n        \r\n\t\tif( tex && tex.length )\r\n\t\t\tbuff.writeUint32(tex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUint32(0);\r\n\t\tif( cubetex && cubetex.length )\r\n\t\t\tbuff.writeUint32(cubetex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUnit32(0);\r\n\t\tbuff.writeUint32(rundata.length);\r\n\t\t\r\n\t\tfor(var i=0; i<tex.length; i++){\r\n\t\t\tbuff.writeUint32(tex[i]);\r\n\t\t}\r\n\t\tfor(var i=0; i<cubetex.length; i++){\r\n\t\t\tbuff.writeUint32(cubetex[i]);\r\n\t\t}\r\n\r\n\t\tfor( var i=0; i<rundata.length; i++){\r\n\t\t\tbuff.writeUint32(rundata[i].byteLength);\r\n\t\t\tbuff.writeArrayBuffer(rundata[i],0,rundata[i].byteLength);\r\n\t\t}\r\n    }\r\n    //======================扩展结束======================\r\n\r\n\twebgl._setupConst = function ()\r\n\t{\r\n\t\tthis.DEPTH_BUFFER_BIT               = 0x00000100;\r\n\t\tthis.STENCIL_BUFFER_BIT             = 0x00000400;\r\n\t\tthis.COLOR_BUFFER_BIT               = 0x00004000;\r\n\t\t\r\n\t\t/* BeginMode */\r\n\t\tthis.POINTS                         = 0x0000;\r\n\t\tthis.LINES                          = 0x0001;\r\n\t\tthis.LINE_LOOP                      = 0x0002;\r\n\t\tthis.LINE_STRIP                     = 0x0003;\r\n\t\tthis.TRIANGLES                      = 0x0004;\r\n\t\tthis.TRIANGLE_STRIP                 = 0x0005;\r\n\t\tthis.TRIANGLE_FAN                   = 0x0006;\r\n\t\t\r\n\t\t/* AlphaFunction (not supported in ES20) */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\t\t\r\n\t\t/* BlendingFactorDest */\r\n\t\tthis.ZERO                           = 0;\r\n\t\tthis.ONE                            = 1;\r\n\t\tthis.SRC_COLOR                      = 0x0300;\r\n\t\tthis.ONE_MINUS_SRC_COLOR            = 0x0301;\r\n\t\tthis.SRC_ALPHA                      = 0x0302;\r\n\t\tthis.ONE_MINUS_SRC_ALPHA            = 0x0303;\r\n\t\tthis.DST_ALPHA                      = 0x0304;\r\n\t\tthis.ONE_MINUS_DST_ALPHA            = 0x0305;\r\n\t\t\r\n\t\t/* BlendingFactorSrc */\r\n\t\t/*      ZERO */\r\n\t\t/*      ONE */\r\n\t\tthis.DST_COLOR                      = 0x0306;\r\n\t\tthis.ONE_MINUS_DST_COLOR            = 0x0307;\r\n\t\tthis.SRC_ALPHA_SATURATE             = 0x0308;\r\n\t\t/*      SRC_ALPHA */\r\n\t\t/*      ONE_MINUS_SRC_ALPHA */\r\n\t\t/*      DST_ALPHA */\r\n\t\t/*      ONE_MINUS_DST_ALPHA */\r\n\r\n\t\t/* BlendEquationSeparate */\r\n\t\tthis.FUNC_ADD                       = 0x8006;\r\n\t\tthis.BLEND_EQUATION                 = 0x8009;\r\n\t\tthis.BLEND_EQUATION_RGB             = 0x8009;   /* same as BLEND_EQUATION */\r\n\t\tthis.BLEND_EQUATION_ALPHA           = 0x883D;\r\n\t\t\r\n\t\t/* BlendSubtract */\r\n\t\tthis.FUNC_SUBTRACT                  = 0x800A;\r\n\t\tthis.FUNC_REVERSE_SUBTRACT          = 0x800B;\r\n\r\n\t\t/* Separate Blend Functions */\r\n\t\tthis.BLEND_DST_RGB                  = 0x80C8;\r\n\t\tthis.BLEND_SRC_RGB                  = 0x80C9;\r\n\t\tthis.BLEND_DST_ALPHA                = 0x80CA;\r\n\t\tthis.BLEND_SRC_ALPHA                = 0x80CB;\r\n\t\tthis.CONSTANT_COLOR                 = 0x8001;\r\n\t\tthis.ONE_MINUS_CONSTANT_COLOR       = 0x8002;\r\n\t\tthis.CONSTANT_ALPHA                 = 0x8003;\r\n\t\tthis.ONE_MINUS_CONSTANT_ALPHA       = 0x8004;\r\n\t\tthis.BLEND_COLOR                    = 0x8005;\r\n\r\n\t\t/* Buffer Objects */\r\n\t\tthis.ARRAY_BUFFER                   = 0x8892;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER           = 0x8893;\r\n\t\tthis.ARRAY_BUFFER_BINDING           = 0x8894;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER_BINDING   = 0x8895;\r\n\r\n\t\tthis.STREAM_DRAW                    = 0x88E0;\r\n\t\tthis.STATIC_DRAW                    = 0x88E4;\r\n\t\tthis.DYNAMIC_DRAW                   = 0x88E8;\r\n\r\n\t\tthis.BUFFER_SIZE                    = 0x8764;\r\n\t\tthis.BUFFER_USAGE                   = 0x8765;\r\n\r\n\t\tthis.CURRENT_VERTEX_ATTRIB          = 0x8626;\r\n\r\n\t\t/* CullFaceMode */\r\n\t\tthis.FRONT                          = 0x0404;\r\n\t\tthis.BACK                           = 0x0405;\r\n\t\tthis.FRONT_AND_BACK                 = 0x0408;\r\n\r\n\t\t/* DepthFunction */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\r\n\t\t/* EnableCap */\r\n\t\t/* TEXTURE_2D */\r\n\t\tthis.CULL_FACE                      = 0x0B44;\r\n\t\tthis.BLEND                          = 0x0BE2;\r\n\t\tthis.DITHER                         = 0x0BD0;\r\n\t\tthis.STENCIL_TEST                   = 0x0B90;\r\n\t\tthis.DEPTH_TEST                     = 0x0B71;\r\n\t\tthis.SCISSOR_TEST                   = 0x0C11;\r\n\t\tthis.POLYGON_OFFSET_FILL            = 0x8037;\r\n\t\tthis.SAMPLE_ALPHA_TO_COVERAGE       = 0x809E;\r\n\t\tthis.SAMPLE_COVERAGE                = 0x80A0;\r\n\r\n\t\t/* ErrorCode */\r\n\t\t//this.NO_ERROR                       = 0;\r\n\t\tthis.INVALID_ENUM                   = 0x0500;\r\n\t\tthis.INVALID_VALUE                  = 0x0501;\r\n\t\tthis.INVALID_OPERATION              = 0x0502;\r\n\t\tthis.OUT_OF_MEMORY                  = 0x0505;\r\n\r\n\t\t/* FrontFaceDirection */\r\n\t\tthis.CW                             = 0x0900;\r\n\t\tthis.CCW                            = 0x0901;\r\n\r\n\t\t/* GetPName */\r\n\t\tthis.LINE_WIDTH                     = 0x0B21;\r\n\t\tthis.ALIASED_POINT_SIZE_RANGE       = 0x846D;\r\n\t\tthis.ALIASED_LINE_WIDTH_RANGE       = 0x846E;\r\n\t\tthis.CULL_FACE_MODE                 = 0x0B45;\r\n\t\tthis.FRONT_FACE                     = 0x0B46;\r\n\t\tthis.DEPTH_RANGE                    = 0x0B70;\r\n\t\tthis.DEPTH_WRITEMASK                = 0x0B72;\r\n\t\tthis.DEPTH_CLEAR_VALUE              = 0x0B73;\r\n\t\tthis.DEPTH_FUNC                     = 0x0B74;\r\n\t\tthis.STENCIL_CLEAR_VALUE            = 0x0B91;\r\n\t\tthis.STENCIL_FUNC                   = 0x0B92;\r\n\t\tthis.STENCIL_FAIL                   = 0x0B94;\r\n\t\tthis.STENCIL_PASS_DEPTH_FAIL        = 0x0B95;\r\n\t\tthis.STENCIL_PASS_DEPTH_PASS        = 0x0B96;\r\n\t\tthis.STENCIL_REF                    = 0x0B97;\r\n\t\tthis.STENCIL_VALUE_MASK             = 0x0B93;\r\n\t\tthis.STENCIL_WRITEMASK              = 0x0B98;\r\n\t\tthis.STENCIL_BACK_FUNC              = 0x8800;\r\n\t\tthis.STENCIL_BACK_FAIL              = 0x8801;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_FAIL   = 0x8802;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_PASS   = 0x8803;\r\n\t\tthis.STENCIL_BACK_REF               = 0x8CA3;\r\n\t\tthis.STENCIL_BACK_VALUE_MASK        = 0x8CA4;\r\n\t\tthis.STENCIL_BACK_WRITEMASK         = 0x8CA5;\r\n\t\tthis.VIEWPORT                       = 0x0BA2;\r\n\t\tthis.SCISSOR_BOX                    = 0x0C10;\r\n\t\t/*      SCISSOR_TEST */\r\n\t\tthis.COLOR_CLEAR_VALUE              = 0x0C22;\r\n\t\tthis.COLOR_WRITEMASK                = 0x0C23;\r\n\t\tthis.UNPACK_ALIGNMENT               = 0x0CF5;\r\n\t\tthis.PACK_ALIGNMENT                 = 0x0D05;\r\n\t\tthis.MAX_TEXTURE_SIZE               = 0x0D33;\r\n\t\tthis.MAX_VIEWPORT_DIMS              = 0x0D3A;\r\n\t\tthis.SUBPIXEL_BITS                  = 0x0D50;\r\n\t\tthis.RED_BITS                       = 0x0D52;\r\n\t\tthis.GREEN_BITS                     = 0x0D53;\r\n\t\tthis.BLUE_BITS                      = 0x0D54;\r\n\t\tthis.ALPHA_BITS                     = 0x0D55;\r\n\t\tthis.DEPTH_BITS                     = 0x0D56;\r\n\t\tthis.STENCIL_BITS                   = 0x0D57;\r\n\t\tthis.POLYGON_OFFSET_UNITS           = 0x2A00;\r\n\t\t/*      POLYGON_OFFSET_FILL */\r\n\t\tthis.POLYGON_OFFSET_FACTOR          = 0x8038;\r\n\t\tthis.TEXTURE_BINDING_2D             = 0x8069;\r\n\t\tthis.SAMPLE_BUFFERS                 = 0x80A8;\r\n\t\tthis.SAMPLES                        = 0x80A9;\r\n\t\tthis.SAMPLE_COVERAGE_VALUE          = 0x80AA;\r\n\t\tthis.SAMPLE_COVERAGE_INVERT         = 0x80AB;\r\n\r\n\t\t/* GetTextureParameter */\r\n\t\t/*      TEXTURE_MAG_FILTER */\r\n\t\t/*      TEXTURE_MIN_FILTER */\r\n\t\t/*      TEXTURE_WRAP_S */\r\n\t\t/*      TEXTURE_WRAP_T */\r\n\r\n\t\tthis.COMPRESSED_TEXTURE_FORMATS     = 0x86A3;\r\n\r\n\t\t/* HintMode */\r\n\t\tthis.DONT_CARE                      = 0x1100;\r\n\t\tthis.FASTEST                        = 0x1101;\r\n\t\tthis.NICEST                         = 0x1102;\r\n\r\n\t\t/* HintTarget */\r\n\t\tthis.GENERATE_MIPMAP_HINT            = 0x8192;\r\n\r\n\t\t/* DataType */\r\n\t\tthis.BYTE                           = 0x1400;\r\n\t\tthis.UNSIGNED_BYTE                  = 0x1401;\r\n\t\tthis.SHORT                          = 0x1402;\r\n\t\tthis.UNSIGNED_SHORT                 = 0x1403;\r\n\t\tthis.INT                            = 0x1404;\r\n\t\tthis.UNSIGNED_INT                   = 0x1405;\r\n\t\tthis.FLOAT                          = 0x1406;\r\n\r\n\t\t/* PixelFormat */\r\n\t\tthis.DEPTH_COMPONENT                = 0x1902;\r\n\t\tthis.ALPHA                          = 0x1906;\r\n\t\tthis.RGB                            = 0x1907;\r\n\t\tthis.RGBA                           = 0x1908;\r\n\t\tthis.LUMINANCE                      = 0x1909;\r\n\t\tthis.LUMINANCE_ALPHA                = 0x190A;\r\n\r\n\t\t/* PixelType */\r\n\t\t/*      UNSIGNED_BYTE */\r\n\t\tthis.UNSIGNED_SHORT_4_4_4_4         = 0x8033;\r\n\t\tthis.UNSIGNED_SHORT_5_5_5_1         = 0x8034;\r\n\t\tthis.UNSIGNED_SHORT_5_6_5           = 0x8363;\r\n\r\n\t\t/* Shaders */\r\n\t\tthis.FRAGMENT_SHADER                  = 0x8B30;\r\n\t\tthis.VERTEX_SHADER                    = 0x8B31;\r\n\t\tthis.MAX_VERTEX_ATTRIBS               = 0x8869;\r\n\t\tthis.MAX_VERTEX_UNIFORM_VECTORS       = 0x8DFB;\r\n\t\tthis.MAX_VARYING_VECTORS              = 0x8DFC;\r\n\t\tthis.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D;\r\n\t\tthis.MAX_VERTEX_TEXTURE_IMAGE_UNITS   = 0x8B4C;\r\n\t\tthis.MAX_TEXTURE_IMAGE_UNITS          = 0x8872;\r\n\t\tthis.MAX_FRAGMENT_UNIFORM_VECTORS     = 0x8DFD;\r\n\t\tthis.SHADER_TYPE                      = 0x8B4F;\r\n\t\tthis.DELETE_STATUS                    = 0x8B80;\r\n\t\tthis.LINK_STATUS                      = 0x8B82;\r\n\t\tthis.VALIDATE_STATUS                  = 0x8B83;\r\n\t\tthis.ATTACHED_SHADERS                 = 0x8B85;\r\n\t\tthis.ACTIVE_UNIFORMS                  = 0x8B86;\r\n\t\tthis.ACTIVE_ATTRIBUTES                = 0x8B89;\r\n\t\tthis.SHADING_LANGUAGE_VERSION         = 0x8B8C;\r\n\t\tthis.CURRENT_PROGRAM                  = 0x8B8D;\r\n\r\n\t\t/* StencilFunction */\r\n\t\tthis.NEVER                          = 0x0200;\r\n\t\tthis.LESS                           = 0x0201;\r\n\t\tthis.EQUAL                          = 0x0202;\r\n\t\tthis.LEQUAL                         = 0x0203;\r\n\t\tthis.GREATER                        = 0x0204;\r\n\t\tthis.NOTEQUAL                       = 0x0205;\r\n\t\tthis.GEQUAL                         = 0x0206;\r\n\t\tthis.ALWAYS                         = 0x0207;\r\n\r\n\t\t/* StencilOp */\r\n\t\t/*      ZERO */\r\n\t\tthis.KEEP                           = 0x1E00;\r\n\t\tthis.REPLACE                        = 0x1E01;\r\n\t\tthis.INCR                           = 0x1E02;\r\n\t\tthis.DECR                           = 0x1E03;\r\n\t\tthis.INVERT                         = 0x150A;\r\n\t\tthis.INCR_WRAP                      = 0x8507;\r\n\t\tthis.DECR_WRAP                      = 0x8508;\r\n\r\n\t\t/* StringName */\r\n\t\tthis.VENDOR                         = 0x1F00;\r\n\t\tthis.RENDERER                       = 0x1F01;\r\n\t\tthis.VERSION                        = 0x1F02;\r\n\r\n\t\t/* TextureMagFilter */\r\n\t\tthis.NEAREST                        = 0x2600;\r\n\t\tthis.LINEAR                         = 0x2601;\r\n\r\n\t\t/* TextureMinFilter */\r\n\t\t/*      NEAREST */\r\n\t\t/*      LINEAR */\r\n\t\tthis.NEAREST_MIPMAP_NEAREST         = 0x2700;\r\n\t\tthis.LINEAR_MIPMAP_NEAREST          = 0x2701;\r\n\t\tthis.NEAREST_MIPMAP_LINEAR          = 0x2702;\r\n\t\tthis.LINEAR_MIPMAP_LINEAR           = 0x2703;\r\n\r\n\t\t/* TextureParameterName */\r\n\t\tthis.TEXTURE_MAG_FILTER             = 0x2800;\r\n\t\tthis.TEXTURE_MIN_FILTER             = 0x2801;\r\n\t\tthis.TEXTURE_WRAP_S                 = 0x2802;\r\n\t\tthis.TEXTURE_WRAP_T                 = 0x2803;\r\n\r\n\t\t/* TextureTarget */\r\n\t\tthis.TEXTURE_2D                     = 0x0DE1;\r\n\t\tthis.TEXTURE                        = 0x1702;\r\n\r\n\t\tthis.TEXTURE_CUBE_MAP               = 0x8513;\r\n\t\tthis.TEXTURE_BINDING_CUBE_MAP       = 0x8514;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_X    = 0x8515;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_X    = 0x8516;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Y    = 0x8517;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Y    = 0x8518;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Z    = 0x8519;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Z    = 0x851A;\r\n\t\tthis.MAX_CUBE_MAP_TEXTURE_SIZE      = 0x851C;\r\n\r\n\t\t/* TextureUnit */\r\n\t\tthis.TEXTURE0                       = 0x84C0;\r\n\t\tthis.TEXTURE1                       = 0x84C1;\r\n\t\tthis.TEXTURE2                       = 0x84C2;\r\n\t\tthis.TEXTURE3                       = 0x84C3;\r\n\t\tthis.TEXTURE4                       = 0x84C4;\r\n\t\tthis.TEXTURE5                       = 0x84C5;\r\n\t\tthis.TEXTURE6                       = 0x84C6;\r\n\t\tthis.TEXTURE7                       = 0x84C7;\r\n\t\tthis.TEXTURE8                       = 0x84C8;\r\n\t\tthis.TEXTURE9                       = 0x84C9;\r\n\t\tthis.TEXTURE10                      = 0x84CA;\r\n\t\tthis.TEXTURE11                      = 0x84CB;\r\n\t\tthis.TEXTURE12                      = 0x84CC;\r\n\t\tthis.TEXTURE13                      = 0x84CD;\r\n\t\tthis.TEXTURE14                      = 0x84CE;\r\n\t\tthis.TEXTURE15                      = 0x84CF;\r\n\t\tthis.TEXTURE16                      = 0x84D0;\r\n\t\tthis.TEXTURE17                      = 0x84D1;\r\n\t\tthis.TEXTURE18                      = 0x84D2;\r\n\t\tthis.TEXTURE19                      = 0x84D3;\r\n\t\tthis.TEXTURE20                      = 0x84D4;\r\n\t\tthis.TEXTURE21                      = 0x84D5;\r\n\t\tthis.TEXTURE22                      = 0x84D6;\r\n\t\tthis.TEXTURE23                      = 0x84D7;\r\n\t\tthis.TEXTURE24                      = 0x84D8;\r\n\t\tthis.TEXTURE25                      = 0x84D9;\r\n\t\tthis.TEXTURE26                      = 0x84DA;\r\n\t\tthis.TEXTURE27                      = 0x84DB;\r\n\t\tthis.TEXTURE28                      = 0x84DC;\r\n\t\tthis.TEXTURE29                      = 0x84DD;\r\n\t\tthis.TEXTURE30                      = 0x84DE;\r\n\t\tthis.TEXTURE31                      = 0x84DF;\r\n\t\tthis.ACTIVE_TEXTURE                 = 0x84E0;\r\n\r\n\t\t/* TextureWrapMode */\r\n\t\tthis.REPEAT                         = 0x2901;\r\n\t\tthis.CLAMP_TO_EDGE                  = 0x812F;\r\n\t\tthis.MIRRORED_REPEAT                = 0x8370;\r\n\r\n\t\t/* Uniform Types */\r\n\t\tthis.FLOAT_VEC2                     = 0x8B50;\r\n\t\tthis.FLOAT_VEC3                     = 0x8B51;\r\n\t\tthis.FLOAT_VEC4                     = 0x8B52;\r\n\t\tthis.INT_VEC2                       = 0x8B53;\r\n\t\tthis.INT_VEC3                       = 0x8B54;\r\n\t\tthis.INT_VEC4                       = 0x8B55;\r\n\t\tthis.BOOL                           = 0x8B56;\r\n\t\tthis.BOOL_VEC2                      = 0x8B57;\r\n\t\tthis.BOOL_VEC3                      = 0x8B58;\r\n\t\tthis.BOOL_VEC4                      = 0x8B59;\r\n\t\tthis.FLOAT_MAT2                     = 0x8B5A;\r\n\t\tthis.FLOAT_MAT3                     = 0x8B5B;\r\n\t\tthis.FLOAT_MAT4                     = 0x8B5C;\r\n\t\tthis.SAMPLER_2D                     = 0x8B5E;\r\n\t\tthis.SAMPLER_CUBE                   = 0x8B60;\r\n\r\n\t\t/* Vertex Arrays */\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_ENABLED        = 0x8622;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_SIZE           = 0x8623;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_STRIDE         = 0x8624;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_TYPE           = 0x8625;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_NORMALIZED     = 0x886A;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_POINTER        = 0x8645;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889F;\r\n\r\n\t\t/* Read Format */\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_TYPE   = 0x8B9A;\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_FORMAT = 0x8B9B;\r\n\r\n\t\t/* Shader Source */\r\n\t\tthis.COMPILE_STATUS                 = 0x8B81;\r\n\r\n\t\t/* Shader Precision-Specified Types */\r\n\t\tthis.LOW_FLOAT                      = 0x8DF0;\r\n\t\tthis.MEDIUM_FLOAT                   = 0x8DF1;\r\n\t\tthis.HIGH_FLOAT                     = 0x8DF2;\r\n\t\tthis.LOW_INT                        = 0x8DF3;\r\n\t\tthis.MEDIUM_INT                     = 0x8DF4;\r\n\t\tthis.HIGH_INT                       = 0x8DF5;\r\n\r\n\t\t/* Framebuffer Object. */\r\n\t\tthis.FRAMEBUFFER                    = 0x8D40;\r\n\t\tthis.RENDERBUFFER                   = 0x8D41;\r\n\r\n\t\tthis.RGBA4                          = 0x8056;\r\n\t\tthis.RGB5_A1                        = 0x8057;\r\n\t\tthis.RGB565                         = 0x8D62;\r\n\t\tthis.DEPTH_COMPONENT16              = 0x81A5;\r\n\t\tthis.STENCIL_INDEX                  = 0x1901;\r\n\t\tthis.STENCIL_INDEX8                 = 0x8D48;\r\n\t\tthis.DEPTH_STENCIL                  = 0x84F9;\r\n\r\n\t\tthis.RENDERBUFFER_WIDTH             = 0x8D42;\r\n\t\tthis.RENDERBUFFER_HEIGHT            = 0x8D43;\r\n\t\tthis.RENDERBUFFER_INTERNAL_FORMAT   = 0x8D44;\r\n\t\tthis.RENDERBUFFER_RED_SIZE          = 0x8D50;\r\n\t\tthis.RENDERBUFFER_GREEN_SIZE        = 0x8D51;\r\n\t\tthis.RENDERBUFFER_BLUE_SIZE         = 0x8D52;\r\n\t\tthis.RENDERBUFFER_ALPHA_SIZE        = 0x8D53;\r\n\t\tthis.RENDERBUFFER_DEPTH_SIZE        = 0x8D54;\r\n\t\tthis.RENDERBUFFER_STENCIL_SIZE      = 0x8D55;\r\n\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           = 0x8CD0;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           = 0x8CD1;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         = 0x8CD2;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8CD3;\r\n\r\n\t\tthis.COLOR_ATTACHMENT0              = 0x8CE0;\r\n\t\tthis.DEPTH_ATTACHMENT               = 0x8D00;\r\n\t\tthis.STENCIL_ATTACHMENT             = 0x8D20;\r\n\t\tthis.DEPTH_STENCIL_ATTACHMENT       = 0x821A;\r\n\r\n\t\tthis.NONE                           = 0;\r\n\r\n\t\tthis.FRAMEBUFFER_COMPLETE                      = 0x8CD5;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_ATTACHMENT         = 0x8CD6;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_DIMENSIONS         = 0x8CD9;\r\n\t\tthis.FRAMEBUFFER_UNSUPPORTED                   = 0x8CDD;\r\n\r\n\t\tthis.FRAMEBUFFER_BINDING            = 0x8CA6;\r\n\t\tthis.RENDERBUFFER_BINDING           = 0x8CA7;\r\n\t\tthis.MAX_RENDERBUFFER_SIZE          = 0x84E8;\r\n\r\n\t\tthis.INVALID_FRAMEBUFFER_OPERATION  = 0x0506;\r\n\r\n\t\t/* WebGL-specific enums */\r\n\t\tthis.UNPACK_FLIP_Y_WEBGL            = 0x9240;\r\n\t\tthis.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;\r\n\t\tthis.CONTEXT_LOST_WEBGL             = 0x9242;\r\n\t\tthis.UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;\r\n\t\tthis.BROWSER_DEFAULT_WEBGL          = 0x9244;\t\r\n\t}\t\t\r\n\r\n\twebgl._setupRenderCmdID= function()\r\n\t{\r\n\t\tthis.FT_getExtension = 0;\r\n\t\tthis.FT_createBuffer = 1;\r\n\t\tthis.FT_bindBuffer = 2;\r\n\t\tthis.FT_bufferData_vector = 3;\r\n\t\tthis.FT_bufferData_size = 4;\r\n\t\tthis.FT_createShader = 5;\r\n\t\tthis.FT_shaderSource = 6;\r\n\t\tthis.FT_compileShader = 7;\r\n\t\tthis.FT_getShaderParameter = 8;\r\n\t\tthis.FT_createProgram = 9;\r\n\t\tthis.FT_attachShader = 10\r\n\t\tthis.FT_linkProgram = 11;\r\n\t\tthis.FT_getProgramParameter = 12;\r\n\t\tthis.FT_useProgram = 13;\r\n\t\tthis.FT_getUniformLocation = 14;\r\n\t\tthis.FT_getAttribLocation = 15;\r\n\t\tthis.FT_disable = 16;\r\n\t\tthis.FT_enable = 17;\r\n\t\tthis.FT_colorMask = 18;\r\n\t\tthis.FT_viewport = 19;\r\n\t\tthis.FT_clear = 20;\r\n\t\tthis.FT_clearColor = 21;\r\n\t\tthis.FT_createTexture = 22;\r\n\t\tthis.FT_bindTexture = 23;\r\n\t\tthis.FT_pixelStorei = 24;\r\n\t\tthis.FT_texImage2D_06 = 25;\r\n\t\tthis.FT_texImage2D_09 = 26;\r\n\t\tthis.FT_texSubImage2D = 27;\r\n\t\tthis.FT_texParameterf = 28;\r\n\t\tthis.FT_texParameteri = 29;\r\n\t\tthis.FT_activeTexture = 30;\r\n\t\tthis.FT_getShaderInfoLog = 31;\r\n\t\tthis.FT_uniform1f = 32;\r\n\t\tthis.FT_uniform1i = 33;\r\n\t\tthis.FT_uniform2f = 34;\r\n\t\tthis.FT_uniform2i = 35;\r\n\t\tthis.FT_uniform3f = 36;\r\n\t    this.FT_uniform3i = 37;\r\n        this.FT_uniform4f = 38;\r\n\t    this.FT_uniform4i = 39;\r\n\t    this.FT_uniformMatrix2fv = 40;\r\n\t    this.FT_uniformMatrix3fv = 41;\r\n\t    this.FT_uniformMatrix4fv = 42;\r\n\t    this.FT_vertexAttribPointer = 43;\r\n\t    this.FT_enableVertexAttribArray = 44;\r\n\t    this.FT_blendFunc = 45;\r\n\t    this.FT_bufferSubData = 46;\r\n\t    this.FT_drawElements = 47;\r\n\t    this.FT_deleteTexture = 48;\r\n        this.FT_drawArrays = 49;\r\n        this.FT_bindAttribLocation = 50;\r\n        this.FT_cullFace = 51;\r\n        this.FT_createFramebuffer = 52;\r\n        this.FT_getParameter = 53;\r\n        this.FT_bindFramebuffer = 54;\r\n        this.FT_depthFunc = 55;\r\n        this.FT_depthMask = 56;\r\n        this.FT_depthRange = 57;\r\n        this.FT_stencilFunc = 58;\r\n        this.FT_stencilMask = 59;\r\n        this.FT_stencilOp = 60;\r\n        this.FT_deleteBuffer = 61;\r\n        this.FT_deleteFramebuffer = 62;\r\n        this.FT_deleteProgram = 63;\r\n        this.FT_deleteRenderbuffer = 64;\r\n        this.FT_deleteShader = 65;\r\n        this.FT_isBuffer = 66;\r\n        this.FT_disableVertexAttribArray = 67;\r\n        this.FT_scissor = 68;\r\n        this.FT_generateMipmap = 69;\r\n        this.FT_framebufferTexture2D = 70;\r\n        this.FT_checkFramebufferStatus = 71;\r\n        this.FT__bindShaderFetchRT = 72;\r\n        this.FT__renderMesh1RT = 73;\r\n\t}\r\n\r\n\twebgl._setupConst();\r\n\twebgl._setupRenderCmdID();\r\n}","script":{"ref":3},"scriptId":32,"position":4914,"line":223,"column":26,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":277,"type":"object","className":"Arguments"}},{"name":"caller","value":{"ref":14,"type":"function","name":"webglInit","inferredName":"","scriptId":34}},{"name":"prototype","value":{"ref":276,"type":"object","className":"Object"}}],"text":"function (webgl)\r\n{\r\n\t//setup the internal properties\r\n\twebgl.BUFFER_SIZE = 20480;  //min 1024\r\n\twebgl.BUFFER_SIZE = webgl.BUFFER_SIZE<1024?1024:webgl.BUFFER_SIZE;\r\n\twebgl.width  = 0;\r\n\twebgl.height = 0;\t\r\n\twebgl._idGenerator = new IdGenerator();\r\n\twebgl._locTable = new ProgramLocationTable();\t\r\n\twebgl._cmdBuffer = new DataBuffer(webgl.BUFFER_SIZE, webgl.BUFFER_SIZE, true);\r\n\twebgl._RTObjBuffer = [];// new DataBuffer(32, 32, true);\r\n\twebgl._RTObjAB = new Uint32Array(64);   //这个是为了提高效率。\r\n\twebgl._recycle_ids = [];\r\n\r\n\t//setup js functions\r\n    webgl.getExtension = function(name)\r\n\t{\r\n\t\t//alert(\"<IN>  getExtension\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getExtension);\r\n\t\t//alert(\"<OUT>  getExtension\");\r\n\t}\t\r\n\t\r\n\twebgl.createBuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createBuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createBuffer\");\r\n\t\treturn fadeID;\r\n\t}\r\n\r\n\twebgl.bindBuffer = function(target, buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindBuffer);\r\n\t\tthis._cmdBuffer.writeUint16(target);\t\r\n\t\tthis._cmdBuffer.writeUint16(buffer);\t\r\n\t\t//alert(\"<OUT>  bindBuffer\");\t\t\r\n\t}\r\n\t\r\n\twebgl.flush = function()\r\n\t{\r\n\t\t//alert(\"<IN>  flush\");\r\n\t\tif(this._cmdBuffer.getLength()==0)\r\n\t\t{\r\n\t\t\t//to avoid multi-call flush interface\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this._RTObjBuffer.length>= this._RTObjAB.length){\r\n\t\t    this._RTObjAB = new Uint32Array(this._RTObjBuffer.length+4);\r\n\t\t}\r\n\r\n\t\tthis._RTObjAB.set(this._RTObjBuffer);\r\n\t\tthis.flushNeededRT(this._RTObjBuffer.length, this._RTObjAB);\r\n\t\tthis._RTObjBuffer.length = 0;\r\n\t\tthis.flushRenderCommands(this._cmdBuffer.getByteArray(), this._cmdBuffer.getOffset());\r\n\t\t\t\r\n\t    //clear buffer\r\n\t\tif (this._recycle_ids.length > 0)\r\n\t\t{\r\n\t\t    this._idGenerator.recycle(this._recycle_ids);\r\n\t\t    this._recycle_ids = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis._cmdBuffer.reset();\r\n\t\t//alert(\"<OUT>  flush\");\r\n\t}\r\n\t\r\n\twebgl.bufferData=function(target, sizeOrArray, usage)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferData\");\r\n\t\t////alert(\"arguments[1] :\"+arguments[1]);\r\n\t\tif(typeof(arguments[1]) === 'number')\r\n\t\t{\r\n\t\t\t////alert(\"size :\"+arguments[1]);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_size);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[1]);\t//size\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t////alert(\"vector :\"+arguments[1].length);\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_bufferData_vector);\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[2]);\t//usage\t\t\r\n\r\n\t\t\tvar length = arguments[1].byteLength;\r\n\t\t\tif ((length % 4) != 0)\r\n\t\t\t{\r\n\t\t\t    alert(\"bufferData,len is not 4 align,length=\" + length);\r\n\t\t\t}\r\n\r\n\t\t\tthis._cmdBuffer.writeUint32(length);\t//length\t\t\r\n\t\t\tthis._cmdBuffer.writeArrayBuffer(arguments[1].buffer, 0, length);\t//buffer\t\t\r\n\t\t}\r\n\t\t//alert(\"<OUT>  bufferData\");\r\n\t}\r\n\r\n\twebgl.createShader = function(type)\r\n\t{\r\n\t\t//alert(\"<IN>  createShader\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createShader);\r\n\t\tthis._cmdBuffer.writeUint16(type);\r\n\t\tthis._cmdBuffer.writeUint16(fadeID);\r\n\t\t//alert(\"<OUT>  createShader\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.shaderSource = function(shader, source)\r\n\t{\r\n\t\t//alert(\"<IN>  shaderSource\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_shaderSource);\r\n\t\tthis._cmdBuffer.writeUint16(shader);\r\n\r\n\t\t//4 byte align\r\n\t\tvar len = (source.length+3)&0xfffffffc;\r\n\t\tif(len==source.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\t////alert(\"source.length=\"+source.length+\",len=\"+len);\r\n\t\t\r\n\t\tthis._cmdBuffer.writeUint16(len);\t\r\n\t\tthis._cmdBuffer.writeString(source,len);\r\n\t\t//alert(\"shaderSource:len=\"+len+\",src=\"+source);\r\n\t\t//alert(\"<OUT>  shaderSource\");\r\n\t}\r\n\t\r\n\twebgl.compileShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  compileShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_compileShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  compileShader\");\r\n\t}\r\n\t\r\n\twebgl.getShaderParameter = function(shader, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getShaderParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getShaderParameter);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\t\r\n\t\t//alert(\"<OUT>  getShaderParameter\");\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\twebgl.createProgram = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createProgram\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createProgram);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createProgram\");\r\n\t\treturn fadeID;\t\r\n\t}\r\n\r\n\twebgl.attachShader = function(program, shader)\r\n\t{\r\n\t\t//alert(\"<IN>  attachShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_attachShader);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\t\t//alert(\"<OUT>  attachShader\");\t\t\r\n\t}\r\n\t\r\n\twebgl.linkProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  linkProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_linkProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  linkProgram\");\r\n\t}\r\n\t\r\n\twebgl.getProgramParameter = function(program, pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getProgramParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getProgramParameter);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\t//alert(\"<OUT>  getProgramParameter\");\r\n\t\treturn true;\t\t\r\n\t}\r\n\t\r\n\twebgl.useProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  useProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_useProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\t\r\n\t\t//alert(\"<OUT>  useProgram\");\t\t\r\n\t}\r\n\t\r\n\twebgl.getUniformLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getUniformLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getUniformLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getUniformLocation\");\r\n\t\treturn fadeLoc;\r\n\t}\r\n\r\n\twebgl.getAttribLocation = function(program,name)\r\n\t{\r\n\t\t//alert(\"<IN>  getAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tvar fadeLoc = this._locTable.getFadeLocation(program,name);\r\n\t\tthis._cmdBuffer.writeUint32(fadeLoc);\r\n\t\t\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  getAttribLocation\");\r\n\t\t////alert(\"getAttribLocation: fadeLoc=\"+fadeLoc+\",name=\"+name);\t\t\r\n\t\treturn fadeLoc;\r\n\t}\r\n\t\r\n\twebgl.disable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  disable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\r\n\t\t//alert(\"<OUT>  disable\");\r\n\t}\r\n\t\r\n\twebgl.enable = function(cap)\r\n\t{\r\n\t\t//alert(\"<IN>  enable\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enable);\r\n\t\tthis._cmdBuffer.writeUint32(cap);\t\r\n\t\t//alert(\"<OUT>  enable\");\t\t\r\n\t}\r\n\t\r\n\twebgl.colorMask = function(red, green,  blue, alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  colorMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_colorMask);\r\n\t\tthis._cmdBuffer.writeBoolean(red);\r\n\t\tthis._cmdBuffer.writeBoolean(green);\t\r\n\t\tthis._cmdBuffer.writeBoolean(blue);\t\r\n\t\tthis._cmdBuffer.writeBoolean(alpha);\r\n\t\t//alert(\"<OUT>  colorMask\");\r\n\t}\r\n\r\n\twebgl.viewport = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  viewport\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_viewport);\r\n\t\tthis._cmdBuffer.writeUint16(x);\t\r\n\t\tthis._cmdBuffer.writeUint16(y);\t\r\n\t\tthis._cmdBuffer.writeUint16(width);\t\r\n\t\tthis._cmdBuffer.writeUint16(height);\t\r\n\t\t//alert(\"<OUT>  viewport\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clear = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  clear\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clear);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  clear\");\t\t\r\n\t}\r\n\t\r\n\twebgl.clearColor = function(red, green, blue,  alpha)\r\n\t{\r\n\t\t//alert(\"<IN>  clearColor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_clearColor);\r\n\t\tthis._cmdBuffer.writeFloat(red);\r\n\t\tthis._cmdBuffer.writeFloat(green);\r\n\t\tthis._cmdBuffer.writeFloat(blue);\r\n\t\tthis._cmdBuffer.writeFloat(alpha);\r\n\t\t//alert(\"<OUT>  clearColor\");\r\n\t}\r\n\t\r\n\twebgl.createTexture = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createTexture\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createTexture);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t\t//alert(\"<OUT>  createTexture\");\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.bindTexture = function(target, texture)\r\n\t{\r\n\t\t//alert(\"<IN>  bindTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindTexture);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  bindTexture\");\r\n\t}\r\n\t\r\n\twebgl.pixelStorei = function(pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  pixelStorei\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_pixelStorei);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  pixelStorei\");\r\n\t}\r\n\t\r\n\twebgl.texImage2D = function(target, level, internalformat, width, height, border, format, type, pixels)\r\n\t{\r\n\t\t//alert(\"<IN>  texImage2D\");\r\n\t\tif(arguments.length==9)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_09);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//width\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//height\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//border\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[6]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[7]);\t//type\r\n\t\t\tif(arguments[8])\r\n\t\t\t{\r\n\t\t\t    //if( )\r\n\t\t\t    alert('判断 canvas');\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[8].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse if(arguments.length==6)\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(this.FT_texImage2D_06);\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//internalformat\r\n\t\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//format\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[4]);\t//type\r\n\t\t\tif(arguments[5])\r\n\t\t\t{\r\n\t\t\t    if (arguments[5].isCanvas && arguments[5].isCanvas()) {\r\n\t\t\t        this._RTObjBuffer.push(arguments[5].conchThisID);\r\n\t\t\t    }\r\n\t\t\t    this._cmdBuffer.writeUint32(arguments[5].conchThisID);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t\t}\r\n\t\t}\r\n\t\t//alert(\"<OUT>  texImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texSubImage2D = function(target, level, xoffset, yoffset,  format, type, source)\r\n\t{\r\n\t\t//alert(\"<IN>  texSubImage2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texSubImage2D);\r\n\t\tthis._cmdBuffer.writeUint16(arguments[0]);  //target\r\n\t\tthis._cmdBuffer.writeUint16(arguments[1]);\t//level\r\n\t\tthis._cmdBuffer.writeUint16(arguments[2]);\t//xoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[3]);\t//yoffset\r\n\t\tthis._cmdBuffer.writeUint16(arguments[4]);\t//format\r\n\t\tthis._cmdBuffer.writeUint16(arguments[5]);\t//type\r\n\t\tif(arguments[6])\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(arguments[6].conchThisID);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._cmdBuffer.writeUint32(0);\t//Image\r\n\t\t}\t\r\n\t\t//alert(\"<OUT>  texSubImage2D\");\r\n\t}\r\n\t\r\n\twebgl.texParameterf = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameterf\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameterf);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeFloat(param);\t\t\r\n\t\t//alert(\"<OUT>  texParameterf\");\r\n\t}\r\n\t\r\n\twebgl.texParameteri = function(target, pname, param)\r\n\t{\r\n\t\t//alert(\"<IN>  texParameteri\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_texParameteri);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tthis._cmdBuffer.writeUint32(param);\r\n\t\t//alert(\"<OUT>  texParameteri\");\r\n\t}\r\n\t\r\n\twebgl.activeTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  activeTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_activeTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\t//alert(\"<OUT>  activeTexture\");\r\n\t}\r\n\t\r\n\twebgl.getShaderInfoLog = function(shader)\r\n\t{\r\n\t\treturn \"unknown log\";\r\n\t}\r\n\r\n\twebgl.uniform1f = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\r\n\t\t//alert(\"<OUT>  uniform1f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform1i = function(location,x)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform1i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\r\n\t\t//alert(\"<OUT>  uniform1i\");\r\n\t}\r\n\t\r\n\twebgl.uniform2f = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\t//alert(\"<OUT>  uniform2f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform2i = function(location,x,y)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform2i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\t//alert(\"<OUT>  uniform2i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3f = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\t//alert(\"<OUT>  uniform3f\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform3i = function(location,x,y,z)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform3i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\t//alert(\"<OUT>  uniform3i\");\t\t\r\n\t}\r\n\t\r\n\twebgl.uniform4f = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4f\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4f);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeFloat(x);\t\t\r\n\t\tthis._cmdBuffer.writeFloat(y);\t\r\n\t\tthis._cmdBuffer.writeFloat(z);\t\r\n\t\tthis._cmdBuffer.writeFloat(w);\r\n\t\t//alert(\"<OUT>  uniform4f\");\r\n\t}\r\n\t\t\t\t\t\r\n\twebgl.uniform4i = function(location,x,y,z,w)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4i\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_uniform4i);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(x);\t\t\r\n\t\tthis._cmdBuffer.writeUint32(y);\t\r\n\t\tthis._cmdBuffer.writeUint32(z);\t\r\n\t\tthis._cmdBuffer.writeUint32(w);\t\r\n\t\t//alert(\"<OUT>  uniform4i\");\r\n\t}\r\n\t\r\n\twebgl.uniform1iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1iv\");\r\n\t\tthis.uniform1i(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1iv\");\r\n\t}\r\n\twebgl.uniform1fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform1fv\");\r\n\t\tthis.uniform1f(location,v[0]);\r\n\t\t//alert(\"<OUT>  uniform1fv\");\r\n\t}\r\n\twebgl.uniform2iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2iv\");\r\n\t\tthis.uniform2i(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2iv\");\r\n\t}\r\n\twebgl.uniform2fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform2fv\");\r\n\t\tthis.uniform2f(location,v[0],v[1]);\r\n\t\t//alert(\"<OUT>  uniform2fv\");\r\n\t}\r\n\twebgl.uniform3iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3iv\");\r\n\t\tthis.uniform3i(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3iv\");\r\n\t}\r\n\twebgl.uniform3fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform3fv\");\r\n\t\tthis.uniform3f(location,v[0],v[1],v[2]);\r\n\t\t//alert(\"<OUT>  uniform3fv\");\r\n\t}\r\n\twebgl.uniform4iv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4iv\");\r\n\t\tthis.uniform4i(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4iv\");\r\n\t}\r\n\twebgl.uniform4fv = function(location,v)\r\n\t{\r\n\t\t//alert(\"<IN>  uniform4fv\");\r\n\t\tthis.uniform4f(location,v[0],v[1],v[2],v[3]);\r\n\t\t//alert(\"<OUT>  uniform4fv\");\r\n\t}\t\r\n\t\r\n\t\r\n\twebgl._uniformMatrixfv_x = function(cmd,location, transpose, values,number)\r\n\t{\r\n\t\tthis._cmdBuffer.writeUint32(cmd);\r\n\t\tthis._cmdBuffer.writeUint32(location);\r\n\t\tthis._cmdBuffer.writeUint32(transpose);\t\r\n\r\n\t\tvar length = values.byteLength;\r\n\t\tif ((length % 4) != 0) {\r\n\t\t    alert(\"_uniformMatrixfv_x- len is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);  //byte length\r\n\t\tthis._cmdBuffer.writeArrayBuffer(values.buffer, 0, length);\r\n\t}\r\n\r\n\twebgl.uniformMatrix2fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix2fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix2fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix2fv\");\r\n\t}\r\n\r\n\twebgl.uniformMatrix3fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix3fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix3fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix3fv\");\r\n\t}\r\n\t\r\n\twebgl.uniformMatrix4fv = function(location, transpose, values,number)\r\n\t{\r\n\t\t//alert(\"<IN>  uniformMatrix4fv\");\r\n\t\tthis._uniformMatrixfv_x(this.FT_uniformMatrix4fv,location, transpose, values,number);\r\n\t\t//alert(\"<OUT>  uniformMatrix4fv\");\r\n\t}\r\n\t\r\n\twebgl.vertexAttribPointer = function(index, size, type, normalized, stride, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  vertexAttribPointer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_vertexAttribPointer);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\tthis._cmdBuffer.writeUint32(size);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(normalized);\r\n\t\tthis._cmdBuffer.writeUint32(stride);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  vertexAttribPointer\");\r\n\t}\r\n\r\n\twebgl.enableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  enableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_enableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  enableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.blendFunc = function(sfactor, dfactor)\r\n\t{\r\n\t\t//alert(\"<IN>  blendFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_blendFunc);\r\n\t\tthis._cmdBuffer.writeUint16(sfactor);\r\n\t\tthis._cmdBuffer.writeUint16(dfactor);\r\n\t\t//alert(\"<OUT>  blendFunc\");\r\n\t}\r\n\t\r\n\twebgl.bufferSubData = function(target, offset, data)\r\n\t{\r\n\t\t//alert(\"<IN>  bufferSubData\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bufferSubData);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t\r\n\t\tvar length = data.byteLength;\r\n\t\tif ((length % 4) != 0)\r\n\t\t{\r\n\t\t    alert(\"bufferSubData- length is not 4 align!\");\r\n\t\t}\r\n\r\n\t\tthis._cmdBuffer.writeUint32(length);\r\n\t\tthis._cmdBuffer.writeArrayBuffer(data.buffer, 0, length);\r\n\r\n\t\t//alert(\"<OUT>  bufferSubData\");\r\n\t}\r\n\t\r\n\twebgl.drawElements = function(mode, count, type, offset)\r\n\t{\r\n\t\t//alert(\"<IN>  drawElements\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawElements);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\tthis._cmdBuffer.writeUint32(type);\r\n\t\tthis._cmdBuffer.writeUint32(offset);\r\n\t\t//alert(\"<OUT>  drawElements\");\r\n\t}\r\n\t\r\n\twebgl.deleteTexture = function(texture)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteTexture\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteTexture);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\r\n\t\tthis._recycle_ids.push(texture);\r\n\t\t//alert(\"<OUT>  deleteTexture\");\r\n\t}\r\n\r\n\twebgl.drawArrays = function(mode, first,  count)\r\n\t{\r\n\t\t//alert(\"<IN>  drawArrays\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_drawArrays);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\tthis._cmdBuffer.writeUint32(first);\r\n\t\tthis._cmdBuffer.writeUint32(count);\r\n\t\t//alert(\"<OUT>  drawArrays\");\r\n\t}\r\n\t\r\n\twebgl.bindAttribLocation = function(program, index, name)\r\n\t{\r\n\t\t//alert(\"<IN>  bindAttribLocation\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindAttribLocation);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t\r\n\t\t//4 byte align\r\n\t\tvar len = (name.length+3)&0xfffffffc;\r\n\t\tif(len==name.length)\r\n\t\t{\r\n\t\t\tlen+=4;\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(len);\t\r\n\t\tthis._cmdBuffer.writeString(name,len);\r\n\t\t//alert(\"<OUT>  bindAttribLocation\");\r\n\t}\r\n\t\r\n\twebgl.cullFace = function(mode)\r\n\t{\r\n\t\t//alert(\"<IN>  cullFace\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_cullFace);\r\n\t\tthis._cmdBuffer.writeUint32(mode);\r\n\t\t//alert(\"<OUT>  cullFace\");\r\n\t}\r\n\t\r\n\twebgl.createFramebuffer = function()\r\n\t{\r\n\t\t//alert(\"<IN>  createFramebuffer\");\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_createFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(fadeID);\r\n\t    //alert(\"<OUT>  createFramebuffer\");\t\t\r\n\t\treturn fadeID;\r\n\t}\r\n\t\r\n\twebgl.getParameter = function(pname)\r\n\t{\r\n\t\t//alert(\"<IN>  getParameter\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_getParameter);\r\n\t\tthis._cmdBuffer.writeUint32(pname);\r\n\t\tvar fadeValue=0;\r\n\t\tif(pname==this.FRAMEBUFFER_BINDING)\r\n\t\t{\r\n\t\t\tvar fadeValue = this._idGenerator.createFadeID();\r\n\t\t}\r\n\t\tthis._cmdBuffer.writeUint32(fadeValue);\r\n\t\t//alert(\"<OUT>  getParameter\");\r\n\t\treturn fadeValue;\r\n\t}\r\n\t\r\n\twebgl.bindFramebuffer = function(target, framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  bindFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_bindFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\t\t//alert(\"<OUT>  bindFramebuffer\");\r\n\t}\r\n\r\n\twebgl.depthFunc = function(func)\r\n\t{\r\n\t\t//alert(\"<IN>  depthFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\r\n\t\t//alert(\"<OUT>  depthFunc\");\r\n\t}\r\n\t\r\n\twebgl.depthMask = function(flag)\r\n\t{\r\n\t\t//alert(\"<IN>  depthMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthMask);\r\n\t\tthis._cmdBuffer.writeUint32(flag);\t\r\n\t\t//alert(\"<OUT>  depthMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.depthRange = function(zNear, zFar)\r\n\t{\r\n\t\t//alert(\"<IN>  depthRange\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_depthRange);\r\n\t\tthis._cmdBuffer.writeFloat(zNear);\t\r\n\t\tthis._cmdBuffer.writeFloat(zFar);\t\r\n\t\t//alert(\"<OUT>  depthRange\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilFunc = function(func, ref,  mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilFunc\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilFunc);\r\n\t\tthis._cmdBuffer.writeUint32(func);\t\r\n\t\tthis._cmdBuffer.writeUint32(ref);\t\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilFunc\");\r\n\t}\r\n\t\r\n\twebgl.stencilMask = function(mask)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilMask\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilMask);\r\n\t\tthis._cmdBuffer.writeUint32(mask);\r\n\t\t//alert(\"<OUT>  stencilMask\");\t\t\r\n\t}\r\n\t\r\n\twebgl.stencilOp = function(fail, zfail, zpass)\r\n\t{\r\n\t\t//alert(\"<IN>  stencilOp\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_stencilOp);\r\n\t\tthis._cmdBuffer.writeUint32(fail);\r\n\t\tthis._cmdBuffer.writeUint32(zfail);\r\n\t\tthis._cmdBuffer.writeUint32(zpass);\r\n\t\t//alert(\"<OUT>  stencilOp\");\r\n\t}\r\n\t\r\n\twebgl.deleteBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\r\n\t\tthis._recycle_ids.push(buffer);\r\n\t\t//alert(\"<OUT>  deleteBuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteFramebuffer = function(framebuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteFramebuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteFramebuffer);\r\n\t\tthis._cmdBuffer.writeUint32(framebuffer);\r\n\r\n\t\tthis._recycle_ids.push(framebuffer);\r\n\t\t//alert(\"<OUT>  deleteFramebuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteProgram = function(program)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteProgram\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteProgram);\r\n\t\tthis._cmdBuffer.writeUint32(program);\r\n\r\n\t\tthis._recycle_ids.push(program);\r\n\t\t//alert(\"<OUT>  deleteProgram\");\r\n\t}\r\n\t\r\n\twebgl.deleteRenderbuffer = function(renderbuffer)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteRenderbuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteRenderbuffer);\r\n\t\tthis._cmdBuffer.writeUint32(renderbuffer);\r\n\r\n\t\tthis._recycle_ids.push(renderbuffer);\r\n\t\t//alert(\"<OUT>  deleteRenderbuffer\");\r\n\t}\r\n\t\r\n\twebgl.deleteShader = function(shader)\r\n\t{\r\n\t\t//alert(\"<IN>  deleteShader\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_deleteShader);\r\n\t\tthis._cmdBuffer.writeUint32(shader);\r\n\r\n\t\tthis._recycle_ids.push(shader);\r\n\t\t//alert(\"<OUT>  deleteShader\");\r\n\t}\r\n\t\r\n\twebgl.isBuffer = function(buffer)\r\n\t{\r\n\t\t//alert(\"<IN>  isBuffer\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_isBuffer);\r\n\t\tthis._cmdBuffer.writeUint32(buffer);\r\n\t\t//alert(\"<OUT>  isBuffer\");\r\n\t\treturn true;\r\n\t}\r\n\r\n\twebgl.disableVertexAttribArray = function(index)\r\n\t{\r\n\t\t//alert(\"<IN>  disableVertexAttribArray\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_disableVertexAttribArray);\r\n\t\tthis._cmdBuffer.writeUint32(index);\r\n\t\t//alert(\"<OUT>  disableVertexAttribArray\");\r\n\t}\r\n\t\r\n\twebgl.scissor = function(x, y, width, height)\r\n\t{\r\n\t\t//alert(\"<IN>  scissor\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_scissor);\r\n\t\tthis._cmdBuffer.writeUint32(x);\r\n\t\tthis._cmdBuffer.writeUint32(y);\r\n\t\tthis._cmdBuffer.writeUint32(width);\t\r\n\t\tthis._cmdBuffer.writeUint32(height);\t\r\n\t\t//alert(\"<OUT>  scissor\");\t\t\r\n\t}\r\n\t\r\n\twebgl.generateMipmap = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  generateMipmap\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_generateMipmap);\r\n\t\tthis._cmdBuffer.writeUint32(target);\t\t\r\n\t\t//alert(\"<OUT>  generateMipmap\");\r\n\t}\r\n\t\r\n\twebgl.framebufferTexture2D = function(target,  attachment, textarget, texture, level)\r\n\t{\r\n\t\t//alert(\"<IN>  framebufferTexture2D\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_framebufferTexture2D);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tthis._cmdBuffer.writeUint32(attachment);\r\n\t\tthis._cmdBuffer.writeUint32(textarget);\r\n\t\tthis._cmdBuffer.writeUint32(texture);\r\n\t\tthis._cmdBuffer.writeUint32(level);\r\n\t\t//alert(\"<OUT>  framebufferTexture2D\");\r\n\t}\r\n\t\r\n\twebgl.checkFramebufferStatus = function(target)\r\n\t{\r\n\t\t//alert(\"<IN>  checkFramebufferStatus\");\r\n\t\tthis._cmdBuffer.writeUint32(this.FT_checkFramebufferStatus);\r\n\t\tthis._cmdBuffer.writeUint32(target);\r\n\t\tif(target== this.FRAMEBUFFER)\r\n        {\r\n\t\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n            return this.FRAMEBUFFER_COMPLETE;\r\n        }\r\n\t\t//alert(\"<OUT>  checkFramebufferStatus\");\r\n\t\treturn 0;\r\n\t}\r\n\r\n    //=======================扩展=======================\r\n    webgl._createMeshRT= function(){\r\n        return new gl_mesh();\r\n    }\r\n    \r\n    webgl._bindShaderFetchRT = function(vertexdesc,program,rundataDescs){\r\n\t\tvar fadeID = this._idGenerator.createFadeID();\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__bindShaderFetchRT);\r\n\t\tbuff.writeUint32(fadeID); \r\n        buff.writeUint32(program);\r\n        var vdescbuf = vertexdesc.toAB();\r\n        buff.writeUint32(vdescbuf.byteLength);\r\n        buff.writeArrayBuffer(vdescbuf,0,vdescbuf.byteLength);\r\n        buff.writeUint32(rundataDescs.length);\r\n        for( var i=0; i<rundataDescs.length; i++){\r\n            var tmpab = rundataDescs[i].toAB()\r\n            buff.writeUint32(tmpab.byteLength);\r\n            buff.writeArrayBuffer(tmpab,0,tmpab.byteLength);\r\n        }\r\n        //var strVertDesc = vetexdesc.toString();\r\n        //var strRundataDesc = rundataDescs.join(';');\r\n        //var bindret = glBindShaderFetch(strVertDesc, program, strRundataDesc);\r\n        return fadeID;\r\n    }\r\n    \r\n    webgl._renderMeshRT = function(groupData, rundata){\r\n    }\r\n    \r\n    /**\r\n     * \r\n     */\r\n    webgl._renderMesh1RT = function(mesh, begin, end, gpuProgram, shaderInfo, tex, cubetex, rundata){\r\n        var buff = this._cmdBuffer;\r\n\t\tbuff.writeUint32(this.FT__renderMesh1RT);\r\n        var meshid = mesh.getMeshID();\r\n\t\tbuff.writeUint32(meshid);\r\n\t\tbuff.writeUint32(begin);\r\n\t\tbuff.writeUint32(end);\r\n\t\tbuff.writeUint32(gpuProgram);\r\n\t\tbuff.writeUint32(shaderInfo);\r\n        \r\n\t\tif( tex && tex.length )\r\n\t\t\tbuff.writeUint32(tex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUint32(0);\r\n\t\tif( cubetex && cubetex.length )\r\n\t\t\tbuff.writeUint32(cubetex.length);\r\n\t\telse\r\n\t\t\tbuff.writeUnit32(0);\r\n\t\tbuff.writeUint32(rundata.length);\r\n\t\t\r\n\t\tfor(var i=0; i<tex.length; i++){\r\n\t\t\tbuff.writeUint32(tex[i]);\r\n\t\t}\r\n\t\tfor(var i=0; i<cubetex.length; i++){\r\n\t\t\tbuff.writeUint32(cubetex[i]);\r\n\t\t}\r\n\r\n\t\tfor( var i=0; i<rundata.length; i++){\r\n\t\t\tbuff.writeUint32(rundata[i].byteLength);\r\n\t\t\tbuff.writeArrayBuffer(rundata[i],0,rundata[i].byteLength);\r\n\t\t}\r\n    }\r\n    //======================扩展结束======================\r\n\r\n\twebgl._setupConst = function ()\r\n\t{\r\n\t\tthis.DEPTH_BUFFER_BIT               = 0x00000100;\r\n\t\tthis.STENCIL_BUFFER_BIT             = 0x00000400;\r\n\t\tthis.COLOR_BUFFER_BIT               = 0x00004000;\r\n\t\t\r\n\t\t/* BeginMode */\r\n\t\tthis.POINTS                         = 0x0000;\r\n\t\tthis.LINES                          = 0x0001;\r\n\t\tthis.LINE_LOOP                      = 0x0002;\r\n\t\tthis.LINE_STRIP                     = 0x0003;\r\n\t\tthis.TRIANGLES                      = 0x0004;\r\n\t\tthis.TRIANGLE_STRIP                 = 0x0005;\r\n\t\tthis.TRIANGLE_FAN                   = 0x0006;\r\n\t\t\r\n\t\t/* AlphaFunction (not supported in ES20) */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\t\t\r\n\t\t/* BlendingFactorDest */\r\n\t\tthis.ZERO                           = 0;\r\n\t\tthis.ONE                            = 1;\r\n\t\tthis.SRC_COLOR                      = 0x0300;\r\n\t\tthis.ONE_MINUS_SRC_COLOR            = 0x0301;\r\n\t\tthis.SRC_ALPHA                      = 0x0302;\r\n\t\tthis.ONE_MINUS_SRC_ALPHA            = 0x0303;\r\n\t\tthis.DST_ALPHA                      = 0x0304;\r\n\t\tthis.ONE_MINUS_DST_ALPHA            = 0x0305;\r\n\t\t\r\n\t\t/* BlendingFactorSrc */\r\n\t\t/*      ZERO */\r\n\t\t/*      ONE */\r\n\t\tthis.DST_COLOR                      = 0x0306;\r\n\t\tthis.ONE_MINUS_DST_COLOR            = 0x0307;\r\n\t\tthis.SRC_ALPHA_SATURATE             = 0x0308;\r\n\t\t/*      SRC_ALPHA */\r\n\t\t/*      ONE_MINUS_SRC_ALPHA */\r\n\t\t/*      DST_ALPHA */\r\n\t\t/*      ONE_MINUS_DST_ALPHA */\r\n\r\n\t\t/* BlendEquationSeparate */\r\n\t\tthis.FUNC_ADD                       = 0x8006;\r\n\t\tthis.BLEND_EQUATION                 = 0x8009;\r\n\t\tthis.BLEND_EQUATION_RGB             = 0x8009;   /* same as BLEND_EQUATION */\r\n\t\tthis.BLEND_EQUATION_ALPHA           = 0x883D;\r\n\t\t\r\n\t\t/* BlendSubtract */\r\n\t\tthis.FUNC_SUBTRACT                  = 0x800A;\r\n\t\tthis.FUNC_REVERSE_SUBTRACT          = 0x800B;\r\n\r\n\t\t/* Separate Blend Functions */\r\n\t\tthis.BLEND_DST_RGB                  = 0x80C8;\r\n\t\tthis.BLEND_SRC_RGB                  = 0x80C9;\r\n\t\tthis.BLEND_DST_ALPHA                = 0x80CA;\r\n\t\tthis.BLEND_SRC_ALPHA                = 0x80CB;\r\n\t\tthis.CONSTANT_COLOR                 = 0x8001;\r\n\t\tthis.ONE_MINUS_CONSTANT_COLOR       = 0x8002;\r\n\t\tthis.CONSTANT_ALPHA                 = 0x8003;\r\n\t\tthis.ONE_MINUS_CONSTANT_ALPHA       = 0x8004;\r\n\t\tthis.BLEND_COLOR                    = 0x8005;\r\n\r\n\t\t/* Buffer Objects */\r\n\t\tthis.ARRAY_BUFFER                   = 0x8892;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER           = 0x8893;\r\n\t\tthis.ARRAY_BUFFER_BINDING           = 0x8894;\r\n\t\tthis.ELEMENT_ARRAY_BUFFER_BINDING   = 0x8895;\r\n\r\n\t\tthis.STREAM_DRAW                    = 0x88E0;\r\n\t\tthis.STATIC_DRAW                    = 0x88E4;\r\n\t\tthis.DYNAMIC_DRAW                   = 0x88E8;\r\n\r\n\t\tthis.BUFFER_SIZE                    = 0x8764;\r\n\t\tthis.BUFFER_USAGE                   = 0x8765;\r\n\r\n\t\tthis.CURRENT_VERTEX_ATTRIB          = 0x8626;\r\n\r\n\t\t/* CullFaceMode */\r\n\t\tthis.FRONT                          = 0x0404;\r\n\t\tthis.BACK                           = 0x0405;\r\n\t\tthis.FRONT_AND_BACK                 = 0x0408;\r\n\r\n\t\t/* DepthFunction */\r\n\t\t/*      NEVER */\r\n\t\t/*      LESS */\r\n\t\t/*      EQUAL */\r\n\t\t/*      LEQUAL */\r\n\t\t/*      GREATER */\r\n\t\t/*      NOTEQUAL */\r\n\t\t/*      GEQUAL */\r\n\t\t/*      ALWAYS */\r\n\r\n\t\t/* EnableCap */\r\n\t\t/* TEXTURE_2D */\r\n\t\tthis.CULL_FACE                      = 0x0B44;\r\n\t\tthis.BLEND                          = 0x0BE2;\r\n\t\tthis.DITHER                         = 0x0BD0;\r\n\t\tthis.STENCIL_TEST                   = 0x0B90;\r\n\t\tthis.DEPTH_TEST                     = 0x0B71;\r\n\t\tthis.SCISSOR_TEST                   = 0x0C11;\r\n\t\tthis.POLYGON_OFFSET_FILL            = 0x8037;\r\n\t\tthis.SAMPLE_ALPHA_TO_COVERAGE       = 0x809E;\r\n\t\tthis.SAMPLE_COVERAGE                = 0x80A0;\r\n\r\n\t\t/* ErrorCode */\r\n\t\t//this.NO_ERROR                       = 0;\r\n\t\tthis.INVALID_ENUM                   = 0x0500;\r\n\t\tthis.INVALID_VALUE                  = 0x0501;\r\n\t\tthis.INVALID_OPERATION              = 0x0502;\r\n\t\tthis.OUT_OF_MEMORY                  = 0x0505;\r\n\r\n\t\t/* FrontFaceDirection */\r\n\t\tthis.CW                             = 0x0900;\r\n\t\tthis.CCW                            = 0x0901;\r\n\r\n\t\t/* GetPName */\r\n\t\tthis.LINE_WIDTH                     = 0x0B21;\r\n\t\tthis.ALIASED_POINT_SIZE_RANGE       = 0x846D;\r\n\t\tthis.ALIASED_LINE_WIDTH_RANGE       = 0x846E;\r\n\t\tthis.CULL_FACE_MODE                 = 0x0B45;\r\n\t\tthis.FRONT_FACE                     = 0x0B46;\r\n\t\tthis.DEPTH_RANGE                    = 0x0B70;\r\n\t\tthis.DEPTH_WRITEMASK                = 0x0B72;\r\n\t\tthis.DEPTH_CLEAR_VALUE              = 0x0B73;\r\n\t\tthis.DEPTH_FUNC                     = 0x0B74;\r\n\t\tthis.STENCIL_CLEAR_VALUE            = 0x0B91;\r\n\t\tthis.STENCIL_FUNC                   = 0x0B92;\r\n\t\tthis.STENCIL_FAIL                   = 0x0B94;\r\n\t\tthis.STENCIL_PASS_DEPTH_FAIL        = 0x0B95;\r\n\t\tthis.STENCIL_PASS_DEPTH_PASS        = 0x0B96;\r\n\t\tthis.STENCIL_REF                    = 0x0B97;\r\n\t\tthis.STENCIL_VALUE_MASK             = 0x0B93;\r\n\t\tthis.STENCIL_WRITEMASK              = 0x0B98;\r\n\t\tthis.STENCIL_BACK_FUNC              = 0x8800;\r\n\t\tthis.STENCIL_BACK_FAIL              = 0x8801;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_FAIL   = 0x8802;\r\n\t\tthis.STENCIL_BACK_PASS_DEPTH_PASS   = 0x8803;\r\n\t\tthis.STENCIL_BACK_REF               = 0x8CA3;\r\n\t\tthis.STENCIL_BACK_VALUE_MASK        = 0x8CA4;\r\n\t\tthis.STENCIL_BACK_WRITEMASK         = 0x8CA5;\r\n\t\tthis.VIEWPORT                       = 0x0BA2;\r\n\t\tthis.SCISSOR_BOX                    = 0x0C10;\r\n\t\t/*      SCISSOR_TEST */\r\n\t\tthis.COLOR_CLEAR_VALUE              = 0x0C22;\r\n\t\tthis.COLOR_WRITEMASK                = 0x0C23;\r\n\t\tthis.UNPACK_ALIGNMENT               = 0x0CF5;\r\n\t\tthis.PACK_ALIGNMENT                 = 0x0D05;\r\n\t\tthis.MAX_TEXTURE_SIZE               = 0x0D33;\r\n\t\tthis.MAX_VIEWPORT_DIMS              = 0x0D3A;\r\n\t\tthis.SUBPIXEL_BITS                  = 0x0D50;\r\n\t\tthis.RED_BITS                       = 0x0D52;\r\n\t\tthis.GREEN_BITS                     = 0x0D53;\r\n\t\tthis.BLUE_BITS                      = 0x0D54;\r\n\t\tthis.ALPHA_BITS                     = 0x0D55;\r\n\t\tthis.DEPTH_BITS                     = 0x0D56;\r\n\t\tthis.STENCIL_BITS                   = 0x0D57;\r\n\t\tthis.POLYGON_OFFSET_UNITS           = 0x2A00;\r\n\t\t/*      POLYGON_OFFSET_FILL */\r\n\t\tthis.POLYGON_OFFSET_FACTOR          = 0x8038;\r\n\t\tthis.TEXTURE_BINDING_2D             = 0x8069;\r\n\t\tthis.SAMPLE_BUFFERS                 = 0x80A8;\r\n\t\tthis.SAMPLES                        = 0x80A9;\r\n\t\tthis.SAMPLE_COVERAGE_VALUE          = 0x80AA;\r\n\t\tthis.SAMPLE_COVERAGE_INVERT         = 0x80AB;\r\n\r\n\t\t/* GetTextureParameter */\r\n\t\t/*      TEXTURE_MAG_FILTER */\r\n\t\t/*      TEXTURE_MIN_FILTER */\r\n\t\t/*      TEXTURE_WRAP_S */\r\n\t\t/*      TEXTURE_WRAP_T */\r\n\r\n\t\tthis.COMPRESSED_TEXTURE_FORMATS     = 0x86A3;\r\n\r\n\t\t/* HintMode */\r\n\t\tthis.DONT_CARE                      = 0x1100;\r\n\t\tthis.FASTEST                        = 0x1101;\r\n\t\tthis.NICEST                         = 0x1102;\r\n\r\n\t\t/* HintTarget */\r\n\t\tthis.GENERATE_MIPMAP_HINT            = 0x8192;\r\n\r\n\t\t/* DataType */\r\n\t\tthis.BYTE                           = 0x1400;\r\n\t\tthis.UNSIGNED_BYTE                  = 0x1401;\r\n\t\tthis.SHORT                          = 0x1402;\r\n\t\tthis.UNSIGNED_SHORT                 = 0x1403;\r\n\t\tthis.INT                            = 0x1404;\r\n\t\tthis.UNSIGNED_INT                   = 0x1405;\r\n\t\tthis.FLOAT                          = 0x1406;\r\n\r\n\t\t/* PixelFormat */\r\n\t\tthis.DEPTH_COMPONENT                = 0x1902;\r\n\t\tthis.ALPHA                          = 0x1906;\r\n\t\tthis.RGB                            = 0x1907;\r\n\t\tthis.RGBA                           = 0x1908;\r\n\t\tthis.LUMINANCE                      = 0x1909;\r\n\t\tthis.LUMINANCE_ALPHA                = 0x190A;\r\n\r\n\t\t/* PixelType */\r\n\t\t/*      UNSIGNED_BYTE */\r\n\t\tthis.UNSIGNED_SHORT_4_4_4_4         = 0x8033;\r\n\t\tthis.UNSIGNED_SHORT_5_5_5_1         = 0x8034;\r\n\t\tthis.UNSIGNED_SHORT_5_6_5           = 0x8363;\r\n\r\n\t\t/* Shaders */\r\n\t\tthis.FRAGMENT_SHADER                  = 0x8B30;\r\n\t\tthis.VERTEX_SHADER                    = 0x8B31;\r\n\t\tthis.MAX_VERTEX_ATTRIBS               = 0x8869;\r\n\t\tthis.MAX_VERTEX_UNIFORM_VECTORS       = 0x8DFB;\r\n\t\tthis.MAX_VARYING_VECTORS              = 0x8DFC;\r\n\t\tthis.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D;\r\n\t\tthis.MAX_VERTEX_TEXTURE_IMAGE_UNITS   = 0x8B4C;\r\n\t\tthis.MAX_TEXTURE_IMAGE_UNITS          = 0x8872;\r\n\t\tthis.MAX_FRAGMENT_UNIFORM_VECTORS     = 0x8DFD;\r\n\t\tthis.SHADER_TYPE                      = 0x8B4F;\r\n\t\tthis.DELETE_STATUS                    = 0x8B80;\r\n\t\tthis.LINK_STATUS                      = 0x8B82;\r\n\t\tthis.VALIDATE_STATUS                  = 0x8B83;\r\n\t\tthis.ATTACHED_SHADERS                 = 0x8B85;\r\n\t\tthis.ACTIVE_UNIFORMS                  = 0x8B86;\r\n\t\tthis.ACTIVE_ATTRIBUTES                = 0x8B89;\r\n\t\tthis.SHADING_LANGUAGE_VERSION         = 0x8B8C;\r\n\t\tthis.CURRENT_PROGRAM                  = 0x8B8D;\r\n\r\n\t\t/* StencilFunction */\r\n\t\tthis.NEVER                          = 0x0200;\r\n\t\tthis.LESS                           = 0x0201;\r\n\t\tthis.EQUAL                          = 0x0202;\r\n\t\tthis.LEQUAL                         = 0x0203;\r\n\t\tthis.GREATER                        = 0x0204;\r\n\t\tthis.NOTEQUAL                       = 0x0205;\r\n\t\tthis.GEQUAL                         = 0x0206;\r\n\t\tthis.ALWAYS                         = 0x0207;\r\n\r\n\t\t/* StencilOp */\r\n\t\t/*      ZERO */\r\n\t\tthis.KEEP                           = 0x1E00;\r\n\t\tthis.REPLACE                        = 0x1E01;\r\n\t\tthis.INCR                           = 0x1E02;\r\n\t\tthis.DECR                           = 0x1E03;\r\n\t\tthis.INVERT                         = 0x150A;\r\n\t\tthis.INCR_WRAP                      = 0x8507;\r\n\t\tthis.DECR_WRAP                      = 0x8508;\r\n\r\n\t\t/* StringName */\r\n\t\tthis.VENDOR                         = 0x1F00;\r\n\t\tthis.RENDERER                       = 0x1F01;\r\n\t\tthis.VERSION                        = 0x1F02;\r\n\r\n\t\t/* TextureMagFilter */\r\n\t\tthis.NEAREST                        = 0x2600;\r\n\t\tthis.LINEAR                         = 0x2601;\r\n\r\n\t\t/* TextureMinFilter */\r\n\t\t/*      NEAREST */\r\n\t\t/*      LINEAR */\r\n\t\tthis.NEAREST_MIPMAP_NEAREST         = 0x2700;\r\n\t\tthis.LINEAR_MIPMAP_NEAREST          = 0x2701;\r\n\t\tthis.NEAREST_MIPMAP_LINEAR          = 0x2702;\r\n\t\tthis.LINEAR_MIPMAP_LINEAR           = 0x2703;\r\n\r\n\t\t/* TextureParameterName */\r\n\t\tthis.TEXTURE_MAG_FILTER             = 0x2800;\r\n\t\tthis.TEXTURE_MIN_FILTER             = 0x2801;\r\n\t\tthis.TEXTURE_WRAP_S                 = 0x2802;\r\n\t\tthis.TEXTURE_WRAP_T                 = 0x2803;\r\n\r\n\t\t/* TextureTarget */\r\n\t\tthis.TEXTURE_2D                     = 0x0DE1;\r\n\t\tthis.TEXTURE                        = 0x1702;\r\n\r\n\t\tthis.TEXTURE_CUBE_MAP               = 0x8513;\r\n\t\tthis.TEXTURE_BINDING_CUBE_MAP       = 0x8514;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_X    = 0x8515;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_X    = 0x8516;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Y    = 0x8517;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Y    = 0x8518;\r\n\t\tthis.TEXTURE_CUBE_MAP_POSITIVE_Z    = 0x8519;\r\n\t\tthis.TEXTURE_CUBE_MAP_NEGATIVE_Z    = 0x851A;\r\n\t\tthis.MAX_CUBE_MAP_TEXTURE_SIZE      = 0x851C;\r\n\r\n\t\t/* TextureUnit */\r\n\t\tthis.TEXTURE0                       = 0x84C0;\r\n\t\tthis.TEXTURE1                       = 0x84C1;\r\n\t\tthis.TEXTURE2                       = 0x84C2;\r\n\t\tthis.TEXTURE3                       = 0x84C3;\r\n\t\tthis.TEXTURE4                       = 0x84C4;\r\n\t\tthis.TEXTURE5                       = 0x84C5;\r\n\t\tthis.TEXTURE6                       = 0x84C6;\r\n\t\tthis.TEXTURE7                       = 0x84C7;\r\n\t\tthis.TEXTURE8                       = 0x84C8;\r\n\t\tthis.TEXTURE9                       = 0x84C9;\r\n\t\tthis.TEXTURE10                      = 0x84CA;\r\n\t\tthis.TEXTURE11                      = 0x84CB;\r\n\t\tthis.TEXTURE12                      = 0x84CC;\r\n\t\tthis.TEXTURE13                      = 0x84CD;\r\n\t\tthis.TEXTURE14                      = 0x84CE;\r\n\t\tthis.TEXTURE15                      = 0x84CF;\r\n\t\tthis.TEXTURE16                      = 0x84D0;\r\n\t\tthis.TEXTURE17                      = 0x84D1;\r\n\t\tthis.TEXTURE18                      = 0x84D2;\r\n\t\tthis.TEXTURE19                      = 0x84D3;\r\n\t\tthis.TEXTURE20                      = 0x84D4;\r\n\t\tthis.TEXTURE21                      = 0x84D5;\r\n\t\tthis.TEXTURE22                      = 0x84D6;\r\n\t\tthis.TEXTURE23                      = 0x84D7;\r\n\t\tthis.TEXTURE24                      = 0x84D8;\r\n\t\tthis.TEXTURE25                      = 0x84D9;\r\n\t\tthis.TEXTURE26                      = 0x84DA;\r\n\t\tthis.TEXTURE27                      = 0x84DB;\r\n\t\tthis.TEXTURE28                      = 0x84DC;\r\n\t\tthis.TEXTURE29                      = 0x84DD;\r\n\t\tthis.TEXTURE30                      = 0x84DE;\r\n\t\tthis.TEXTURE31                      = 0x84DF;\r\n\t\tthis.ACTIVE_TEXTURE                 = 0x84E0;\r\n\r\n\t\t/* TextureWrapMode */\r\n\t\tthis.REPEAT                         = 0x2901;\r\n\t\tthis.CLAMP_TO_EDGE                  = 0x812F;\r\n\t\tthis.MIRRORED_REPEAT                = 0x8370;\r\n\r\n\t\t/* Uniform Types */\r\n\t\tthis.FLOAT_VEC2                     = 0x8B50;\r\n\t\tthis.FLOAT_VEC3                     = 0x8B51;\r\n\t\tthis.FLOAT_VEC4                     = 0x8B52;\r\n\t\tthis.INT_VEC2                       = 0x8B53;\r\n\t\tthis.INT_VEC3                       = 0x8B54;\r\n\t\tthis.INT_VEC4                       = 0x8B55;\r\n\t\tthis.BOOL                           = 0x8B56;\r\n\t\tthis.BOOL_VEC2                      = 0x8B57;\r\n\t\tthis.BOOL_VEC3                      = 0x8B58;\r\n\t\tthis.BOOL_VEC4                      = 0x8B59;\r\n\t\tthis.FLOAT_MAT2                     = 0x8B5A;\r\n\t\tthis.FLOAT_MAT3                     = 0x8B5B;\r\n\t\tthis.FLOAT_MAT4                     = 0x8B5C;\r\n\t\tthis.SAMPLER_2D                     = 0x8B5E;\r\n\t\tthis.SAMPLER_CUBE                   = 0x8B60;\r\n\r\n\t\t/* Vertex Arrays */\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_ENABLED        = 0x8622;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_SIZE           = 0x8623;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_STRIDE         = 0x8624;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_TYPE           = 0x8625;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_NORMALIZED     = 0x886A;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_POINTER        = 0x8645;\r\n\t\tthis.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889F;\r\n\r\n\t\t/* Read Format */\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_TYPE   = 0x8B9A;\r\n\t\tthis.IMPLEMENTATION_COLOR_READ_FORMAT = 0x8B9B;\r\n\r\n\t\t/* Shader Source */\r\n\t\tthis.COMPILE_STATUS                 = 0x8B81;\r\n\r\n\t\t/* Shader Precision-Specified Types */\r\n\t\tthis.LOW_FLOAT                      = 0x8DF0;\r\n\t\tthis.MEDIUM_FLOAT                   = 0x8DF1;\r\n\t\tthis.HIGH_FLOAT                     = 0x8DF2;\r\n\t\tthis.LOW_INT                        = 0x8DF3;\r\n\t\tthis.MEDIUM_INT                     = 0x8DF4;\r\n\t\tthis.HIGH_INT                       = 0x8DF5;\r\n\r\n\t\t/* Framebuffer Object. */\r\n\t\tthis.FRAMEBUFFER                    = 0x8D40;\r\n\t\tthis.RENDERBUFFER                   = 0x8D41;\r\n\r\n\t\tthis.RGBA4                          = 0x8056;\r\n\t\tthis.RGB5_A1                        = 0x8057;\r\n\t\tthis.RGB565                         = 0x8D62;\r\n\t\tthis.DEPTH_COMPONENT16              = 0x81A5;\r\n\t\tthis.STENCIL_INDEX                  = 0x1901;\r\n\t\tthis.STENCIL_INDEX8                 = 0x8D48;\r\n\t\tthis.DEPTH_STENCIL                  = 0x84F9;\r\n\r\n\t\tthis.RENDERBUFFER_WIDTH             = 0x8D42;\r\n\t\tthis.RENDERBUFFER_HEIGHT            = 0x8D43;\r\n\t\tthis.RENDERBUFFER_INTERNAL_FORMAT   = 0x8D44;\r\n\t\tthis.RENDERBUFFER_RED_SIZE          = 0x8D50;\r\n\t\tthis.RENDERBUFFER_GREEN_SIZE        = 0x8D51;\r\n\t\tthis.RENDERBUFFER_BLUE_SIZE         = 0x8D52;\r\n\t\tthis.RENDERBUFFER_ALPHA_SIZE        = 0x8D53;\r\n\t\tthis.RENDERBUFFER_DEPTH_SIZE        = 0x8D54;\r\n\t\tthis.RENDERBUFFER_STENCIL_SIZE      = 0x8D55;\r\n\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           = 0x8CD0;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           = 0x8CD1;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         = 0x8CD2;\r\n\t\tthis.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8CD3;\r\n\r\n\t\tthis.COLOR_ATTACHMENT0              = 0x8CE0;\r\n\t\tthis.DEPTH_ATTACHMENT               = 0x8D00;\r\n\t\tthis.STENCIL_ATTACHMENT             = 0x8D20;\r\n\t\tthis.DEPTH_STENCIL_ATTACHMENT       = 0x821A;\r\n\r\n\t\tthis.NONE                           = 0;\r\n\r\n\t\tthis.FRAMEBUFFER_COMPLETE                      = 0x8CD5;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_ATTACHMENT         = 0x8CD6;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7;\r\n\t\tthis.FRAMEBUFFER_INCOMPLETE_DIMENSIONS         = 0x8CD9;\r\n\t\tthis.FRAMEBUFFER_UNSUPPORTED                   = 0x8CDD;\r\n\r\n\t\tthis.FRAMEBUFFER_BINDING            = 0x8CA6;\r\n\t\tthis.RENDERBUFFER_BINDING           = 0x8CA7;\r\n\t\tthis.MAX_RENDERBUFFER_SIZE          = 0x84E8;\r\n\r\n\t\tthis.INVALID_FRAMEBUFFER_OPERATION  = 0x0506;\r\n\r\n\t\t/* WebGL-specific enums */\r\n\t\tthis.UNPACK_FLIP_Y_WEBGL            = 0x9240;\r\n\t\tthis.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;\r\n\t\tthis.CONTEXT_LOST_WEBGL             = 0x9242;\r\n\t\tthis.UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;\r\n\t\tthis.BROWSER_DEFAULT_WEBGL          = 0x9244;\t\r\n\t}\t\t\r\n\r\n\twebgl._setupRenderCmdID= function()\r\n\t{\r\n\t\tthis.FT_getExtension = 0;\r\n\t\tthis.FT_createBuffer = 1;\r\n\t\tthis.FT_bindBuffer = 2;\r\n\t\tthis.FT_bufferData_vector = 3;\r\n\t\tthis.FT_bufferData_size = 4;\r\n\t\tthis.FT_createShader = 5;\r\n\t\tthis.FT_shaderSource = 6;\r\n\t\tthis.FT_compileShader = 7;\r\n\t\tthis.FT_getShaderParameter = 8;\r\n\t\tthis.FT_createProgram = 9;\r\n\t\tthis.FT_attachShader = 10\r\n\t\tthis.FT_linkProgram = 11;\r\n\t\tthis.FT_getProgramParameter = 12;\r\n\t\tthis.FT_useProgram = 13;\r\n\t\tthis.FT_getUniformLocation = 14;\r\n\t\tthis.FT_getAttribLocation = 15;\r\n\t\tthis.FT_disable = 16;\r\n\t\tthis.FT_enable = 17;\r\n\t\tthis.FT_colorMask = 18;\r\n\t\tthis.FT_viewport = 19;\r\n\t\tthis.FT_clear = 20;\r\n\t\tthis.FT_clearColor = 21;\r\n\t\tthis.FT_createTexture = 22;\r\n\t\tthis.FT_bindTexture = 23;\r\n\t\tthis.FT_pixelStorei = 24;\r\n\t\tthis.FT_texImage2D_06 = 25;\r\n\t\tthis.FT_texImage2D_09 = 26;\r\n\t\tthis.FT_texSubImage2D = 27;\r\n\t\tthis.FT_texParameterf = 28;\r\n\t\tthis.FT_texParameteri = 29;\r\n\t\tthis.FT_activeTexture = 30;\r\n\t\tthis.FT_getShaderInfoLog = 31;\r\n\t\tthis.FT_uniform1f = 32;\r\n\t\tthis.FT_uniform1i = 33;\r\n\t\tthis.FT_uniform2f = 34;\r\n\t\tthis.FT_uniform2i = 35;\r\n\t\tthis.FT_uniform3f = 36;\r\n\t    this.FT_uniform3i = 37;\r\n        this.FT_uniform4f = 38;\r\n\t    this.FT_uniform4i = 39;\r\n\t    this.FT_uniformMatrix2fv = 40;\r\n\t    this.FT_uniformMatrix3fv = 41;\r\n\t    this.FT_uniformMatrix4fv = 42;\r\n\t    this.FT_vertexAttribPointer = 43;\r\n\t    this.FT_enableVertexAttribArray = 44;\r\n\t    this.FT_blendFunc = 45;\r\n\t    this.FT_bufferSubData = 46;\r\n\t    this.FT_drawElements = 47;\r\n\t    this.FT_deleteTexture = 48;\r\n        this.FT_drawArrays = 49;\r\n        this.FT_bindAttribLocation = 50;\r\n        this.FT_cullFace = 51;\r\n        this.FT_createFramebuffer = 52;\r\n        this.FT_getParameter = 53;\r\n        this.FT_bindFramebuffer = 54;\r\n        this.FT_depthFunc = 55;\r\n        this.FT_depthMask = 56;\r\n        this.FT_depthRange = 57;\r\n        this.FT_stencilFunc = 58;\r\n        this.FT_stencilMask = 59;\r\n        this.FT_stencilOp = 60;\r\n        this.FT_deleteBuffer = 61;\r\n        this.FT_deleteFramebuffer = 62;\r\n        this.FT_deleteProgram = 63;\r\n        this.FT_deleteRenderbuffer = 64;\r\n        this.FT_deleteShader = 65;\r\n        this.FT_isBuffer = 66;\r\n        this.FT_disableVertexAttribArray = 67;\r\n        this.FT_scissor = 68;\r\n        this.FT_generateMipmap = 69;\r\n        this.FT_framebufferTexture2D = 70;\r\n        this.FT_checkFramebufferStatus = 71;\r\n        this.FT__bindShaderFetchRT = 72;\r\n        this.FT__renderMesh1RT = 73;\r\n\t}\r\n\r\n\twebgl._setupConst();\r\n\twebgl._setupRenderCmdID();\r\n}"},{"handle":76,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":278,"type":"error","value":"TypeError"},"name":"TypeError","inferredName":"","resolved":true,"source":"function TypeError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":279,"type":"string","value":"TypeError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":278,"type":"error","value":"TypeError"}}],"text":"function TypeError() { [native code] }"},{"handle":79,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":280,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":280,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":80,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":281,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":281,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":81,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":282,"type":"object","className":"Object"},"name":"initShaderProgram","inferredName":"","resolved":true,"source":"function initShaderProgram(positionName,texName) {\r\n\tprogramObject = webgl.createProgram();\r\n\twebgl.attachShader(programObject, vertexShaderObject);\r\n\twebgl.attachShader(programObject, fragmentShaderObject);\r\n\t//webgl.bindAttribLocation(programObject, v4PositionIndex, positionName);\r\n\t//webgl.bindAttribLocation(programObject, v4TexCoodIndex, texName);\r\n\twebgl.linkProgram(programObject);\r\n\tif (!webgl.getProgramParameter(programObject, webgl.LINK_STATUS)) {\r\n\t\talert(webgl.getProgramInfoLog(programObject));\r\n\t\treturn;\r\n\t}\r\n\twebgl.useProgram(programObject);\r\n\t\r\n\twebgl.activeTexture(webgl.TEXTURE0);\r\n\tvar uniform = webgl.getUniformLocation(programObject, \"inputImageTexture\");\r\n\twebgl.uniform1i(uniform, 0);\r\n\t\t\t\t   \r\n\tv4PositionIndex\t= webgl.getAttribLocation(programObject, \"position\");\r\n\tv4TexCoodIndex\t= webgl.getAttribLocation(programObject, \"inputTextureCoordinate\");\r\n}","script":{"ref":16},"scriptId":34,"position":2814,"line":80,"column":26,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":284,"type":"string","value":"initShaderProgram"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":282,"type":"object","className":"Object"}}],"text":"function initShaderProgram(positionName,texName) {\r\n\tprogramObject = webgl.createProgram();\r\n\twebgl.attachShader(programObject, vertexShaderObject);\r\n\twebgl.attachShader(programObject, fragmentShaderObject);\r\n\t//webgl.bindAttribLocation(programObject, v4PositionIndex, positionName);\r\n\t//webgl.bindAttribLocation(programObject, v4TexCoodIndex, texName);\r\n\twebgl.linkProgram(programObject);\r\n\tif (!webgl.getProgramParameter(programObject, webgl.LINK_STATUS)) {\r\n\t\talert(webgl.getProgramInfoLog(programObject));\r\n\t\treturn;\r\n\t}\r\n\twebgl.useProgram(programObject);\r\n\t\r\n\twebgl.activeTexture(webgl.TEXTURE0);\r\n\tvar uniform = webgl.getUniformLocation(programObject, \"inputImageTexture\");\r\n\twebgl.uniform1i(uniform, 0);\r\n\t\t\t\t   \r\n\tv4PositionIndex\t= webgl.getAttribLocation(programObject, \"position\");\r\n\tv4TexCoodIndex\t= webgl.getAttribLocation(programObject, \"inputTextureCoordinate\");\r\n}"},{"handle":82,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":285,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":285,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":83,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":286,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":286,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":84,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":287,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":287,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":85,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":288,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":288,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":86,"type":"object","className":"Object","constructorFunction":{"ref":289,"type":"function","name":"jsExternalInterface","inferredName":"","scriptId":30},"protoObject":{"ref":290,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"addCallBack","value":{"ref":291,"type":"function","name":"","inferredName":"addCallBack","scriptId":30}},{"name":"call","value":{"ref":292,"type":"function","name":"","inferredName":"call","scriptId":30}},{"name":"executeJS","value":{"ref":293,"type":"function","name":"","inferredName":"executeJS","scriptId":30}}],"text":"#<jsExternalInterface>"},{"handle":87,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[],"text":"#<Object>"},{"handle":88,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"devinfo","value":{"ref":294,"type":"object","className":"Object"}},{"name":"getDeviceInfo","value":{"ref":295,"type":"function","name":"","inferredName":"window.layabox.getDeviceInfo","scriptId":18}}],"text":"#<Object>"},{"handle":89,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":296,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":296,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":90,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":297,"type":"object","className":"Array"},"name":"Array","inferredName":"","resolved":true,"source":"function Array() { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":298,"type":"string","value":"Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":297,"type":"object","className":"Array"}},{"name":"isArray","value":{"ref":299,"type":"function","name":"isArray","inferredName":"","scriptId":5}}],"text":"function Array() { [native code] }"},{"handle":91,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":302,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":302,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":92,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":303,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":303,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":93,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":304,"type":"object","className":"Object"},"name":"","inferredName":"exports.loadLocalStorage","resolved":true,"source":"function ( url ){\r\n\tvar storagePath = conchConfig.getStoragePath();\r\n\tvar filename='';\r\n\tvar filepos=url.indexOf('file:///');\r\n\tif(filepos>=0){\r\n\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\tfilename = filename.replace(/:/g,'_');\r\n\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\tfilename = storagePath+'/'+filename+'.txt';\r\n\t}else\r\n\t\tfilename = storagePath+'/'+url.split('/')[2].replace(':','_')+'.txt';\r\n\tvar strdb = readFileSync(filename,'utf8');\r\n\tstrdb=strdb||'{}';\r\n\tvar db = JSON.parse(strdb);\r\n\tfunction savedb(){\r\n\t\twriteStrFileSync(filename,JSON.stringify(db) );\r\n\t}\r\n\tdb.setItem=function(n,v){ db[n] = v;  savedb();}\r\n\tdb.getItem=function(n){ return db[n]?db[n]:null;}\r\n\tdb.removeItem=function(n){ delete db[n]; savedb(); }\r\n\tdb.clear=function(){ db={}; savedb(); }\r\n\treturn db;\r\n}","script":{"ref":32},"scriptId":24,"position":93,"line":1,"column":35,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":304,"type":"object","className":"Object"}}],"text":"function ( url ){\r\n\tvar storagePath = conchConfig.getStoragePath();\r\n\tvar filename='';\r\n\tvar filepos=url.indexOf('file:///');\r\n\tif(filepos>=0){\r\n\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\tfilename = filename.replace(/:/g,'_');\r\n\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\tfilename = storagePath+'/'+filename+'.txt';\r\n\t}else\r\n\t\tfilename = storagePath+'/'+url.split('/')[2].replace(':','_')+'.txt';\r\n\tvar strdb = readFileSync(filename,'utf8');\r\n\tstrdb=strdb||'{}';\r\n\tvar db = JSON.parse(strdb);\r\n\tfunction savedb(){\r\n\t\twriteStrFileSync(filename,JSON.stringify(db) );\r\n\t}\r\n\tdb.setItem=function(n,v){ db[n] = v;  savedb();}\r\n\tdb.getItem=function(n){ return db[n]?db[n]:null;}\r\n\tdb.removeItem=function(n){ delete db[n]; savedb(); }\r\n\tdb.clear=function(){ db={}; savedb(); }\r\n\treturn db;\r\n}"},{"handle":94,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":305,"type":"object","className":"Object"},"name":"","inferredName":"ws","resolved":true,"source":"function (url){\r\n\t\tvar ret = new _Socket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}","script":{"ref":44},"scriptId":29,"position":502,"line":21,"column":18,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":0,"index":2}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":305,"type":"object","className":"Object"}}],"text":"function (url){\r\n\t\tvar ret = new _Socket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}"},{"handle":95,"type":"object","className":"Object","constructorFunction":{"ref":306,"type":"function","name":"","inferredName":""},"protoObject":{"ref":307,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"appUrl","value":{"ref":271,"type":"string","value":""}},{"name":"search","value":{"ref":271,"type":"string","value":""}},{"name":"host","value":{"ref":308,"type":"string","value":"localhost:8899"}},{"name":"protocol","value":{"ref":309,"type":"string","value":"http:"}},{"name":"pathname","value":{"ref":310,"type":"string","value":"/MyTest/webgl-benchmark-conch/bench.html"}},{"name":"fullpath","value":{"ref":311,"type":"string","value":"http://localhost:8899/MyTest/webgl-benchmark-conch"}},{"name":"getHref","value":{"ref":312,"type":"function","name":"getHref","inferredName":""}},{"name":"setHref","value":{"ref":313,"type":"function","name":"setHref","inferredName":""}},{"name":"href","value":{"ref":9,"type":"undefined"}},{"name":"reload","value":{"ref":314,"type":"function","name":"","inferredName":"location.reload","scriptId":25}}],"text":"#<Object>"},{"handle":96,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":315,"type":"object","className":"Object"},"name":"URL","inferredName":"","resolved":true,"source":"function URL(url){\r\n\t\tthis._href=url.trim();\r\n\t\tthis.isAbs=function(){\r\n\t\t\treturn this._href.indexOf('://')>0;\r\n\t\t}\r\n\t\t/*\r\n\t\tget href:function(){}\r\n\t\tget host=function(){}\r\n\t\tget pathname=function(){}\r\n\t\tget search = function(){}\r\n\t\tget path = function(){}\r\n\t\tget query=function(){}\r\n\t\t*/\r\n\t\tthis.resolve=function(from,to){\r\n\t\t\t//from是路径么\r\n\t\t\tvar tfrom=from.trim();\r\n\r\n\t\t\tvar qst=tfrom.indexOf('?');\r\n\t\t\tif(qst>0)\r\n\t\t\t\ttfrom=tfrom.substr(0,qst);\r\n\r\n\t\t\tif(tfrom[tfrom.length-1]=='/'||tfrom[tfrom.length-1]=='\\\\'){\r\n\t\t\t\treturn tfrom+to;\r\n\t\t\t}else{\r\n\t\t\t\tvar p = tfrom.lastIndexOf('/');\r\n\t\t\t\tvar p1 = tfrom.lastIndexOf('\\\\');\r\n\t\t\t\tp=p<p1?p1:p;\r\n\t\t\t\treturn tfrom.substr(0,p+1)+to;\r\n\t\t\t}\r\n\t\t}\r\n\t}","script":{"ref":40},"scriptId":28,"position":62,"line":2,"column":13,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":316,"type":"string","value":"URL"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":315,"type":"object","className":"Object"}}],"text":"function URL(url){\r\n\t\tthis._href=url.trim();\r\n\t\tthis.isAbs=function(){\r\n\t\t\treturn this._href.indexOf('://')>0;\r\n\t\t}\r\n\t\t/*\r\n\t\tget href:function(){}\r\n\t\tget host=function(){}\r\n\t\tget pathname=function(){}\r\n\t\tget search = function(){}\r\n\t\tget path = function(){}\r\n\t\tget query=function(){}\r\n\t\t*/\r\n\t\tthis.resolve=function(from,to){\r\n\t\t\t//from是路径么\r\n\t\t\tvar tfrom=from.trim();\r\n\r\n\t\t\tvar qst=tfrom.indexOf('?');\r\n\t\t\tif(qst>0)\r\n\t\t\t\ttfrom=tfrom.substr(0,qst);\r\n\r\n\t\t\tif(tfrom[tfrom.length-1]=='/'||tfrom[tfrom.length-1]=='\\\\'){\r\n\t\t\t\treturn tfrom+to;\r\n\t\t\t}else{\r\n\t\t\t\tvar p = tfrom.lastIndexOf('/');\r\n\t\t\t\tvar p1 = tfrom.lastIndexOf('\\\\');\r\n\t\t\t\tp=p<p1?p1:p;\r\n\t\t\t\treturn tfrom.substr(0,p+1)+to;\r\n\t\t\t}\r\n\t\t}\r\n\t}"},{"handle":97,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":317,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":317,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":98,"type":"object","className":"Object","constructorFunction":{"ref":19,"type":"function","name":"","inferredName":""},"protoObject":{"ref":20,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"complete","value":{"ref":318,"type":"boolean","value":false}},{"name":"onerror","value":{"ref":12,"type":"null","value":null}},{"name":"onload","value":{"ref":12,"type":"null","value":null}},{"name":"_onload","value":{"ref":12,"type":"null","value":null}},{"name":"src","value":{"ref":271,"type":"string","value":""}},{"name":"height","value":{"ref":61,"type":"number","value":0}},{"name":"width","value":{"ref":61,"type":"number","value":0}},{"name":"imgId","value":{"ref":319,"type":"number","value":126444392}},{"name":"conchThisID","value":{"ref":320,"type":"number","value":125857576}},{"name":"setSrc","value":{"ref":321,"type":"function","name":"setSrc","inferredName":""}},{"name":"getImageData","value":{"ref":322,"type":"function","name":"getImageData","inferredName":""}},{"name":"rect","value":{"ref":323,"type":"function","name":"rect","inferredName":""}}],"text":"#<Object>"},{"handle":99,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":324,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":324,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":100,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":325,"type":"object","className":"Object"},"name":"loadUrl","inferredName":"","resolved":true,"source":"function loadUrl(url){\r\n\tlog('_loadUrl('+url+')');\r\n\tif(url.length<2)return;\r\n\turl = url.replace(/\\\\/g,'/');\r\n\tif(url[0]==='/' ) url = 'file://'+url;\r\n\telse if(url[1]==':') url = 'file:///'+url;\r\n\turl = url.trim();\r\n\tlocation.setHref(url);\t//只是设置，不希望触发跳转。所以用函数。\r\n\tvar layainfo=null;\r\n\tvar urlpath=(function(str){\r\n\t\tvar qst=str.indexOf('?');\r\n\t\tif(qst>0)\r\n\t\t\tstr=str.substr(0,qst);\r\n\t\tvar p=str.lastIndexOf('/');\r\n\t\tif(p>=0) return str.substr(0,p+1);\r\n\t\treturn str;\r\n\t\t})(url);\r\n\tlocalStorage = loadLocalStorage( urlpath );\r\n\tappcache = new AppCache(urlpath);//这时候会加载资源索引，因此如果更新了索引，必须重新创建。\r\n\t\t\t\t\t\t\t\t\t\t//为了让启动html也使用缓存，需要在loadUrl刚开始的时候就创建appcache对象。\r\n\t\t\t\t\t\t\t\t\t\t\r\n\tvar cookiepath=(function(url){\r\n\t\tvar filename='';\r\n\t\tvar filepos=url.indexOf('file:///');\r\n\t\tif(url.indexOf('?')>0){\r\n\t\t\turl = url.substr(0,url.indexOf('?'));\t//去掉?\r\n\t\t}\r\n\t\tif(filepos>=0){\r\n\t\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\t\tfilename = filename.replace(/:/g,'_');\r\n\t\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\t}else{\r\n\t\t\tvar vv = url.split('/');\r\n\t\t\tvv.shift();vv.shift();vv.pop();\r\n\t\t\tvv[0]=vv[0].replace(':','_');\r\n\t\t\tfilename=vv.join('_');\r\n\t\t}\r\n\t\treturn filename;\r\n\t})(url);\r\n\tdocument.loadCookie( cookiepath );\r\n\r\n\tvar preloads = [];\t//需要预先下载的文件\r\n\tvar scripts=[];\t\t//需要执行的文件\r\n\t\r\n\tvar runNext = function(p){runSeqs.run.call(runSeqs,p);}\r\n\t\r\n\tfunction downloadfile(url,onok,onerr,ignoree){\r\n\t\tvar file = new layaHtml5.File(url);\r\n\t\tvar filereader = new FileReader();\r\n\t\tfilereader.setIgnoreError(ignoree?true:false);\r\n\t\tfilereader.onload=function(){ onok(filereader.result);}\r\n\t\tfilereader.onerror=function(){log('下载文件错误：'+url);onerr();}\r\n\t\tfilereader.readAsText(file);\r\n\t}\r\n\t\r\n\tfunction getPageInfo(){\r\n\t\t//字符串可以是'也可以是\"。现在先临时写一个不太严格的。\r\n\t\tvar reg = new RegExp(/([a-zA-Z0-9]+)\\s?=['\"]([^'^\"]*)['\"]/g);\r\n\t\tfunction parseKVPair(str,obj){\r\n\t\t\tvar ret = null;\r\n\t\t\twhile(ret=reg.exec(str)){\r\n\t\t\t\tvar keyv=ret[1];\r\n\t\t\t\tvar valv=ret[2];\r\n\t\t\t\tobj[keyv]=valv;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onStartPageData(data){\r\n\t\t\t//加载流程和标准见文档的 <页面加载流程.txt>\r\n\t\t\t//meta里面的laya信息\r\n\t\t\tlayainfo=(function(data){\r\n\t\t\t\tvar layametas = data.match(/<\\s*meta\\s*name=['\"]laya['\"].*/g);//原来的写法遇到路径分隔符/就会出错\r\n\t\t\t\tif(layametas){\r\n\t\t\t\t\t//判断是不是laya页面\r\n\t\t\t\t\tvar retobj={/*version:'1.0',*/screenorientation:'landscape',cacheid:'CDCDCDCD'};\r\n\t\t\t\t\tlayametas.forEach(function(layameta){\r\n\t\t\t\t\t\tparseKVPair(layameta,retobj);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retobj;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t})(data);\r\n\t\t\t//先加入一个执行的js。这个应该都是laya.js\r\n\t\t\tif(layainfo ){\r\n\t\t\t\tvar layaurl=(layainfo.layaurl);//||(runcontext.layarepo+layainfo.version+'/laya.js');\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif(layaurl && layaurl.indexOf('://')<0){//相对路径\r\n\t\t\t\t\tlayaurl = urlobj.resolve(url,layaurl);\r\n\t\t\t\t\tscripts.push(layaurl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//由微端加载的script标签。只能有一个\r\n\t\t\tvar layascriptSrc = (function(data){\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tvar lscript = data.match(/<script\\s+.*loader=['\"]laya['\"].*/g);\r\n\t\t\t\tif(lscript){\r\n\t\t\t\t\tlscript.forEach(function(script){\r\n\t\t\t\t\t\tvar ret = script.match(/src=([^\\s]+)/);\r\n\t\t\t\t\t\tif(ret){\r\n\t\t\t\t\t\t\tvar scriptsrc=ret[1].substr(1,ret[1].length-2);\r\n\t\t\t\t\t\t\tif(scriptsrc.indexOf('://')<0){//相对路径\r\n\t\t\t\t\t\t\t\tscriptsrc = urlobj.resolve(url,scriptsrc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscripts.push(scriptsrc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn scripts;\r\n\t\t\t})(data); \r\n\t\t\t//需要预先加载的文件\r\n\t\t\tpreloads = (function(data){\r\n\t\t\t\tvar files=[];\r\n\t\t\t\tvar preloadmetas = data.match(/<\\s*meta\\s*name=['\"]preload['\"].*/g);\r\n\t\t\t\tif(preloadmetas){\r\n\t\t\t\t\tpreloadmetas.forEach(function(meta){\r\n\t\t\t\t\t\tvar ret={};\r\n\t\t\t\t\t\tparseKVPair(meta,ret);\r\n\t\t\t\t\t\tif(ret.files){\r\n\t\t\t\t\t\t\tfiles=files.concat(ret.files.split(';'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn files;\r\n\t\t\t})(data);\r\n\t\t\t\r\n\t\t\tif(scripts.length){\r\n\t\t\t\trunNext();\r\n\t\t\t}else{\r\n\t\t\t\t//不是laya页面\r\n\t\t\t\talert('Sorry, this is a normal html page. i cant render it yet!\\n'+data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdownloadfile(url+'?rand='+Math.random()*(new Date().valueOf()),\t//优先尝试强制下载。\r\n\t\t\tonStartPageData//on download OK\r\n\t\t\t, function(e){//on download error\r\n\t\t\t\t//如果失败了再尝试有没有打包版的页面数据。\r\n\t\t\t\tdownloadfile(url,onStartPageData//on download OK\r\n\t\t\t\t\t,function(e){//on download error\r\n\t\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\talert('load start page error!url='+url);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tfunction setOrientation(){\r\n\t\tvar nameToVal={\r\n\t\t\tlandscape:0,portrait:1,user:2,behind:3,sensor:4,nosensor:5,sensor_landscape:6,\r\n\t\t\tsensor_portrait:7,reverse_landscape:8,reverse_portrait:9,full_sensor:10,}\r\n\t\tvar nOri = (function(name){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar n = nameToVal[name];\r\n\t\t\t\t\treturn n||0;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t})(layainfo.screenorientation);\r\n\t\t\t\r\n\t\tif(conchConfig.getScreenOrientation()!=nOri){\r\n\t\t\tconchConfig.setScreenOrientation(nOri);\r\n\t\t}\r\n\t\trunNext();\r\n\t}\r\n\tfunction runConfig()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.configjs )\r\n\t\t\t{\r\n\t\t\t\tvar configJsUrl = layainfo.configjs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( configJsUrl && configJsUrl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tconfigJsUrl = urlobj.resolve(url,configJsUrl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( configJsUrl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download configjs error e=\" + e);runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\tfunction showLogo()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.logojs )\r\n\t\t\t{\r\n\t\t\t\tlayainfo.bShowLogoJS = true;\r\n\t\t\t\tvar logojsurl = layainfo.logojs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( logojsurl && logojsurl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tlogojsurl = urlobj.resolve(url,logojsurl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( logojsurl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download logjs error e=\" + e);layainfo.bShowLogoJS=false;runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateDcc(){\r\n\t\tappcache.setResourceID('appurl',urlpath);\r\n\t\tvar curassets = appcache.getResourceID('netassetsid');\r\n\t\tdownloadfile(urlpath+'update/assetsid.txt?rand='+Math.random()*(new Date().valueOf()),//加随机是为了防止不小心把它加入了缓存\r\n\t\t\tfunction(data){\r\n\t\t\t\tif( data!=curassets ){\r\n\t\t\t\t    //下载新的包\r\n\t\t\t\t    //先下载二进制。\r\n\t\t\t\t    var file = new layaHtml5.File(urlpath + 'update/filetable.bin?rand=' + Math.random() * (new Date().valueOf()));\r\n\t\t\t\t    var filereader = new FileReader();\r\n\t\t\t\t\tfilereader.setIgnoreError(true);\r\n\t\t\t\t    filereader.onload = function () {\r\n\t\t\t\t        if (filereader.result instanceof ArrayBuffer) {\r\n\t\t\t\t            idxdata = \"\";\r\n\t\t\t\t            var v = new Uint32Array(filereader.result);\r\n\t\t\t\t\t\t\tif(v[0]!=0xffeeddcc || v[1]!=1){//需要校验\r\n\t\t\t\t\t\t\t\tonloadfterr();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor (var ii = 2, isz = v.length / 2; ii < isz; ii++) \r\n\t\t\t\t\t\t\t\t\tidxdata += v[ii * 2].toString(16) + ' ' + v[ii * 2+1].toString(16)+'\\n';\r\n\t\t\t\t\t\t\t\tappcache.saveFileTable(idxdata);\r\n\t\t\t\t\t\t\t\tappcache = new AppCache(urlpath);\r\n\t\t\t\t\t\t\t\t//设置新的id。只有写完filetable之后才能写这个\r\n\t\t\t\t\t\t\t\tappcache.setResourceID('netassetsid', data);\r\n\t\t\t\t\t\t\t\trunNext();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t        } else { alert('下载filetable.bin失败。类型不对');};\r\n\t\t\t\t    }\r\n\t\t\t\t    function onloadfterr() {\r\n\t\t\t\t        //出错的话，下载文本的\r\n\t\t\t\t        downloadfile(urlpath + 'update/filetable.txt?rand=' + Math.random() * (new Date().valueOf()),\r\n                            function (idxdata) {\r\n                                appcache.saveFileTable(idxdata);\r\n                                appcache = new AppCache(urlpath);\r\n                                //设置新的id。只有写完filetable之后才能写这个\r\n                                appcache.setResourceID('netassetsid', data);\r\n                                runNext();\r\n                            },\r\n                            function (e) {\r\n                                runNext();\r\n                            }, true);\r\n\t\t\t\t    }\r\n\t\t\t\t\tfilereader.onerror = onloadfterr;\r\n\t\t\t\t    filereader.readAsArrayBuffer(file);\r\n\t\t\t\t}else\r\n\t\t\t\t\trunNext();\r\n\t\t\t},\r\n\t\t\tfunction (e) {\r\n                //如果没有assetsid，则去掉校验功能。\r\n\t\t\t    appcache.saveFileTable('');\r\n\t\t\t    appcache = new AppCache(urlpath);\r\n\t\t\t\trunNext();\r\n\t\t\t},true);\t\r\n\t}\r\n\t\r\n\t//下载必须文件\r\n\tfunction predownload(){\r\n\t\tvar num = preloads.length;\r\n\t\tif(num<=0)\r\n\t\t\trunNext();\r\n\t\tfunction preloadret(b){\r\n\t\t\tnum--;\r\n\t\t\tif(num<=0){\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpreloads.forEach(function(f){\r\n\t\t\tvar absurl=f;\r\n\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\tif(absurl.indexOf('://')<0){//相对路径\r\n\t\t\t\tabsurl = urlobj.resolve(url,absurl);\r\n\t\t\t}\r\n\t\t\t//读取二进制文件\r\n\t\t\tvar file = new layaHtml5.File(absurl);\r\n\t\t\tvar filereader = new FileReader();\r\n\t\t\tfilereader.onload=function(){ preloadret(true);}\r\n\t\t\tfilereader.onerror=function(){preloadret(false);}\r\n\t\t\tfilereader.readAsArrayBuffer(file);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction startApp(){\r\n\t\tfunction getIsEval()\r\n\t\t{\r\n\t\t\tif( layainfo.bShowLogoJS == true )\r\n\t\t\t{\r\n\t\t\t\tvar nOldTime = new Date().valueOf();\r\n\t\t\t\tif( conch.getLogoImageState() )\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t\t}\r\n\t\t\t\telse if( new Date().valueOf() - nOldTime > 15000 )\r\n\t\t\t\t{\r\n\t\t\t\t\tdownloadscript();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdownloadscript();\r\n\t\t\t}\r\n\t\t}\r\n\t\t//依次执行所有的js\r\n\t\tfunction downloadscript(){\r\n\t\t\tclearInterval( conch.scriptTimeInterval );\r\n\t\t\tif( scripts.length <= 0 )\r\n\t\t\t\treturn;\r\n\t\t\tvar ssrc=scripts[0];\r\n\t\t\tscripts.shift();\r\n\t\t\tlog('downloadjs:'+ssrc);\t\t\t\r\n\t\t\tdownloadfile(ssrc,scriptret,\r\n\t\t\t\tfunction(e){\r\n\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t}else\t\t\t\t\r\n\t\t\t\t\t\talert('download js error:url='+ssrc);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tfunction scriptret(data){\r\n\t\t\tlog('downloadjs ok');\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\twindow.eval(data);\r\n\t\t\t\tif( !layainfo.bShowLogoJS )\r\n\t\t\t\t{\r\n\t\t\t\t\tconch.showLoadingView( false );\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\talert(e+' '+e.stack);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//scripts.shift();\r\n\t\t\tif(scripts.length<=0){\r\n\t\t\t\tif( window.onload ) window.onload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconch.scriptTimeInterval=setInterval(getIsEval,17);\r\n\t}\r\n\t//需要依次执行的函数\r\n\trunSeqs.seqs=[getPageInfo,setOrientation,updateDcc,runConfig,showLogo,predownload,startApp];\r\n\trunSeqs.run();//这个函数不会退出，直到程序结束\t\t\r\n}","script":{"ref":22},"scriptId":18,"position":3687,"line":166,"column":16,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":326,"type":"string","value":"loadUrl"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":325,"type":"object","className":"Object"}}],"text":"function loadUrl(url){\r\n\tlog('_loadUrl('+url+')');\r\n\tif(url.length<2)return;\r\n\turl = url.replace(/\\\\/g,'/');\r\n\tif(url[0]==='/' ) url = 'file://'+url;\r\n\telse if(url[1]==':') url = 'file:///'+url;\r\n\turl = url.trim();\r\n\tlocation.setHref(url);\t//只是设置，不希望触发跳转。所以用函数。\r\n\tvar layainfo=null;\r\n\tvar urlpath=(function(str){\r\n\t\tvar qst=str.indexOf('?');\r\n\t\tif(qst>0)\r\n\t\t\tstr=str.substr(0,qst);\r\n\t\tvar p=str.lastIndexOf('/');\r\n\t\tif(p>=0) return str.substr(0,p+1);\r\n\t\treturn str;\r\n\t\t})(url);\r\n\tlocalStorage = loadLocalStorage( urlpath );\r\n\tappcache = new AppCache(urlpath);//这时候会加载资源索引，因此如果更新了索引，必须重新创建。\r\n\t\t\t\t\t\t\t\t\t\t//为了让启动html也使用缓存，需要在loadUrl刚开始的时候就创建appcache对象。\r\n\t\t\t\t\t\t\t\t\t\t\r\n\tvar cookiepath=(function(url){\r\n\t\tvar filename='';\r\n\t\tvar filepos=url.indexOf('file:///');\r\n\t\tif(url.indexOf('?')>0){\r\n\t\t\turl = url.substr(0,url.indexOf('?'));\t//去掉?\r\n\t\t}\r\n\t\tif(filepos>=0){\r\n\t\t\tfilename = url.substr(filepos+8,url.lastIndexOf('/')-(filepos+8));\r\n\t\t\tfilename = filename.replace(/:/g,'_');\r\n\t\t\tfilename = filename.replace(/[\\\\\\/]/g,'__');\r\n\t\t}else{\r\n\t\t\tvar vv = url.split('/');\r\n\t\t\tvv.shift();vv.shift();vv.pop();\r\n\t\t\tvv[0]=vv[0].replace(':','_');\r\n\t\t\tfilename=vv.join('_');\r\n\t\t}\r\n\t\treturn filename;\r\n\t})(url);\r\n\tdocument.loadCookie( cookiepath );\r\n\r\n\tvar preloads = [];\t//需要预先下载的文件\r\n\tvar scripts=[];\t\t//需要执行的文件\r\n\t\r\n\tvar runNext = function(p){runSeqs.run.call(runSeqs,p);}\r\n\t\r\n\tfunction downloadfile(url,onok,onerr,ignoree){\r\n\t\tvar file = new layaHtml5.File(url);\r\n\t\tvar filereader = new FileReader();\r\n\t\tfilereader.setIgnoreError(ignoree?true:false);\r\n\t\tfilereader.onload=function(){ onok(filereader.result);}\r\n\t\tfilereader.onerror=function(){log('下载文件错误：'+url);onerr();}\r\n\t\tfilereader.readAsText(file);\r\n\t}\r\n\t\r\n\tfunction getPageInfo(){\r\n\t\t//字符串可以是'也可以是\"。现在先临时写一个不太严格的。\r\n\t\tvar reg = new RegExp(/([a-zA-Z0-9]+)\\s?=['\"]([^'^\"]*)['\"]/g);\r\n\t\tfunction parseKVPair(str,obj){\r\n\t\t\tvar ret = null;\r\n\t\t\twhile(ret=reg.exec(str)){\r\n\t\t\t\tvar keyv=ret[1];\r\n\t\t\t\tvar valv=ret[2];\r\n\t\t\t\tobj[keyv]=valv;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onStartPageData(data){\r\n\t\t\t//加载流程和标准见文档的 <页面加载流程.txt>\r\n\t\t\t//meta里面的laya信息\r\n\t\t\tlayainfo=(function(data){\r\n\t\t\t\tvar layametas = data.match(/<\\s*meta\\s*name=['\"]laya['\"].*/g);//原来的写法遇到路径分隔符/就会出错\r\n\t\t\t\tif(layametas){\r\n\t\t\t\t\t//判断是不是laya页面\r\n\t\t\t\t\tvar retobj={/*version:'1.0',*/screenorientation:'landscape',cacheid:'CDCDCDCD'};\r\n\t\t\t\t\tlayametas.forEach(function(layameta){\r\n\t\t\t\t\t\tparseKVPair(layameta,retobj);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn retobj;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t})(data);\r\n\t\t\t//先加入一个执行的js。这个应该都是laya.js\r\n\t\t\tif(layainfo ){\r\n\t\t\t\tvar layaurl=(layainfo.layaurl);//||(runcontext.layarepo+layainfo.version+'/laya.js');\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif(layaurl && layaurl.indexOf('://')<0){//相对路径\r\n\t\t\t\t\tlayaurl = urlobj.resolve(url,layaurl);\r\n\t\t\t\t\tscripts.push(layaurl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//由微端加载的script标签。只能有一个\r\n\t\t\tvar layascriptSrc = (function(data){\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tvar lscript = data.match(/<script\\s+.*loader=['\"]laya['\"].*/g);\r\n\t\t\t\tif(lscript){\r\n\t\t\t\t\tlscript.forEach(function(script){\r\n\t\t\t\t\t\tvar ret = script.match(/src=([^\\s]+)/);\r\n\t\t\t\t\t\tif(ret){\r\n\t\t\t\t\t\t\tvar scriptsrc=ret[1].substr(1,ret[1].length-2);\r\n\t\t\t\t\t\t\tif(scriptsrc.indexOf('://')<0){//相对路径\r\n\t\t\t\t\t\t\t\tscriptsrc = urlobj.resolve(url,scriptsrc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscripts.push(scriptsrc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn scripts;\r\n\t\t\t})(data); \r\n\t\t\t//需要预先加载的文件\r\n\t\t\tpreloads = (function(data){\r\n\t\t\t\tvar files=[];\r\n\t\t\t\tvar preloadmetas = data.match(/<\\s*meta\\s*name=['\"]preload['\"].*/g);\r\n\t\t\t\tif(preloadmetas){\r\n\t\t\t\t\tpreloadmetas.forEach(function(meta){\r\n\t\t\t\t\t\tvar ret={};\r\n\t\t\t\t\t\tparseKVPair(meta,ret);\r\n\t\t\t\t\t\tif(ret.files){\r\n\t\t\t\t\t\t\tfiles=files.concat(ret.files.split(';'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn files;\r\n\t\t\t})(data);\r\n\t\t\t\r\n\t\t\tif(scripts.length){\r\n\t\t\t\trunNext();\r\n\t\t\t}else{\r\n\t\t\t\t//不是laya页面\r\n\t\t\t\talert('Sorry, this is a normal html page. i cant render it yet!\\n'+data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdownloadfile(url+'?rand='+Math.random()*(new Date().valueOf()),\t//优先尝试强制下载。\r\n\t\t\tonStartPageData//on download OK\r\n\t\t\t, function(e){//on download error\r\n\t\t\t\t//如果失败了再尝试有没有打包版的页面数据。\r\n\t\t\t\tdownloadfile(url,onStartPageData//on download OK\r\n\t\t\t\t\t,function(e){//on download error\r\n\t\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\talert('load start page error!url='+url);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tfunction setOrientation(){\r\n\t\tvar nameToVal={\r\n\t\t\tlandscape:0,portrait:1,user:2,behind:3,sensor:4,nosensor:5,sensor_landscape:6,\r\n\t\t\tsensor_portrait:7,reverse_landscape:8,reverse_portrait:9,full_sensor:10,}\r\n\t\tvar nOri = (function(name){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar n = nameToVal[name];\r\n\t\t\t\t\treturn n||0;\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t})(layainfo.screenorientation);\r\n\t\t\t\r\n\t\tif(conchConfig.getScreenOrientation()!=nOri){\r\n\t\t\tconchConfig.setScreenOrientation(nOri);\r\n\t\t}\r\n\t\trunNext();\r\n\t}\r\n\tfunction runConfig()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.configjs )\r\n\t\t\t{\r\n\t\t\t\tvar configJsUrl = layainfo.configjs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( configJsUrl && configJsUrl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tconfigJsUrl = urlobj.resolve(url,configJsUrl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( configJsUrl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download configjs error e=\" + e);runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\tfunction showLogo()\r\n\t{\r\n\t\tif( layainfo )\r\n\t\t{\r\n\t\t\tif( layainfo.logojs )\r\n\t\t\t{\r\n\t\t\t\tlayainfo.bShowLogoJS = true;\r\n\t\t\t\tvar logojsurl = layainfo.logojs;\r\n\t\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\t\tif( logojsurl && logojsurl.indexOf('://')<0 ){//相对路径\r\n\t\t\t\t\tlogojsurl = urlobj.resolve(url,logojsurl);\r\n\t\t\t\t}\r\n\t\t\t\tdownloadfile( logojsurl,function(data){window.eval(data);runNext();},\r\n\t\t\t\t\t\t\t\t\t\tfunction(e){log( \">>>download logjs error e=\" + e);layainfo.bShowLogoJS=false;runNext();});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trunNext();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateDcc(){\r\n\t\tappcache.setResourceID('appurl',urlpath);\r\n\t\tvar curassets = appcache.getResourceID('netassetsid');\r\n\t\tdownloadfile(urlpath+'update/assetsid.txt?rand='+Math.random()*(new Date().valueOf()),//加随机是为了防止不小心把它加入了缓存\r\n\t\t\tfunction(data){\r\n\t\t\t\tif( data!=curassets ){\r\n\t\t\t\t    //下载新的包\r\n\t\t\t\t    //先下载二进制。\r\n\t\t\t\t    var file = new layaHtml5.File(urlpath + 'update/filetable.bin?rand=' + Math.random() * (new Date().valueOf()));\r\n\t\t\t\t    var filereader = new FileReader();\r\n\t\t\t\t\tfilereader.setIgnoreError(true);\r\n\t\t\t\t    filereader.onload = function () {\r\n\t\t\t\t        if (filereader.result instanceof ArrayBuffer) {\r\n\t\t\t\t            idxdata = \"\";\r\n\t\t\t\t            var v = new Uint32Array(filereader.result);\r\n\t\t\t\t\t\t\tif(v[0]!=0xffeeddcc || v[1]!=1){//需要校验\r\n\t\t\t\t\t\t\t\tonloadfterr();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor (var ii = 2, isz = v.length / 2; ii < isz; ii++) \r\n\t\t\t\t\t\t\t\t\tidxdata += v[ii * 2].toString(16) + ' ' + v[ii * 2+1].toString(16)+'\\n';\r\n\t\t\t\t\t\t\t\tappcache.saveFileTable(idxdata);\r\n\t\t\t\t\t\t\t\tappcache = new AppCache(urlpath);\r\n\t\t\t\t\t\t\t\t//设置新的id。只有写完filetable之后才能写这个\r\n\t\t\t\t\t\t\t\tappcache.setResourceID('netassetsid', data);\r\n\t\t\t\t\t\t\t\trunNext();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t        } else { alert('下载filetable.bin失败。类型不对');};\r\n\t\t\t\t    }\r\n\t\t\t\t    function onloadfterr() {\r\n\t\t\t\t        //出错的话，下载文本的\r\n\t\t\t\t        downloadfile(urlpath + 'update/filetable.txt?rand=' + Math.random() * (new Date().valueOf()),\r\n                            function (idxdata) {\r\n                                appcache.saveFileTable(idxdata);\r\n                                appcache = new AppCache(urlpath);\r\n                                //设置新的id。只有写完filetable之后才能写这个\r\n                                appcache.setResourceID('netassetsid', data);\r\n                                runNext();\r\n                            },\r\n                            function (e) {\r\n                                runNext();\r\n                            }, true);\r\n\t\t\t\t    }\r\n\t\t\t\t\tfilereader.onerror = onloadfterr;\r\n\t\t\t\t    filereader.readAsArrayBuffer(file);\r\n\t\t\t\t}else\r\n\t\t\t\t\trunNext();\r\n\t\t\t},\r\n\t\t\tfunction (e) {\r\n                //如果没有assetsid，则去掉校验功能。\r\n\t\t\t    appcache.saveFileTable('');\r\n\t\t\t    appcache = new AppCache(urlpath);\r\n\t\t\t\trunNext();\r\n\t\t\t},true);\t\r\n\t}\r\n\t\r\n\t//下载必须文件\r\n\tfunction predownload(){\r\n\t\tvar num = preloads.length;\r\n\t\tif(num<=0)\r\n\t\t\trunNext();\r\n\t\tfunction preloadret(b){\r\n\t\t\tnum--;\r\n\t\t\tif(num<=0){\r\n\t\t\t\trunNext();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpreloads.forEach(function(f){\r\n\t\t\tvar absurl=f;\r\n\t\t\tvar urlobj = new window.URL(url);\r\n\t\t\tif(absurl.indexOf('://')<0){//相对路径\r\n\t\t\t\tabsurl = urlobj.resolve(url,absurl);\r\n\t\t\t}\r\n\t\t\t//读取二进制文件\r\n\t\t\tvar file = new layaHtml5.File(absurl);\r\n\t\t\tvar filereader = new FileReader();\r\n\t\t\tfilereader.onload=function(){ preloadret(true);}\r\n\t\t\tfilereader.onerror=function(){preloadret(false);}\r\n\t\t\tfilereader.readAsArrayBuffer(file);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction startApp(){\r\n\t\tfunction getIsEval()\r\n\t\t{\r\n\t\t\tif( layainfo.bShowLogoJS == true )\r\n\t\t\t{\r\n\t\t\t\tvar nOldTime = new Date().valueOf();\r\n\t\t\t\tif( conch.getLogoImageState() )\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t\t}\r\n\t\t\t\telse if( new Date().valueOf() - nOldTime > 15000 )\r\n\t\t\t\t{\r\n\t\t\t\t\tdownloadscript();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdownloadscript();\r\n\t\t\t}\r\n\t\t}\r\n\t\t//依次执行所有的js\r\n\t\tfunction downloadscript(){\r\n\t\t\tclearInterval( conch.scriptTimeInterval );\r\n\t\t\tif( scripts.length <= 0 )\r\n\t\t\t\treturn;\r\n\t\t\tvar ssrc=scripts[0];\r\n\t\t\tscripts.shift();\r\n\t\t\tlog('downloadjs:'+ssrc);\t\t\t\r\n\t\t\tdownloadfile(ssrc,scriptret,\r\n\t\t\t\tfunction(e){\r\n\t\t\t\t\tif(androidBridge){\r\n\t\t\t\t\t\tandroidBridge.call('onLoadingEvent','{result:false}');\r\n\t\t\t\t\t}else\t\t\t\t\r\n\t\t\t\t\t\talert('download js error:url='+ssrc);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tfunction scriptret(data){\r\n\t\t\tlog('downloadjs ok');\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\twindow.eval(data);\r\n\t\t\t\tif( !layainfo.bShowLogoJS )\r\n\t\t\t\t{\r\n\t\t\t\t\tconch.showLoadingView( false );\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\talert(e+' '+e.stack);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//scripts.shift();\r\n\t\t\tif(scripts.length<=0){\r\n\t\t\t\tif( window.onload ) window.onload();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsetTimeout(downloadscript,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconch.scriptTimeInterval=setInterval(getIsEval,17);\r\n\t}\r\n\t//需要依次执行的函数\r\n\trunSeqs.seqs=[getPageInfo,setOrientation,updateDcc,runConfig,showLogo,predownload,startApp];\r\n\trunSeqs.run();//这个函数不会退出，直到程序结束\t\t\r\n}"},{"handle":101,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"eval","inferredName":"","resolved":true,"source":"function eval() { [native code] }","script":{"ref":49},"scriptId":4,"position":2096,"line":89,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":327,"type":"string","value":"eval"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function eval() { [native code] }"},{"handle":102,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":328,"type":"error","value":"SyntaxError"},"name":"SyntaxError","inferredName":"","resolved":true,"source":"function SyntaxError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":329,"type":"string","value":"SyntaxError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":328,"type":"error","value":"SyntaxError"}}],"text":"function SyntaxError() { [native code] }"},{"handle":103,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":330,"type":"object","className":"Object"},"name":"createTextureByImgObject","inferredName":"","resolved":true,"source":"function createTextureByImgObject(imgObj){\r\n\r\n\tvar textureObject = webgl.createTexture();\r\n\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\twebgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, imgObj);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n\treturn textureObject;\r\n}","script":{"ref":16},"scriptId":34,"position":5173,"line":149,"column":33,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":331,"type":"string","value":"createTextureByImgObject"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":330,"type":"object","className":"Object"}}],"text":"function createTextureByImgObject(imgObj){\r\n\r\n\tvar textureObject = webgl.createTexture();\r\n\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\twebgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, imgObj);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n\twebgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n\treturn textureObject;\r\n}"},{"handle":104,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":332,"type":"object","className":"Object"},"name":"Float32Array","inferredName":"","resolved":true,"source":"function Float32Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":10235,"line":436,"column":32,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":333,"type":"string","value":"Float32Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":332,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":334,"type":"number","value":4}}],"text":"function Float32Array() { [native code] }"},{"handle":105,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":335,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":335,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":106,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":336,"type":"object","className":"Number"},"name":"Number","inferredName":"","resolved":true,"source":"function Number() { [native code] }","script":{"ref":49},"scriptId":4,"position":23895,"line":1066,"column":26,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":337,"type":"string","value":"Number"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":336,"type":"object","className":"Number"}},{"name":"MAX_VALUE","value":{"ref":338,"type":"number","value":1.7976931348623157e+308}},{"name":"MIN_VALUE","value":{"ref":339,"type":"number","value":5e-324}},{"name":"NaN","value":{"ref":190,"type":"number","value":null}},{"name":"NEGATIVE_INFINITY","value":{"ref":340,"type":"number","value":null}},{"name":"POSITIVE_INFINITY","value":{"ref":132,"type":"number","value":null}},{"name":"isFinite","value":{"ref":341,"type":"function","name":"isFinite","inferredName":"","scriptId":4}},{"name":"isNaN","value":{"ref":342,"type":"function","name":"isNaN","inferredName":"","scriptId":4}}],"text":"function Number() { [native code] }"},{"handle":107,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":343,"type":"object","className":"Object"},"name":"Uint32Array","inferredName":"","resolved":true,"source":"function Uint32Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":7205,"line":308,"column":31,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":344,"type":"string","value":"Uint32Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":343,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":334,"type":"number","value":4}}],"text":"function Uint32Array() { [native code] }"},{"handle":1,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":345,"type":"object","className":"Object"},"name":"","inferredName":"DataBuffer","resolved":true,"source":"function (size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis._length = 0;\r\n\tthis._ALLOC_UNIT=size;\r\n\tthis._littleEndian = littleEndian;\r\n\tthis._dataView = null;\r\n\tthis._byteArray = null;\r\n\tthis._expand_alloc = expand;\r\n\t\r\n\tdebugger;\r\n\r\n\tthis.init=function()\r\n\t{\r\n\t\tthis.ensureWrite(this._ALLOC_UNIT);\r\n\t}\r\n\t\r\n\tthis._resizeBuffer=function(size)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tvar newByteView = new Uint8Array(size);\r\n\t\t\tif (this._byteArray!=null)\r\n\t\t\t{\r\n\t\t\t\tif (this._byteArray.length <=size)\r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray.subarray (0,size));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._byteArray = newByteView;\r\n\t\t\tthis._dataView  = new DataView(newByteView.buffer);\r\n\t\t\t\r\n\t\t\tthis._length = size;\r\n\t\t}\r\n\t\tcatch (err)\r\n\t\t{\r\n\t\t\tthrow \"_resizeBuffer failed resize buffer , size:\"+size;\r\n\t\t}\t\r\n\t}\r\n\r\n\tthis.ensureWrite=function(lengthToEnsure)\r\n\t{\r\n\t\tif (this._length < lengthToEnsure)\r\n\t\t{\r\n\t\t    var times = 1;\r\n\t\t    if ((this._length + this._ALLOC_UNIT) <= lengthToEnsure) {\r\n\t\t        times = parseInt((lengthToEnsure - this._length) / this._ALLOC_UNIT) + 1;\r\n\t\t    }\r\n\t\t    this._resizeBuffer(this._length + this._ALLOC_UNIT * times);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeBoolean=function(value)\r\n\t{\r\n\t\tthis.writeByte(value ? 1 :0);\r\n\t}\r\n\t\r\n\tthis.writeByte=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+1);\r\n\t\tthis._dataView.setInt8 (this._position,value);\r\n\t\tthis._position+=1;\r\n\t}\r\n\t\r\n\tthis.writeBytes=function(bytes,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)throw \"writeBytes error - Out of bounds\";\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=bytes.length-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+length);\r\n\t\tthis._byteArray.set(bytes._byteArray.subarray (offset,offset+length),this._position);\r\n\t\tthis._position+=length;\t\t\r\n\t}\r\n\t\r\n\tthis.writeString=function(str,len)\r\n\t{\r\n\t\tif(str.length==0)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+len);\r\n\t\tfor (var i=0, strLen=str.length; i < strLen; ++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,str.charCodeAt(i));\r\n\t\t\tthis._position++;\r\n\t\t}\t\r\n\t\tfor(var i=strLen;i<len;++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,0);\r\n\t\t\tthis._position++;\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeArrayBuffer=function(arraybuffer,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)\r\n\t\t{\r\n\t\t\tthrow \"writeArrayBuffer error - Out of bounds\";\r\n\t\t}\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=arraybuffer.byteLength-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite(this._position + length);\r\n\t\tvar uint8array = new Uint8Array(arraybuffer, offset, length);\r\n\t\tthis._byteArray.set(uint8array, this._position);\r\n\t\tthis._position += length;\r\n\t}\r\n\t\r\n\tthis.writeFloat=function(x)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setFloat32 (this._position,x,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeInt=function(value)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setInt32(this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeShort=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setInt16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint32=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+4);\r\n\t\tthis._dataView.setUint32 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint16=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setUint16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.reset=function()\r\n\t{\r\n\t\tthis._position = 0;\r\n\t}\r\n\t\r\n\tthis.seek=function(pos)\r\n\t{\r\n\t\tthis._position = pos;\r\n\t}\t\r\n\t\r\n\tthis.getByteArray=function()\r\n\t{\r\n\t\treturn this._byteArray\t\r\n\t}\r\n\t\r\n\tthis.getLength=function()\r\n\t{\r\n\t\treturn this._length;\r\n\t}\r\n\t\r\n\tthis.getOffset=function()\r\n\t{\r\n\t\treturn this._position;\r\n\t}\r\n\t\r\n\tthis.init();\r\n}","script":{"ref":3},"scriptId":32,"position":40,"line":0,"column":40,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":346,"type":"object","className":"Arguments"}},{"name":"caller","value":{"ref":7,"type":"function","name":"","inferredName":"SetupWebglContext","scriptId":32}},{"name":"prototype","value":{"ref":345,"type":"object","className":"Object"}}],"text":"function (size,expand,littleEndian)\r\n{\r\n\tthis._position = 0;\r\n\tthis._length = 0;\r\n\tthis._ALLOC_UNIT=size;\r\n\tthis._littleEndian = littleEndian;\r\n\tthis._dataView = null;\r\n\tthis._byteArray = null;\r\n\tthis._expand_alloc = expand;\r\n\t\r\n\tdebugger;\r\n\r\n\tthis.init=function()\r\n\t{\r\n\t\tthis.ensureWrite(this._ALLOC_UNIT);\r\n\t}\r\n\t\r\n\tthis._resizeBuffer=function(size)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tvar newByteView = new Uint8Array(size);\r\n\t\t\tif (this._byteArray!=null)\r\n\t\t\t{\r\n\t\t\t\tif (this._byteArray.length <=size)\r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tnewByteView.set(this._byteArray.subarray (0,size));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._byteArray = newByteView;\r\n\t\t\tthis._dataView  = new DataView(newByteView.buffer);\r\n\t\t\t\r\n\t\t\tthis._length = size;\r\n\t\t}\r\n\t\tcatch (err)\r\n\t\t{\r\n\t\t\tthrow \"_resizeBuffer failed resize buffer , size:\"+size;\r\n\t\t}\t\r\n\t}\r\n\r\n\tthis.ensureWrite=function(lengthToEnsure)\r\n\t{\r\n\t\tif (this._length < lengthToEnsure)\r\n\t\t{\r\n\t\t    var times = 1;\r\n\t\t    if ((this._length + this._ALLOC_UNIT) <= lengthToEnsure) {\r\n\t\t        times = parseInt((lengthToEnsure - this._length) / this._ALLOC_UNIT) + 1;\r\n\t\t    }\r\n\t\t    this._resizeBuffer(this._length + this._ALLOC_UNIT * times);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeBoolean=function(value)\r\n\t{\r\n\t\tthis.writeByte(value ? 1 :0);\r\n\t}\r\n\t\r\n\tthis.writeByte=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+1);\r\n\t\tthis._dataView.setInt8 (this._position,value);\r\n\t\tthis._position+=1;\r\n\t}\r\n\t\r\n\tthis.writeBytes=function(bytes,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)throw \"writeBytes error - Out of bounds\";\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=bytes.length-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+length);\r\n\t\tthis._byteArray.set(bytes._byteArray.subarray (offset,offset+length),this._position);\r\n\t\tthis._position+=length;\t\t\r\n\t}\r\n\t\r\n\tthis.writeString=function(str,len)\r\n\t{\r\n\t\tif(str.length==0)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ensureWrite (this._position+len);\r\n\t\tfor (var i=0, strLen=str.length; i < strLen; ++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,str.charCodeAt(i));\r\n\t\t\tthis._position++;\r\n\t\t}\t\r\n\t\tfor(var i=strLen;i<len;++i)\r\n\t\t{\r\n\t\t\tthis._dataView.setUint8(this._position,0);\r\n\t\t\tthis._position++;\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.writeArrayBuffer=function(arraybuffer,offset,length)\r\n\t{\r\n\t\t(offset===void 0)&& (offset=0);\r\n\t\t(length===void 0)&& (length=0);\r\n\t\tif (offset < 0 || length < 0)\r\n\t\t{\r\n\t\t\tthrow \"writeArrayBuffer error - Out of bounds\";\r\n\t\t}\r\n\t\tif(length==0)\r\n\t\t{\r\n\t\t\tlength=arraybuffer.byteLength-offset;\r\n\t\t}\r\n\t\tthis.ensureWrite(this._position + length);\r\n\t\tvar uint8array = new Uint8Array(arraybuffer, offset, length);\r\n\t\tthis._byteArray.set(uint8array, this._position);\r\n\t\tthis._position += length;\r\n\t}\r\n\t\r\n\tthis.writeFloat=function(x)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setFloat32 (this._position,x,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeInt=function(value)\r\n\t{\r\n\t\tthis.ensureWrite(this._position+4);\r\n\t\tthis._dataView.setInt32(this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeShort=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setInt16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint32=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+4);\r\n\t\tthis._dataView.setUint32 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=4;\t\t\r\n\t}\r\n\t\r\n\tthis.writeUint16=function(value)\r\n\t{\r\n\t\tthis.ensureWrite (this._position+2);\r\n\t\tthis._dataView.setUint16 (this._position,value,this._littleEndian);\r\n\t\tthis._position+=2;\t\t\r\n\t}\r\n\t\r\n\tthis.reset=function()\r\n\t{\r\n\t\tthis._position = 0;\r\n\t}\r\n\t\r\n\tthis.seek=function(pos)\r\n\t{\r\n\t\tthis._position = pos;\r\n\t}\t\r\n\t\r\n\tthis.getByteArray=function()\r\n\t{\r\n\t\treturn this._byteArray\t\r\n\t}\r\n\t\r\n\tthis.getLength=function()\r\n\t{\r\n\t\treturn this._length;\r\n\t}\r\n\t\r\n\tthis.getOffset=function()\r\n\t{\r\n\t\treturn this._position;\r\n\t}\r\n\t\r\n\tthis.init();\r\n}"},{"handle":108,"type":"number","value":720,"text":"720"},{"handle":109,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":347,"type":"object","className":"Object"},"name":"","inferredName":"exports.setInterval","resolved":true,"source":"function (exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,-1);\r\n\t}","script":{"ref":46},"scriptId":26,"position":2193,"line":96,"column":29,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":347,"type":"object","className":"Object"}}],"text":"function (exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,-1);\r\n\t}"},{"handle":110,"type":"object","className":"Object","constructorFunction":{"ref":348,"type":"function","name":"","inferredName":""},"protoObject":{"ref":349,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"getMarketName","value":{"ref":350,"type":"function","name":"getMarketName","inferredName":""}},{"name":"getPayType","value":{"ref":351,"type":"function","name":"getPayType","inferredName":""}},{"name":"getLoginType","value":{"ref":352,"type":"function","name":"getLoginType","inferredName":""}},{"name":"getChargeType","value":{"ref":353,"type":"function","name":"getChargeType","inferredName":""}},{"name":"setIsClearConchEngineMemory","value":{"ref":354,"type":"function","name":"setIsClearConchEngineMemory","inferredName":""}},{"name":"getEnterPlatformType","value":{"ref":355,"type":"function","name":"getEnterPlatformType","inferredName":""}},{"name":"getIsLogined","value":{"ref":356,"type":"function","name":"getIsLogined","inferredName":""}},{"name":"login","value":{"ref":357,"type":"function","name":"login","inferredName":""}},{"name":"logout","value":{"ref":358,"type":"function","name":"logout","inferredName":""}},{"name":"switchUser","value":{"ref":359,"type":"function","name":"switchUser","inferredName":""}},{"name":"enterPlatform","value":{"ref":360,"type":"function","name":"enterPlatform","inferredName":""}},{"name":"enterBBS","value":{"ref":361,"type":"function","name":"enterBBS","inferredName":""}},{"name":"enterFeedback","value":{"ref":362,"type":"function","name":"enterFeedback","inferredName":""}},{"name":"enterAccountMgr","value":{"ref":363,"type":"function","name":"enterAccountMgr","inferredName":""}},{"name":"authorize","value":{"ref":364,"type":"function","name":"authorize","inferredName":""}},{"name":"refreshToken","value":{"ref":365,"type":"function","name":"refreshToken","inferredName":""}},{"name":"recharge","value":{"ref":366,"type":"function","name":"recharge","inferredName":""}},{"name":"buyProps","value":{"ref":367,"type":"function","name":"buyProps","inferredName":""}},{"name":"setRechargeInfo","value":{"ref":368,"type":"function","name":"setRechargeInfo","inferredName":""}},{"name":"enterShareAndFeed","value":{"ref":369,"type":"function","name":"enterShareAndFeed","inferredName":""}},{"name":"enterInvite","value":{"ref":370,"type":"function","name":"enterInvite","inferredName":""}},{"name":"getGameFriends","value":{"ref":371,"type":"function","name":"getGameFriends","inferredName":""}},{"name":"sendToDesktop","value":{"ref":372,"type":"function","name":"sendToDesktop","inferredName":""}},{"name":"sendMessageToPlatform","value":{"ref":373,"type":"function","name":"sendMessageToPlatform","inferredName":""}},{"name":"canSendToDesktop","value":{"ref":374,"type":"function","name":"canSendToDesktop","inferredName":""}},{"name":"openTopicCircle","value":{"ref":375,"type":"function","name":"openTopicCircle","inferredName":""}},{"name":"writeLocalInfo","value":{"ref":376,"type":"function","name":"writeLocalInfo","inferredName":""}},{"name":"getLocalInfo","value":{"ref":377,"type":"function","name":"getLocalInfo","inferredName":""}}],"text":"#<Object>"},{"handle":56,"type":"number","value":1,"text":"1"},{"handle":61,"type":"number","value":0,"text":"0"},{"handle":111,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":378,"type":"object","className":"Object"},"name":"Float64Array","inferredName":"","resolved":true,"source":"function Float64Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":11762,"line":500,"column":32,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":379,"type":"string","value":"Float64Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":378,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":380,"type":"number","value":8}}],"text":"function Float64Array() { [native code] }"},{"handle":112,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":381,"type":"object","className":"Object"},"name":"Int32Array","inferredName":"","resolved":true,"source":"function Int32Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":8716,"line":372,"column":30,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":382,"type":"string","value":"Int32Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":381,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":334,"type":"number","value":4}}],"text":"function Int32Array() { [native code] }"},{"handle":20,"type":"object","className":"Object","constructorFunction":{"ref":19,"type":"function","name":"","inferredName":""},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"constructor","value":{"ref":19,"type":"function","name":"","inferredName":""}},{"name":"addEventListener","value":{"ref":383,"type":"function","name":"","inferredName":"iagPro.addEventListener","scriptId":18}},{"name":"_lyregOnload","value":{"ref":384,"type":"function","name":"","inferredName":"iagPro._lyregOnload","scriptId":18}},{"name":"onload","value":{"ref":9,"type":"undefined"}}],"text":"#<Object>"},{"handle":113,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":385,"type":"object","className":"Object"},"name":"DataView","inferredName":"","resolved":true,"source":"function DataView() { [native code] }","script":{"ref":70},"scriptId":15,"position":17074,"line":738,"column":28,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":386,"type":"string","value":"DataView"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":385,"type":"object","className":"Object"}}],"text":"function DataView() { [native code] }"},{"handle":12,"type":"null","text":"null"},{"handle":114,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":387,"type":"error","value":"URIError"},"name":"URIError","inferredName":"","resolved":true,"source":"function URIError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":388,"type":"string","value":"URIError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":387,"type":"error","value":"URIError"}}],"text":"function URIError() { [native code] }"},{"handle":6,"type":"object","className":"global","constructorFunction":{"ref":65,"type":"function","name":"","inferredName":""},"protoObject":{"ref":10,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[],"text":"#<global>"},{"handle":115,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":389,"type":"object","className":"Object"},"name":"DOMParser","inferredName":"","resolved":true,"source":"function DOMParser()\r\n\t{\r\n\t\tthis._parser=new _DOMParser();\r\n\t}","script":{"ref":42},"scriptId":33,"position":75,"line":3,"column":19,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":390,"type":"string","value":"DOMParser"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":389,"type":"object","className":"Object"}}],"text":"function DOMParser()\r\n\t{\r\n\t\tthis._parser=new _DOMParser();\r\n\t}"},{"handle":116,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":391,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":391,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":117,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":392,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":392,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":118,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":393,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":393,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":9,"type":"undefined","text":"undefined"},{"handle":119,"type":"object","className":"Object","constructorFunction":{"ref":394,"type":"function","name":"","inferredName":"history","scriptId":28},"protoObject":{"ref":395,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"back","value":{"ref":396,"type":"function","name":"","inferredName":"back","scriptId":28}},{"name":"forward","value":{"ref":397,"type":"function","name":"","inferredName":"forward","scriptId":28}}],"text":"#<Object>"},{"handle":120,"type":"object","className":"Float32Array","constructorFunction":{"ref":104,"type":"function","name":"Float32Array","inferredName":"","scriptId":15},"protoObject":{"ref":332,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":0,"value":{"ref":61,"type":"number","value":0}},{"name":1,"value":{"ref":61,"type":"number","value":0}},{"name":2,"value":{"ref":61,"type":"number","value":0}},{"name":3,"value":{"ref":61,"type":"number","value":0}},{"name":4,"value":{"ref":61,"type":"number","value":0}},{"name":5,"value":{"ref":61,"type":"number","value":0}},{"name":6,"value":{"ref":61,"type":"number","value":0}},{"name":7,"value":{"ref":61,"type":"number","value":0}},{"name":8,"value":{"ref":61,"type":"number","value":0}},{"name":9,"value":{"ref":61,"type":"number","value":0}},{"name":10,"value":{"ref":61,"type":"number","value":0}},{"name":11,"value":{"ref":61,"type":"number","value":0}},{"name":12,"value":{"ref":61,"type":"number","value":0}},{"name":13,"value":{"ref":61,"type":"number","value":0}},{"name":14,"value":{"ref":61,"type":"number","value":0}},{"name":15,"value":{"ref":61,"type":"number","value":0}},{"name":16,"value":{"ref":61,"type":"number","value":0}},{"name":17,"value":{"ref":61,"type":"number","value":0}},{"name":18,"value":{"ref":61,"type":"number","value":0}},{"name":19,"value":{"ref":61,"type":"number","value":0}},{"name":20,"value":{"ref":61,"type":"number","value":0}},{"name":21,"value":{"ref":61,"type":"number","value":0}},{"name":22,"value":{"ref":61,"type":"number","value":0}},{"name":23,"value":{"ref":61,"type":"number","value":0}},{"name":24,"value":{"ref":61,"type":"number","value":0}},{"name":25,"value":{"ref":61,"type":"number","value":0}},{"name":26,"value":{"ref":61,"type":"number","value":0}},{"name":27,"value":{"ref":61,"type":"number","value":0}},{"name":28,"value":{"ref":61,"type":"number","value":0}},{"name":29,"value":{"ref":61,"type":"number","value":0}},{"name":30,"value":{"ref":61,"type":"number","value":0}},{"name":31,"value":{"ref":61,"type":"number","value":0}},{"name":32,"value":{"ref":61,"type":"number","value":0}},{"name":33,"value":{"ref":61,"type":"number","value":0}},{"name":34,"value":{"ref":61,"type":"number","value":0}},{"name":35,"value":{"ref":61,"type":"number","value":0}},{"name":36,"value":{"ref":61,"type":"number","value":0}},{"name":37,"value":{"ref":61,"type":"number","value":0}},{"name":38,"value":{"ref":61,"type":"number","value":0}},{"name":39,"value":{"ref":61,"type":"number","value":0}},{"name":40,"value":{"ref":61,"type":"number","value":0}},{"name":41,"value":{"ref":61,"type":"number","value":0}},{"name":42,"value":{"ref":61,"type":"number","value":0}},{"name":43,"value":{"ref":61,"type":"number","value":0}},{"name":44,"value":{"ref":61,"type":"number","value":0}},{"name":45,"value":{"ref":61,"type":"number","value":0}},{"name":46,"value":{"ref":61,"type":"number","value":0}},{"name":47,"value":{"ref":61,"type":"number","value":0}}],"text":"#<Float32Array>"},{"handle":121,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":398,"type":"object","className":"Object"},"name":"","inferredName":"ProgramLocationTable","resolved":true,"source":"function ()\r\n{\r\n\tthis.FADELOC_BASE = 50000;\r\n\tthis._obj = {};\r\n\tthis.getFadeLocation = function(fadeProgramID,name)\r\n\t{\r\n\t\tvar key = fadeProgramID+\"-\"+name;\r\n\t\tvar fadeID = this._obj[key];\r\n\t\tif( fadeID == undefined)\r\n\t\t{\r\n\t\t\tfadeID = this.FADELOC_BASE;\r\n\t\t\tthis.FADELOC_BASE++;\r\n\t\t\tthis._obj[key] = fadeID;\r\n\t\t}\r\n\t\treturn fadeID;\r\n\t}\r\n}","script":{"ref":3},"scriptId":32,"position":4515,"line":204,"column":31,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":398,"type":"object","className":"Object"}}],"text":"function ()\r\n{\r\n\tthis.FADELOC_BASE = 50000;\r\n\tthis._obj = {};\r\n\tthis.getFadeLocation = function(fadeProgramID,name)\r\n\t{\r\n\t\tvar key = fadeProgramID+\"-\"+name;\r\n\t\tvar fadeID = this._obj[key];\r\n\t\tif( fadeID == undefined)\r\n\t\t{\r\n\t\t\tfadeID = this.FADELOC_BASE;\r\n\t\t\tthis.FADELOC_BASE++;\r\n\t\t\tthis._obj[key] = fadeID;\r\n\t\t}\r\n\t\treturn fadeID;\r\n\t}\r\n}"},{"handle":122,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":399,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":399,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":123,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":400,"type":"object","className":"Object"},"name":"Uint8ClampedArray","inferredName":"","resolved":true,"source":"function Uint8ClampedArray() { [native code] }","script":{"ref":70},"scriptId":15,"position":13319,"line":564,"column":37,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":401,"type":"string","value":"Uint8ClampedArray"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":400,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":56,"type":"number","value":1}}],"text":"function Uint8ClampedArray() { [native code] }"},{"handle":124,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":402,"type":"object","className":"Object"},"name":"","inferredName":"exports.log","resolved":true,"source":"function (m){ console.log(m);}","script":{"ref":26},"scriptId":22,"position":146,"line":5,"column":20,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":402,"type":"object","className":"Object"}}],"text":"function (m){ console.log(m);}"},{"handle":125,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":403,"type":"object","className":"Object"},"name":"","inferredName":"exports.clearInterval","resolved":true,"source":"function (tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}","script":{"ref":46},"scriptId":26,"position":2294,"line":100,"column":31,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":403,"type":"object","className":"Object"}}],"text":"function (tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}"},{"handle":126,"type":"object","className":"Object","constructorFunction":{"ref":404,"type":"function","name":"","inferredName":""},"protoObject":{"ref":405,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"style","value":{"ref":271,"type":"string","value":""}},{"name":"height","value":{"ref":108,"type":"number","value":720}},{"name":"width","value":{"ref":183,"type":"number","value":1280}},{"name":"conchThisID","value":{"ref":406,"type":"number","value":126782104}},{"name":"getThisID","value":{"ref":407,"type":"function","name":"getThisID","inferredName":""}},{"name":"imgId","value":{"ref":408,"type":"function","name":"imgId","inferredName":""}},{"name":"isCanvas","value":{"ref":409,"type":"function","name":"isCanvas","inferredName":""}},{"name":"setSize","value":{"ref":410,"type":"function","name":"setSize","inferredName":""}},{"name":"getContext","value":{"ref":411,"type":"function","name":"getContext","inferredName":""}}],"text":"#<Object>"},{"handle":127,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":412,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":412,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":128,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":413,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":413,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":129,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":414,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":414,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":130,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"File","value":{"ref":127,"type":"function","name":"","inferredName":""}}],"text":"#<Object>"},{"handle":131,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":415,"type":"object","className":"Object"},"name":"","inferredName":"ConchVirtualBitmap","resolved":true,"source":"function (){\r\n\tvar ret = new _ConchVirtualBitmap();\r\n\tret.setImage=function(img){\r\n\t\tret._setImage(img);\r\n\t\tret._img=img;\r\n\t}\r\n\tret.getImage=function(){\r\n\t\treturn ret._img;\r\n\t}\r\n\tret.clone=function()\r\n\t{\r\n\t\tvar result=this._clone();\r\n\t\tresult._img = this._img;\r\n\t\tresult.setImage=function(img){\r\n\t\t\tthis._setImage(img);\r\n\t\t\tthis._img=img;\r\n\t\t}\r\n\t\tresult.getImage=function(){\r\n\t\t\treturn this._img;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\treturn ret;\r\n}","script":{"ref":22},"scriptId":18,"position":2863,"line":120,"column":33,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":415,"type":"object","className":"Object"}}],"text":"function (){\r\n\tvar ret = new _ConchVirtualBitmap();\r\n\tret.setImage=function(img){\r\n\t\tret._setImage(img);\r\n\t\tret._img=img;\r\n\t}\r\n\tret.getImage=function(){\r\n\t\treturn ret._img;\r\n\t}\r\n\tret.clone=function()\r\n\t{\r\n\t\tvar result=this._clone();\r\n\t\tresult._img = this._img;\r\n\t\tresult.setImage=function(img){\r\n\t\t\tthis._setImage(img);\r\n\t\t\tthis._img=img;\r\n\t\t}\r\n\t\tresult.getImage=function(){\r\n\t\t\treturn this._img;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\treturn ret;\r\n}"},{"handle":132,"type":"number","value":"Infinity","text":"Infinity"},{"handle":133,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":416,"type":"object","className":"Object"},"name":"Int8Array","inferredName":"","resolved":true,"source":"function Int8Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":2672,"line":116,"column":29,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":417,"type":"string","value":"Int8Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":416,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":56,"type":"number","value":1}}],"text":"function Int8Array() { [native code] }"},{"handle":134,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":418,"type":"object","className":"Object"},"name":"downloadfile","inferredName":"","resolved":true,"source":"function downloadfile(url, force,onok,onerr)\r\n{\r\n\tif(force){\r\n\t\turl=(function(url){\r\n\t\t\tvar ret=url;\r\n\t\t\tif(url.indexOf('?')<0){\r\n\t\t\t\tret = url+'?rnd='+Math.random();\r\n\t\t\t}else{\r\n\t\t\t\tret = url+'&downloadrnd'+Math.random().toString().substr(2)+'=1';\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t})(url);\r\n\t}\r\n\tvar file = new layaHtml5.File(url);\r\n\tvar filereader = new FileReader();\r\n\tfilereader.onload=function(){ onok(filereader.result);}\r\n\tfilereader.onerror=function(){onerr();}\r\n\tfilereader.readAsText(file);\r\n}","script":{"ref":22},"scriptId":18,"position":14364,"line":549,"column":21,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":334,"type":"number","value":4}},{"name":"name","value":{"ref":419,"type":"string","value":"downloadfile"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":418,"type":"object","className":"Object"}}],"text":"function downloadfile(url, force,onok,onerr)\r\n{\r\n\tif(force){\r\n\t\turl=(function(url){\r\n\t\t\tvar ret=url;\r\n\t\t\tif(url.indexOf('?')<0){\r\n\t\t\t\tret = url+'?rnd='+Math.random();\r\n\t\t\t}else{\r\n\t\t\t\tret = url+'&downloadrnd'+Math.random().toString().substr(2)+'=1';\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t})(url);\r\n\t}\r\n\tvar file = new layaHtml5.File(url);\r\n\tvar filereader = new FileReader();\r\n\tfilereader.onload=function(){ onok(filereader.result);}\r\n\tfilereader.onerror=function(){onerr();}\r\n\tfilereader.readAsText(file);\r\n}"},{"handle":135,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":420,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":420,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":136,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":421,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":421,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":137,"type":"object","className":"Uint16Array","constructorFunction":{"ref":238,"type":"function","name":"Uint16Array","inferredName":"","scriptId":15},"protoObject":{"ref":422,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":0,"value":{"ref":61,"type":"number","value":0}},{"name":1,"value":{"ref":61,"type":"number","value":0}},{"name":2,"value":{"ref":61,"type":"number","value":0}},{"name":3,"value":{"ref":61,"type":"number","value":0}},{"name":4,"value":{"ref":61,"type":"number","value":0}},{"name":5,"value":{"ref":61,"type":"number","value":0}},{"name":6,"value":{"ref":61,"type":"number","value":0}},{"name":7,"value":{"ref":61,"type":"number","value":0}},{"name":8,"value":{"ref":61,"type":"number","value":0}},{"name":9,"value":{"ref":61,"type":"number","value":0}},{"name":10,"value":{"ref":61,"type":"number","value":0}},{"name":11,"value":{"ref":61,"type":"number","value":0}},{"name":12,"value":{"ref":61,"type":"number","value":0}},{"name":13,"value":{"ref":61,"type":"number","value":0}},{"name":14,"value":{"ref":61,"type":"number","value":0}},{"name":15,"value":{"ref":61,"type":"number","value":0}},{"name":16,"value":{"ref":61,"type":"number","value":0}},{"name":17,"value":{"ref":61,"type":"number","value":0}}],"text":"#<Uint16Array>"},{"handle":138,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":423,"type":"object","className":"Object"},"name":"","inferredName":"IdGenerator","resolved":true,"source":"function ()\r\n{\r\n    this.FADE_ID_SEED = 0;\r\n    this.recycle_ids=[];\r\n    this.recycle = function (id)\r\n    {\r\n        for (var i = 0; i < id.length; ++i)\r\n        {\r\n            this.recycle_ids.push(id[i]);\r\n        }\r\n    }\r\n\r\n\tthis.createFadeID = function()\r\n\t{\r\n\t    var id = this.recycle_ids.pop();\r\n\t    if (id == null || id == undefined) {\r\n\t        return ++this.FADE_ID_SEED;\r\n\t    }\r\n\t    return id;\r\n\t}\r\n}","script":{"ref":3},"scriptId":32,"position":4072,"line":182,"column":22,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":423,"type":"object","className":"Object"}}],"text":"function ()\r\n{\r\n    this.FADE_ID_SEED = 0;\r\n    this.recycle_ids=[];\r\n    this.recycle = function (id)\r\n    {\r\n        for (var i = 0; i < id.length; ++i)\r\n        {\r\n            this.recycle_ids.push(id[i]);\r\n        }\r\n    }\r\n\r\n\tthis.createFadeID = function()\r\n\t{\r\n\t    var id = this.recycle_ids.pop();\r\n\t    if (id == null || id == undefined) {\r\n\t        return ++this.FADE_ID_SEED;\r\n\t    }\r\n\t    return id;\r\n\t}\r\n}"},{"handle":139,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":424,"type":"object","className":"Object"},"name":"initDataBuffer","inferredName":"","resolved":true,"source":"function initDataBuffer()\r\n{\t\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tg_vertice_buffer[i*16+2] = 0.0;\r\n\t\tg_vertice_buffer[i*16+3] = 0.0;\r\n\t\tg_vertice_buffer[i*16+6] = 1.0;\r\n\t\tg_vertice_buffer[i*16+7] = 0.0;\t\t\r\n\t\tg_vertice_buffer[i*16+10] = 1.0;\r\n\t\tg_vertice_buffer[i*16+11] = 1.0;\t\t\t\r\n\t\tg_vertice_buffer[i*16+14] = 0.0;\r\n\t\tg_vertice_buffer[i*16+15] = 1.0;\t\r\n\r\n\t\tg_index_buffer[i*6+0] = i*4+0;\t\r\n\t\tg_index_buffer[i*6+1] = i*4+1;\r\n\t\tg_index_buffer[i*6+2] = i*4+2;\r\n\t\tg_index_buffer[i*6+3] = i*4+0;\r\n\t\tg_index_buffer[i*6+4] = i*4+2;\r\n\t\tg_index_buffer[i*6+5] = i*4+3;\t\t\r\n\t}\t\r\n\r\n\t//1 create vertex buffer\r\n\tVBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\r\n\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\r\n\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \r\n\r\n\t//2 create index buffer\r\n\tIBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\twebgl.bufferData(webgl.ELEMENT_ARRAY_BUFFER, g_index_buffer, webgl.STATIC_DRAW);\r\n}","script":{"ref":16},"scriptId":34,"position":3694,"line":101,"column":23,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":425,"type":"string","value":"initDataBuffer"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":424,"type":"object","className":"Object"}}],"text":"function initDataBuffer()\r\n{\t\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tg_vertice_buffer[i*16+2] = 0.0;\r\n\t\tg_vertice_buffer[i*16+3] = 0.0;\r\n\t\tg_vertice_buffer[i*16+6] = 1.0;\r\n\t\tg_vertice_buffer[i*16+7] = 0.0;\t\t\r\n\t\tg_vertice_buffer[i*16+10] = 1.0;\r\n\t\tg_vertice_buffer[i*16+11] = 1.0;\t\t\t\r\n\t\tg_vertice_buffer[i*16+14] = 0.0;\r\n\t\tg_vertice_buffer[i*16+15] = 1.0;\t\r\n\r\n\t\tg_index_buffer[i*6+0] = i*4+0;\t\r\n\t\tg_index_buffer[i*6+1] = i*4+1;\r\n\t\tg_index_buffer[i*6+2] = i*4+2;\r\n\t\tg_index_buffer[i*6+3] = i*4+0;\r\n\t\tg_index_buffer[i*6+4] = i*4+2;\r\n\t\tg_index_buffer[i*6+5] = i*4+3;\t\t\r\n\t}\t\r\n\r\n\t//1 create vertex buffer\r\n\tVBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\r\n\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\r\n\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \r\n\r\n\t//2 create index buffer\r\n\tIBO = webgl.createBuffer();\r\n\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\twebgl.bufferData(webgl.ELEMENT_ARRAY_BUFFER, g_index_buffer, webgl.STATIC_DRAW);\r\n}"},{"handle":140,"type":"object","className":"Array","constructorFunction":{"ref":90,"type":"function","name":"Array","inferredName":""},"protoObject":{"ref":297,"type":"object","className":"Array"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}}],"text":"#<Array>"},{"handle":141,"type":"object","className":"Object","constructorFunction":{"ref":426,"type":"function","name":"","inferredName":""},"protoObject":{"ref":427,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"enableCache","value":{"ref":5,"type":"boolean","value":true}},{"name":"cacheSize","value":{"ref":61,"type":"number","value":0}},{"name":"update","value":{"ref":428,"type":"function","name":"update","inferredName":""}},{"name":"url2Local","value":{"ref":429,"type":"function","name":"url2Local","inferredName":""}},{"name":"getResourceID","value":{"ref":430,"type":"function","name":"getResourceID","inferredName":""}},{"name":"setResourceID","value":{"ref":431,"type":"function","name":"setResourceID","inferredName":""}},{"name":"saveFileTable","value":{"ref":432,"type":"function","name":"saveFileTable","inferredName":""}},{"name":"loadCachedURL","value":{"ref":433,"type":"function","name":"loadCachedURL","inferredName":""}}],"text":"#<Object>"},{"handle":142,"type":"object","className":"Object","constructorFunction":{"ref":19,"type":"function","name":"","inferredName":""},"protoObject":{"ref":20,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"complete","value":{"ref":5,"type":"boolean","value":true}},{"name":"onerror","value":{"ref":12,"type":"null","value":null}},{"name":"onload","value":{"ref":12,"type":"null","value":null}},{"name":"_onload","value":{"ref":12,"type":"null","value":null}},{"name":"src","value":{"ref":434,"type":"string","value":"http://localhost:8899/MyTest/webgl-benchmark-conch/images/6.png"}},{"name":"height","value":{"ref":435,"type":"number","value":92}},{"name":"width","value":{"ref":436,"type":"number","value":89}},{"name":"imgId","value":{"ref":437,"type":"number","value":126729256}},{"name":"conchThisID","value":{"ref":438,"type":"number","value":126720712}},{"name":"setSrc","value":{"ref":321,"type":"function","name":"setSrc","inferredName":""}},{"name":"getImageData","value":{"ref":322,"type":"function","name":"getImageData","inferredName":""}},{"name":"rect","value":{"ref":323,"type":"function","name":"rect","inferredName":""}}],"text":"#<Object>"},{"handle":55,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":11,"type":"object","className":"Object"},"name":"Object","inferredName":"","resolved":true,"source":"function Object() { [native code] }","script":{"ref":49},"scriptId":4,"position":21570,"line":983,"column":26,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":439,"type":"string","value":"Object"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":11,"type":"object","className":"Object"}},{"name":"keys","value":{"ref":440,"type":"function","name":"keys","inferredName":"","scriptId":4}},{"name":"create","value":{"ref":441,"type":"function","name":"create","inferredName":"","scriptId":4}},{"name":"defineProperty","value":{"ref":442,"type":"function","name":"defineProperty","inferredName":"","scriptId":4}},{"name":"defineProperties","value":{"ref":443,"type":"function","name":"defineProperties","inferredName":"","scriptId":4}},{"name":"freeze","value":{"ref":444,"type":"function","name":"freeze","inferredName":"","scriptId":4}},{"name":"getPrototypeOf","value":{"ref":445,"type":"function","name":"getPrototypeOf","inferredName":"","scriptId":4}},{"name":"getOwnPropertyDescriptor","value":{"ref":446,"type":"function","name":"getOwnPropertyDescriptor","inferredName":"","scriptId":4}},{"name":"getOwnPropertyNames","value":{"ref":447,"type":"function","name":"getOwnPropertyNames","inferredName":"","scriptId":4}},{"name":"is","value":{"ref":448,"type":"function","name":"is","inferredName":"","scriptId":4}},{"name":"isExtensible","value":{"ref":449,"type":"function","name":"isExtensible","inferredName":"","scriptId":4}},{"name":"isFrozen","value":{"ref":450,"type":"function","name":"isFrozen","inferredName":"","scriptId":4}},{"name":"isSealed","value":{"ref":451,"type":"function","name":"isSealed","inferredName":"","scriptId":4}},{"name":"preventExtensions","value":{"ref":452,"type":"function","name":"preventExtensions","inferredName":"","scriptId":4}},{"name":"seal","value":{"ref":453,"type":"function","name":"seal","inferredName":"","scriptId":4}}],"text":"function Object() { [native code] }"},{"handle":143,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"decodeURIComponent","inferredName":"","resolved":true,"source":"function decodeURIComponent() { [native code] }","script":{"ref":145},"scriptId":7,"position":4705,"line":232,"column":27,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":454,"type":"string","value":"decodeURIComponent"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function decodeURIComponent() { [native code] }"},{"handle":146,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":455,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":455,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":147,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":456,"type":"object","className":"Object"},"name":"ArrayBuffer","inferredName":"","resolved":true,"source":"function ArrayBuffer() { [native code] }","script":{"ref":149},"scriptId":14,"position":83,"line":3,"column":31,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":457,"type":"string","value":"ArrayBuffer"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":456,"type":"object","className":"Object"}},{"name":"isView","value":{"ref":458,"type":"function","name":"isView","inferredName":"","scriptId":14}}],"text":"function ArrayBuffer() { [native code] }"},{"handle":150,"type":"object","className":"Object","constructorFunction":{"ref":459,"type":"function","name":"","inferredName":""},"protoObject":{"ref":460,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"log","value":{"ref":461,"type":"function","name":"log","inferredName":""}}],"text":"#<Object>"},{"handle":151,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"decodeURI","inferredName":"","resolved":true,"source":"function decodeURI() { [native code] }","script":{"ref":145},"scriptId":7,"position":4414,"line":218,"column":18,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":462,"type":"string","value":"decodeURI"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function decodeURI() { [native code] }"},{"handle":152,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":463,"type":"object","className":"Object"},"name":"","inferredName":"exports.open","resolved":true,"source":"function (url){\r\n\tcreateProcess('scripts/index.js',url);\r\n}","script":{"ref":26},"scriptId":22,"position":363,"line":20,"column":21,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":463,"type":"object","className":"Object"}}],"text":"function (url){\r\n\tcreateProcess('scripts/index.js',url);\r\n}"},{"handle":153,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":464,"type":"object","className":"Object"},"name":"Int16Array","inferredName":"","resolved":true,"source":"function Int16Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":5692,"line":244,"column":30,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":465,"type":"string","value":"Int16Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":464,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":283,"type":"number","value":2}}],"text":"function Int16Array() { [native code] }"},{"handle":154,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":466,"type":"object","className":"Date"},"name":"Date","inferredName":"","resolved":true,"source":"function Date() { [native code] }","script":{"ref":156},"scriptId":11,"position":1647,"line":59,"column":24,"scopes":[],"properties":[{"name":"length","value":{"ref":467,"type":"number","value":7}},{"name":"name","value":{"ref":468,"type":"string","value":"Date"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":466,"type":"object","className":"Date"}},{"name":"UTC","value":{"ref":469,"type":"function","name":"UTC","inferredName":"","scriptId":11}},{"name":"parse","value":{"ref":470,"type":"function","name":"parse","inferredName":"","scriptId":11}},{"name":"now","value":{"ref":471,"type":"function","name":"now","inferredName":"","scriptId":11}}],"text":"function Date() { [native code] }"},{"handle":157,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":472,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":472,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":158,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":473,"type":"regexp","value":"/(?:)/"},"name":"RegExp","inferredName":"","resolved":true,"source":"function RegExp() { [native code] }","script":{"ref":160},"scriptId":13,"position":848,"line":45,"column":26,"scopes":[],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":474,"type":"string","value":"RegExp"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":473,"type":"regexp","value":"/(?:)/"}},{"name":"input","value":{"ref":9,"type":"undefined"}},{"name":"$_","value":{"ref":9,"type":"undefined"}},{"name":"$input","value":{"ref":9,"type":"undefined"}},{"name":"multiline","value":{"ref":9,"type":"undefined"}},{"name":"$*","value":{"ref":9,"type":"undefined"}},{"name":"lastMatch","value":{"ref":9,"type":"undefined"}},{"name":"$&","value":{"ref":9,"type":"undefined"}},{"name":"lastParen","value":{"ref":9,"type":"undefined"}},{"name":"$+","value":{"ref":9,"type":"undefined"}},{"name":"leftContext","value":{"ref":9,"type":"undefined"}},{"name":"$`","value":{"ref":9,"type":"undefined"}},{"name":"rightContext","value":{"ref":9,"type":"undefined"}},{"name":"$'","value":{"ref":9,"type":"undefined"}},{"name":"$1","value":{"ref":9,"type":"undefined"}},{"name":"$2","value":{"ref":9,"type":"undefined"}},{"name":"$3","value":{"ref":9,"type":"undefined"}},{"name":"$4","value":{"ref":9,"type":"undefined"}},{"name":"$5","value":{"ref":9,"type":"undefined"}},{"name":"$6","value":{"ref":9,"type":"undefined"}},{"name":"$7","value":{"ref":9,"type":"undefined"}},{"name":"$8","value":{"ref":9,"type":"undefined"}},{"name":"$9","value":{"ref":9,"type":"undefined"}}],"text":"function RegExp() { [native code] }"},{"handle":161,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"isFinite","inferredName":"","resolved":true,"source":"function isFinite() { [native code] }","script":{"ref":49},"scriptId":4,"position":1270,"line":57,"column":23,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":475,"type":"string","value":"isFinite"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function isFinite() { [native code] }"},{"handle":162,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":476,"type":"object","className":"Object"},"name":"include","inferredName":"","resolved":true,"source":"function include(file){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\ttry{\r\n\t\teval( fc);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}","script":{"ref":22},"scriptId":18,"position":1475,"line":67,"column":16,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":477,"type":"string","value":"include"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":476,"type":"object","className":"Object"}}],"text":"function include(file){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\ttry{\r\n\t\teval( fc);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}"},{"handle":163,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":478,"type":"object","className":"Object"},"name":"initTexrures","inferredName":"","resolved":true,"source":"function initTexrures(){\r\n\tfor(var i=0,sz=g_images.length;i<sz;i++)\r\n\t{\r\n\t\tvar tex = createTextureByImgObject(g_images[i]);\r\n\t\tg_texIDs.push(tex);\r\n        \r\n        var canTex = genCanvasTexture(i);\r\n        g_texCanvasIDs.push(canTex);\r\n\t}\t\r\n}","script":{"ref":16},"scriptId":34,"position":4912,"line":138,"column":21,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":479,"type":"string","value":"initTexrures"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":478,"type":"object","className":"Object"}}],"text":"function initTexrures(){\r\n\tfor(var i=0,sz=g_images.length;i<sz;i++)\r\n\t{\r\n\t\tvar tex = createTextureByImgObject(g_images[i]);\r\n\t\tg_texIDs.push(tex);\r\n        \r\n        var canTex = genCanvasTexture(i);\r\n        g_texCanvasIDs.push(canTex);\r\n\t}\t\r\n}"},{"handle":164,"type":"object","className":"Math","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"E","value":{"ref":480,"type":"number","value":2.718281828459045}},{"name":"LN10","value":{"ref":481,"type":"number","value":2.302585092994046}},{"name":"LN2","value":{"ref":482,"type":"number","value":0.6931471805599453}},{"name":"LOG2E","value":{"ref":483,"type":"number","value":1.4426950408889634}},{"name":"LOG10E","value":{"ref":484,"type":"number","value":0.4342944819032518}},{"name":"PI","value":{"ref":485,"type":"number","value":3.141592653589793}},{"name":"SQRT1_2","value":{"ref":486,"type":"number","value":0.7071067811865476}},{"name":"SQRT2","value":{"ref":487,"type":"number","value":1.4142135623730951}},{"name":"random","value":{"ref":488,"type":"function","name":"random","inferredName":"","scriptId":8}},{"name":"abs","value":{"ref":491,"type":"function","name":"abs","inferredName":"","scriptId":8}},{"name":"acos","value":{"ref":492,"type":"function","name":"acos","inferredName":"","scriptId":8}},{"name":"asin","value":{"ref":493,"type":"function","name":"asin","inferredName":"","scriptId":8}},{"name":"atan","value":{"ref":494,"type":"function","name":"atan","inferredName":"","scriptId":8}},{"name":"ceil","value":{"ref":495,"type":"function","name":"ceil","inferredName":"","scriptId":8}},{"name":"cos","value":{"ref":496,"type":"function","name":"cos","inferredName":"","scriptId":8}},{"name":"exp","value":{"ref":497,"type":"function","name":"exp","inferredName":"","scriptId":8}},{"name":"floor","value":{"ref":498,"type":"function","name":"floor","inferredName":"","scriptId":8}},{"name":"log","value":{"ref":499,"type":"function","name":"log","inferredName":"","scriptId":8}},{"name":"round","value":{"ref":500,"type":"function","name":"round","inferredName":"","scriptId":8}},{"name":"sin","value":{"ref":501,"type":"function","name":"sin","inferredName":"","scriptId":8}},{"name":"sqrt","value":{"ref":502,"type":"function","name":"sqrt","inferredName":"","scriptId":8}},{"name":"tan","value":{"ref":503,"type":"function","name":"tan","inferredName":"","scriptId":8}},{"name":"atan2","value":{"ref":504,"type":"function","name":"atan2","inferredName":"","scriptId":8}},{"name":"pow","value":{"ref":505,"type":"function","name":"pow","inferredName":"","scriptId":8}},{"name":"max","value":{"ref":506,"type":"function","name":"max","inferredName":"","scriptId":8}},{"name":"min","value":{"ref":507,"type":"function","name":"min","inferredName":"","scriptId":8}},{"name":"imul","value":{"ref":508,"type":"function","name":"imul","inferredName":"","scriptId":8}}],"text":"#<Object>"},{"handle":165,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":509,"type":"object","className":"Object"},"name":"","inferredName":"exports.stopTimeout","resolved":true,"source":"function (tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}","script":{"ref":46},"scriptId":26,"position":2122,"line":92,"column":29,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":509,"type":"object","className":"Object"}}],"text":"function (tm){\r\n\t\tgTimerQueue.delTimer(tm);\r\n\t}"},{"handle":166,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":510,"type":"object","className":"Object"},"name":"","inferredName":"ws","resolved":true,"source":"function (url){\r\n\t\tvar ret = new _WebSocket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}","script":{"ref":44},"scriptId":29,"position":146,"line":6,"column":18,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":0,"index":2}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":510,"type":"object","className":"Object"}}],"text":"function (url){\r\n\t\tvar ret = new _WebSocket(url);\r\n\t\tret._onmessage=function(obj){\r\n\t\t\tret.onmessage(new msgdata(obj));\t//每次都new，本来想只new一个，但那样容易出错，例如如果被保存了，就会被后面的消息修改。\r\n\t\t}\r\n\t\treturn ret;\r\n\t}"},{"handle":167,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":511,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":511,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":168,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":512,"type":"object","className":"Object"},"name":"gc","inferredName":"","resolved":true,"source":"function gc() { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":513,"type":"string","value":"gc"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":512,"type":"object","className":"Object"}}],"text":"function gc() { [native code] }"},{"handle":169,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":514,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":514,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":170,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":515,"type":"object","className":"Object"},"name":"","inferredName":"exports.requestAnimationFrame","resolved":true,"source":"function (updatefunc){\r\n\t\tvar id = animfrm++;\r\n\t\tgTimerQueue.AniFrame.push({id:id,func:updatefunc});\r\n\t\tif(!gTimerQueue.AniFrameStTm)\r\n\t\t\tgTimerQueue.AniFrameStTm=tmGetCurms();\r\n\t\treturn id;\r\n\t}","script":{"ref":46},"scriptId":26,"position":2393,"line":105,"column":39,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":515,"type":"object","className":"Object"}}],"text":"function (updatefunc){\r\n\t\tvar id = animfrm++;\r\n\t\tgTimerQueue.AniFrame.push({id:id,func:updatefunc});\r\n\t\tif(!gTimerQueue.AniFrameStTm)\r\n\t\t\tgTimerQueue.AniFrameStTm=tmGetCurms();\r\n\t\treturn id;\r\n\t}"},{"handle":171,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":516,"type":"object","className":"Object"},"name":"","inferredName":"exports.setTimeout","resolved":true,"source":"function (exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,1);\r\n\t}","script":{"ref":46},"scriptId":26,"position":2024,"line":88,"column":28,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":516,"type":"object","className":"Object"}}],"text":"function (exp,tm){\r\n\t\treturn gTimerQueue.addTimer(tm,null,exp,null,1);\r\n\t}"},{"handle":172,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"isNaN","inferredName":"","resolved":true,"source":"function isNaN() { [native code] }","script":{"ref":49},"scriptId":4,"position":1150,"line":53,"column":20,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":517,"type":"string","value":"isNaN"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function isNaN() { [native code] }"},{"handle":173,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"encodeURI","inferredName":"","resolved":true,"source":"function encodeURI() { [native code] }","script":{"ref":145},"scriptId":7,"position":4935,"line":243,"column":18,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":518,"type":"string","value":"encodeURI"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function encodeURI() { [native code] }"},{"handle":174,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":519,"type":"object","className":"Object"},"name":"","inferredName":"exports.getWebview","resolved":true,"source":"function (name){\r\n\t\treturn allwebview[name];\r\n\t}","script":{"ref":28},"scriptId":31,"position":1102,"line":30,"column":28,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":519,"type":"object","className":"Object"}}],"text":"function (name){\r\n\t\treturn allwebview[name];\r\n\t}"},{"handle":175,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":520,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":520,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":176,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":521,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":521,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":177,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":522,"type":"object","className":"Object"},"name":"genCanvasTexture","inferredName":"","resolved":true,"source":"function genCanvasTexture(index)\r\n{\r\n    var pCanvas = window.document.createElement(\"canvas\");\r\n    pCanvas.width = 256;\r\n    pCanvas.height = 256;\r\n    var ctx = pCanvas.getContext(\"2d\");\r\n    ctx.save();\r\n    ctx.globalAlpha = 1;\r\n    ctx.clearRect(0, 0, 1024, 768);\r\n    ctx.fillStyle = \"#ff0000\";\r\n    ctx.fillRect(0,0,1000,1000);\r\n    \r\n    var image = g_images[0];\r\n    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n    ctx.font = \"normal 700 50px Arial\";\r\n    ctx.fillStyle = \"#ffff00\";\r\n    ctx.fillText(\"2D canvas:\"+index, 10, 10);\r\n    ctx.restore();\r\n\r\n    var textureObject = webgl.createTexture();\r\n    webgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n    webgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, pCanvas);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n    return textureObject;\r\n}","script":{"ref":16},"scriptId":34,"position":5767,"line":162,"column":25,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":523,"type":"string","value":"genCanvasTexture"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":522,"type":"object","className":"Object"}}],"text":"function genCanvasTexture(index)\r\n{\r\n    var pCanvas = window.document.createElement(\"canvas\");\r\n    pCanvas.width = 256;\r\n    pCanvas.height = 256;\r\n    var ctx = pCanvas.getContext(\"2d\");\r\n    ctx.save();\r\n    ctx.globalAlpha = 1;\r\n    ctx.clearRect(0, 0, 1024, 768);\r\n    ctx.fillStyle = \"#ff0000\";\r\n    ctx.fillRect(0,0,1000,1000);\r\n    \r\n    var image = g_images[0];\r\n    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n    ctx.font = \"normal 700 50px Arial\";\r\n    ctx.fillStyle = \"#ffff00\";\r\n    ctx.fillText(\"2D canvas:\"+index, 10, 10);\r\n    ctx.restore();\r\n\r\n    var textureObject = webgl.createTexture();\r\n    webgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n    webgl.texImage2D(webgl.TEXTURE_2D, 0, webgl.RGBA, webgl.RGBA, webgl.UNSIGNED_BYTE, pCanvas);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MIN_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_MAG_FILTER, webgl.NEAREST);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_S, webgl.CLAMP_TO_EDGE);\r\n    webgl.texParameteri(webgl.TEXTURE_2D, webgl.TEXTURE_WRAP_T, webgl.CLAMP_TO_EDGE);\r\n\r\n    return textureObject;\r\n}"},{"handle":178,"type":"object","className":"Object","constructorFunction":{"ref":524,"type":"function","name":"","inferredName":""},"protoObject":{"ref":525,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"call","value":{"ref":526,"type":"function","name":"call","inferredName":""}},{"name":"callArray","value":{"ref":527,"type":"function","name":"callArray","inferredName":""}},{"name":"setJavaMsgHandler","value":{"ref":528,"type":"function","name":"setJavaMsgHandler","inferredName":""}},{"name":"addPlatformMsgListener","value":{"ref":529,"type":"function","name":"","inferredName":"androidBridge.addPlatformMsgListener","scriptId":30}},{"name":"delPlatformMsgListener","value":{"ref":530,"type":"function","name":"","inferredName":"androidBridge.delPlatformMsgListener","scriptId":30}},{"name":"onPlatformMsg","value":{"ref":531,"type":"function","name":"","inferredName":"androidBridge.onPlatformMsg","scriptId":30}}],"text":"#<Object>"},{"handle":179,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":532,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":532,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":180,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":533,"type":"object","className":"Object"},"name":"onDrawFrame","inferredName":"","resolved":true,"source":"function onDrawFrame()\r\n{\r\n\t//var sw = window.myCanvasObject.width;\r\n\t//var sh = window.myCanvasObject.height;\r\n\t\r\n\tg_updateCount++;\r\n\tvar k=(g_updateCount%10)*(g_updateCount%20==0?-1:1);\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tvar c=childs[i];\r\n\t\t//c._left = c._left+k*c._stepX;\r\n\t\t//c._top = c._top+k*c._stepY;\r\n\t\t\r\n\t\t//c._left = 0.0;\r\n\t\t//c._top = 0.0;\r\n\t\t\r\n\t\tif(g_updateCount%10 == 0)  c._imageId = ( c._imageId + g_updateCount )% 12;\r\n\t\t\r\n\t\tg_vertice_buffer[i*16+0] = c._left;\r\n\t\tg_vertice_buffer[i*16+1] = c._top;\r\n\t\tg_vertice_buffer[i*16+4] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+5] = c._top;\r\n\t\tg_vertice_buffer[i*16+8] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+9] = c._top+c._height;\r\n\t\tg_vertice_buffer[i*16+12] = c._left;\r\n\t\tg_vertice_buffer[i*16+13] = c._top+c._height;\t\r\n\t}\r\n\r\n\twebgl.clearColor(0.0, 0.0, 0.3, 1.0);\r\n\twebgl.clear(webgl.COLOR_BUFFER_BIT);\r\n\t\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\t\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\t\t\r\n\t}\r\n\t//1 update data into GPU\r\n\tfor(var io=0;io<MULTI_BUFFER_IO;++io)\r\n\t{\r\n\t\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\t}\r\n\t\t\r\n\t//2 render each child in loop\r\n    //\t2.1 bind texture\r\n\t//\t2.2 set offset\r\n\t//\t2.3 draw triangles\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.useProgram(programObject);\r\n\t\twebgl.activeTexture(webgl.TEXTURE0);\r\n\t\t\r\n\t\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\t\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\t\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\t\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \t\r\n\t}\t\r\n\t\r\n\tif(SINGLE_DRAWCALL)\r\n\t{\r\n\t\tvar si = parseInt(Math.random()*100000) % 12;\r\n\t\tvar textureObject=g_texIDs[si];\r\n\t\tfor(var dc=0;dc<childs.length*1;++dc)\r\n\t\t{\r\n\t\t\t//add dummy interface\r\n\t\t\twebgl.getExtension();\r\n\t\t}\r\n\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\t\twebgl.drawElements(webgl.TRIANGLES,6*childs.length, webgl.UNSIGNED_SHORT, 0);\r\n\t}\r\n\telse\r\n\t{\r\n        alert(\"canvas=\"+g_texCanvasIDs);\r\n\t\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t\t{\r\n            /*\r\n\t\t\tvar textureObject=g_texIDs[childs[i]._imageId];\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\r\n\t\t\tfor (var dc = 0; dc < MULTI_DRAWCALL; ++dc) {\r\n\t\t\t    webgl.drawElements(webgl.TRIANGLES, 6, webgl.UNSIGNED_SHORT, i * 6 * 2);\r\n\t\t\t}\r\n            */\r\n            //{{temp code for test 2D canvas texture\r\n            var canvasTex = g_texCanvasIDs[i%12];\r\n            //alert(\"canvas=\"+canvasTex);\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, canvasTex);\r\n\t\t\twebgl.drawElements(webgl.TRIANGLES,6, webgl.UNSIGNED_SHORT, i*6*2);\r\n\t\t\t//webgl.deleteTexture(canvasTex);\r\n\t\t\t//}}temp code for test 2D canvas texture\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\t//webgl.finish();\r\n\twebgl.flush();\r\n}","script":{"ref":16},"scriptId":34,"position":6918,"line":192,"column":20,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":534,"type":"string","value":"onDrawFrame"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":533,"type":"object","className":"Object"}}],"text":"function onDrawFrame()\r\n{\r\n\t//var sw = window.myCanvasObject.width;\r\n\t//var sh = window.myCanvasObject.height;\r\n\t\r\n\tg_updateCount++;\r\n\tvar k=(g_updateCount%10)*(g_updateCount%20==0?-1:1);\r\n\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t{\r\n\t\tvar c=childs[i];\r\n\t\t//c._left = c._left+k*c._stepX;\r\n\t\t//c._top = c._top+k*c._stepY;\r\n\t\t\r\n\t\t//c._left = 0.0;\r\n\t\t//c._top = 0.0;\r\n\t\t\r\n\t\tif(g_updateCount%10 == 0)  c._imageId = ( c._imageId + g_updateCount )% 12;\r\n\t\t\r\n\t\tg_vertice_buffer[i*16+0] = c._left;\r\n\t\tg_vertice_buffer[i*16+1] = c._top;\r\n\t\tg_vertice_buffer[i*16+4] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+5] = c._top;\r\n\t\tg_vertice_buffer[i*16+8] = c._left+c._width;\r\n\t\tg_vertice_buffer[i*16+9] = c._top+c._height;\r\n\t\tg_vertice_buffer[i*16+12] = c._left;\r\n\t\tg_vertice_buffer[i*16+13] = c._top+c._height;\t\r\n\t}\r\n\r\n\twebgl.clearColor(0.0, 0.0, 0.3, 1.0);\r\n\twebgl.clear(webgl.COLOR_BUFFER_BIT);\r\n\t\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.bindBuffer(webgl.ELEMENT_ARRAY_BUFFER, IBO);\r\n\t\twebgl.bindBuffer(webgl.ARRAY_BUFFER, VBO);\t\t\r\n\t}\r\n\t//1 update data into GPU\r\n\tfor(var io=0;io<MULTI_BUFFER_IO;++io)\r\n\t{\r\n\t\twebgl.bufferData(webgl.ARRAY_BUFFER, g_vertice_buffer, webgl.STATIC_DRAW);\r\n\t}\r\n\t\t\r\n\t//2 render each child in loop\r\n    //\t2.1 bind texture\r\n\t//\t2.2 set offset\r\n\t//\t2.3 draw triangles\r\n\tif(SHOW_PERFORMANCE)\r\n\t{\r\n\t\twebgl.useProgram(programObject);\r\n\t\twebgl.activeTexture(webgl.TEXTURE0);\r\n\t\t\r\n\t\twebgl.enableVertexAttribArray(v4PositionIndex);\r\n\t\twebgl.vertexAttribPointer(v4PositionIndex, 2, webgl.FLOAT, false, 4*4, 0*4); \r\n\t\twebgl.enableVertexAttribArray(v4TexCoodIndex);\r\n\t\twebgl.vertexAttribPointer(v4TexCoodIndex, 2, webgl.FLOAT, false, 4*4, 2*4); \t\r\n\t}\t\r\n\t\r\n\tif(SINGLE_DRAWCALL)\r\n\t{\r\n\t\tvar si = parseInt(Math.random()*100000) % 12;\r\n\t\tvar textureObject=g_texIDs[si];\r\n\t\tfor(var dc=0;dc<childs.length*1;++dc)\r\n\t\t{\r\n\t\t\t//add dummy interface\r\n\t\t\twebgl.getExtension();\r\n\t\t}\r\n\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\t\twebgl.drawElements(webgl.TRIANGLES,6*childs.length, webgl.UNSIGNED_SHORT, 0);\r\n\t}\r\n\telse\r\n\t{\r\n        alert(\"canvas=\"+g_texCanvasIDs);\r\n\t\tfor(var i=0,sz=childs.length;i<sz;i++)\r\n\t\t{\r\n            /*\r\n\t\t\tvar textureObject=g_texIDs[childs[i]._imageId];\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, textureObject);\r\n\r\n\t\t\tfor (var dc = 0; dc < MULTI_DRAWCALL; ++dc) {\r\n\t\t\t    webgl.drawElements(webgl.TRIANGLES, 6, webgl.UNSIGNED_SHORT, i * 6 * 2);\r\n\t\t\t}\r\n            */\r\n            //{{temp code for test 2D canvas texture\r\n            var canvasTex = g_texCanvasIDs[i%12];\r\n            //alert(\"canvas=\"+canvasTex);\r\n\t\t\twebgl.bindTexture(webgl.TEXTURE_2D, canvasTex);\r\n\t\t\twebgl.drawElements(webgl.TRIANGLES,6, webgl.UNSIGNED_SHORT, i*6*2);\r\n\t\t\t//webgl.deleteTexture(canvasTex);\r\n\t\t\t//}}temp code for test 2D canvas texture\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\t//webgl.finish();\r\n\twebgl.flush();\r\n}"},{"handle":181,"type":"object","className":"Object","constructorFunction":{"ref":535,"type":"function","name":"","inferredName":""},"protoObject":{"ref":536,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"createTextureGroup","value":{"ref":537,"type":"function","name":"createTextureGroup","inferredName":""}},{"name":"createBoneAnimTemplate","value":{"ref":538,"type":"function","name":"createBoneAnimTemplate","inferredName":""}},{"name":"createBoneAnimation","value":{"ref":539,"type":"function","name":"createBoneAnimation","inferredName":""}},{"name":"createBoneInfo","value":{"ref":540,"type":"function","name":"createBoneInfo","inferredName":""}},{"name":"createEJTextureData","value":{"ref":541,"type":"function","name":"createEJTextureData","inferredName":""}},{"name":"createNode","value":{"ref":542,"type":"function","name":"createNode","inferredName":""}},{"name":"createTextWord","value":{"ref":543,"type":"function","name":"createTextWord","inferredName":""}},{"name":"createTextWordArray","value":{"ref":544,"type":"function","name":"createTextWordArray","inferredName":""}},{"name":"createTextWordImage","value":{"ref":545,"type":"function","name":"createTextWordImage","inferredName":""}},{"name":"printAllMemorySurvey","value":{"ref":546,"type":"function","name":"printAllMemorySurvey","inferredName":""}},{"name":"getDeviceModel","value":{"ref":547,"type":"function","name":"getDeviceModel","inferredName":""}},{"name":"setOnFrame","value":{"ref":548,"type":"function","name":"setOnFrame","inferredName":""}},{"name":"setOnCommitStream","value":{"ref":549,"type":"function","name":"setOnCommitStream","inferredName":""}},{"name":"setRootNode","value":{"ref":550,"type":"function","name":"setRootNode","inferredName":""}},{"name":"_setRootNode","value":{"ref":551,"type":"function","name":"_setRootNode","inferredName":""}},{"name":"setLocationObj","value":{"ref":552,"type":"function","name":"setLocationObj","inferredName":""}},{"name":"pushUrl","value":{"ref":553,"type":"function","name":"pushUrl","inferredName":""}},{"name":"getRunParam","value":{"ref":554,"type":"function","name":"getRunParam","inferredName":""}},{"name":"setOnOriChanged","value":{"ref":555,"type":"function","name":"setOnOriChanged","inferredName":""}},{"name":"showLoadingView","value":{"ref":556,"type":"function","name":"showLoadingView","inferredName":""}},{"name":"showWaiting","value":{"ref":557,"type":"function","name":"showWaiting","inferredName":""}},{"name":"setExternalLink","value":{"ref":558,"type":"function","name":"setExternalLink","inferredName":""}},{"name":"closeExternalLink","value":{"ref":559,"type":"function","name":"closeExternalLink","inferredName":""}},{"name":"setScreenWakeLock","value":{"ref":560,"type":"function","name":"setScreenWakeLock","inferredName":""}},{"name":"setUrlToLower","value":{"ref":561,"type":"function","name":"setUrlToLower","inferredName":""}},{"name":"setFontFace","value":{"ref":562,"type":"function","name":"setFontFace","inferredName":""}},{"name":"addErrorEventListener","value":{"ref":563,"type":"function","name":"addErrorEventListener","inferredName":""}},{"name":"showLogoImage","value":{"ref":564,"type":"function","name":"showLogoImage","inferredName":""}},{"name":"setLogoImageNode","value":{"ref":565,"type":"function","name":"setLogoImageNode","inferredName":""}},{"name":"getLogoImageState","value":{"ref":566,"type":"function","name":"getLogoImageState","inferredName":""}},{"name":"popToast","value":{"ref":567,"type":"function","name":"popToast","inferredName":""}},{"name":"setOnResize","value":{"ref":568,"type":"function","name":"setOnResize","inferredName":""}},{"name":"commitStream","value":{"ref":569,"type":"function","name":"commitStream","inferredName":""}},{"name":"JSToJavaBridge","value":{"ref":570,"type":"function","name":"JSToJavaBridge","inferredName":""}},{"name":"config","value":{"ref":226,"type":"object","className":"Object"}},{"name":"market","value":{"ref":110,"type":"object","className":"Object"}},{"name":"scriptTimeInterval","value":{"ref":571,"type":"object","className":"Object"}}],"text":"#<Object>"},{"handle":182,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":572,"type":"object","className":"Object"},"name":"createChildren","inferredName":"","resolved":true,"source":"function createChildren()\r\n{\r\n\tvar sw = window.myCanvasObject.width;\r\n\tvar sh = window.myCanvasObject.height;\r\n\tfor(var i=0;i<CHILD_NUMBER;i++)\r\n\t{\r\n\t\tvar node=function(){};\r\n\t\tchilds.push(node);\r\n\t\t//node._left=Math.random()*(sw-100)/sw;\r\n\t\t//node._top=Math.random()*(sh-100)/sh;\r\n\t\tnode._left=2.0*Math.random()-1.0;  //[-1.0,1.0]\r\n\t\tnode._top=2.0*Math.random()-1.0;\t\r\n\t\t//node._left=Math.random()-0.5;  //[-0.5,0.5]\r\n\t\t//node._top=Math.random()-0.5;\t\r\n\t\tnode._stepX=i%2==0?-1:1;\r\n\t\tnode._stepY=i%4==0?-1:1;\r\n\t\tnode._width = 2.0*g_images[0].width/sw;\r\n\t\tnode._height = 2.0*g_images[0].height/sh;\r\n\t\tnode._imageId = i%g_images.length;\r\n\t}\r\n\t\r\n\tinitDataBuffer();\r\n\t\r\n\tif(itv.interval != null)\r\n\t{\r\n\t\tclearInterval(itv.interval);\r\n\t\titv.interval = null;\r\n\t}\t\r\n\titv.interval = setInterval(onDrawFrame, 15);\r\n}","script":{"ref":16},"scriptId":34,"position":9722,"line":288,"column":23,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":573,"type":"string","value":"createChildren"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":572,"type":"object","className":"Object"}}],"text":"function createChildren()\r\n{\r\n\tvar sw = window.myCanvasObject.width;\r\n\tvar sh = window.myCanvasObject.height;\r\n\tfor(var i=0;i<CHILD_NUMBER;i++)\r\n\t{\r\n\t\tvar node=function(){};\r\n\t\tchilds.push(node);\r\n\t\t//node._left=Math.random()*(sw-100)/sw;\r\n\t\t//node._top=Math.random()*(sh-100)/sh;\r\n\t\tnode._left=2.0*Math.random()-1.0;  //[-1.0,1.0]\r\n\t\tnode._top=2.0*Math.random()-1.0;\t\r\n\t\t//node._left=Math.random()-0.5;  //[-0.5,0.5]\r\n\t\t//node._top=Math.random()-0.5;\t\r\n\t\tnode._stepX=i%2==0?-1:1;\r\n\t\tnode._stepY=i%4==0?-1:1;\r\n\t\tnode._width = 2.0*g_images[0].width/sw;\r\n\t\tnode._height = 2.0*g_images[0].height/sh;\r\n\t\tnode._imageId = i%g_images.length;\r\n\t}\r\n\t\r\n\tinitDataBuffer();\r\n\t\r\n\tif(itv.interval != null)\r\n\t{\r\n\t\tclearInterval(itv.interval);\r\n\t\titv.interval = null;\r\n\t}\t\r\n\titv.interval = setInterval(onDrawFrame, 15);\r\n}"},{"handle":183,"type":"number","value":1280,"text":"1280"},{"handle":184,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":574,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":574,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":185,"type":"object","className":"Object","constructorFunction":{"ref":575,"type":"function","name":"","inferredName":""},"protoObject":{"ref":576,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"height","value":{"ref":577,"type":"number","value":1080}},{"name":"width","value":{"ref":578,"type":"number","value":1920}}],"text":"#<Object>"},{"handle":186,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":579,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":579,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":187,"type":"object","className":"Object","constructorFunction":{"ref":580,"type":"function","name":"","inferredName":""},"protoObject":{"ref":581,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"platform","value":{"ref":582,"type":"string","value":"win32"}},{"name":"userAgent","value":{"ref":271,"type":"string","value":""}}],"text":"#<Object>"},{"handle":188,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":583,"type":"error","value":"ReferenceError"},"name":"ReferenceError","inferredName":"","resolved":true,"source":"function ReferenceError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":584,"type":"string","value":"ReferenceError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":583,"type":"error","value":"ReferenceError"}}],"text":"function ReferenceError() { [native code] }"},{"handle":189,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":585,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":585,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":57,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":586,"type":"object","className":"Object"},"name":"require","inferredName":"","resolved":true,"source":"function require(file,obj){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\tif(!fc||fc.length<=0){\r\n\t\talert('加载脚本失败：'+file);\r\n\t}\r\n\tvar str = '(function(exports){'+fc+'})(window)'; \r\n\ttry{\r\n\t\teval(str);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}","script":{"ref":22},"scriptId":18,"position":1132,"line":53,"column":16,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":23,"type":"string","value":"require"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":586,"type":"object","className":"Object"}}],"text":"function require(file,obj){\r\n\tvar fc = readTextAsset('scripts/'+file);\r\n\tif(!fc||fc.length<=0){\r\n\t\talert('加载脚本失败：'+file);\r\n\t}\r\n\tvar str = '(function(exports){'+fc+'})(window)'; \r\n\ttry{\r\n\t\teval(str);\t//临时。以后要加包装。\r\n\t}catch(e){\r\n\t\talert('rquire('+file+') error:'+e.stack);\r\n\t}\r\n}"},{"handle":190,"type":"number","value":"NaN","text":"NaN"},{"handle":191,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":587,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":587,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":192,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":588,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":588,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":193,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":589,"type":"error","value":"RangeError"},"name":"RangeError","inferredName":"","resolved":true,"source":"function RangeError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":590,"type":"string","value":"RangeError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":589,"type":"error","value":"RangeError"}}],"text":"function RangeError() { [native code] }"},{"handle":194,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"encodeURIComponent","inferredName":"","resolved":true,"source":"function encodeURIComponent() { [native code] }","script":{"ref":145},"scriptId":7,"position":5283,"line":259,"column":27,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":591,"type":"string","value":"encodeURIComponent"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function encodeURIComponent() { [native code] }"},{"handle":195,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"Collator","value":{"ref":592,"type":"function","name":"","inferredName":"$Object.defineProperty.value.be","scriptId":16}},{"name":"NumberFormat","value":{"ref":595,"type":"function","name":"","inferredName":"$Object.defineProperty.value.br","scriptId":16}},{"name":"DateTimeFormat","value":{"ref":596,"type":"function","name":"","inferredName":"$Object.defineProperty.value.br","scriptId":16}},{"name":"v8BreakIterator","value":{"ref":597,"type":"function","name":"","inferredName":"$Object.defineProperty.value.bM","scriptId":16}}],"text":"#<Object>"},{"handle":14,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":598,"type":"object","className":"Object"},"name":"webglInit","inferredName":"","resolved":true,"source":"function webglInit() {\r\n\t//window.myCanvasObject = document.getElementById( \"canvas_object\" );\r\n\twindow.myCanvasObject = window.document.createElement( \"canvas\" );//experimental-webgl\r\n\r\n\twebgl = myCanvasObject.getContext(\"experimental-webgl\");\r\n\tif(webgl == null)\r\n\t{\r\n\t\talert(\"do not support webgl\");\r\n\t\treturn;\r\n\t}\r\n\r\n\t//MUST: setup const values and dimensions\r\n\tSetupWebglContext(webgl);\r\n\t\t\r\n\tmyCanvasObject.width = window.innerWidth;\r\n\tmyCanvasObject.height = window.innerHeight;\r\n\twebgl.width = window.innerWidth;\r\n\twebgl.height = window.innerHeight;\r\n\r\n\twebgl.viewport(0, 0, myCanvasObject.width , myCanvasObject.height );\r\n}","script":{"ref":16},"scriptId":34,"position":1464,"line":47,"column":18,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":599,"type":"string","value":"webglInit"}},{"name":"arguments","value":{"ref":600,"type":"object","className":"Arguments"}},{"name":"caller","value":{"ref":18,"type":"function","name":"","inferredName":"pImg.onload","scriptId":34}},{"name":"prototype","value":{"ref":598,"type":"object","className":"Object"}}],"text":"function webglInit() {\r\n\t//window.myCanvasObject = document.getElementById( \"canvas_object\" );\r\n\twindow.myCanvasObject = window.document.createElement( \"canvas\" );//experimental-webgl\r\n\r\n\twebgl = myCanvasObject.getContext(\"experimental-webgl\");\r\n\tif(webgl == null)\r\n\t{\r\n\t\talert(\"do not support webgl\");\r\n\t\treturn;\r\n\t}\r\n\r\n\t//MUST: setup const values and dimensions\r\n\tSetupWebglContext(webgl);\r\n\t\t\r\n\tmyCanvasObject.width = window.innerWidth;\r\n\tmyCanvasObject.height = window.innerHeight;\r\n\twebgl.width = window.innerWidth;\r\n\twebgl.height = window.innerHeight;\r\n\r\n\twebgl.viewport(0, 0, myCanvasObject.width , myCanvasObject.height );\r\n}"},{"handle":196,"type":"string","value":"precision mediump float;\nattribute vec2 position;\nattribute vec2 inputTextureCoo... (length: 240)","fromIndex":0,"toIndex":80,"length":240,"text":"precision mediump float;\nattribute vec2 position;\nattribute vec2 inputTextureCoo... (length: 240)"},{"handle":197,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":601,"type":"object","className":"String"},"name":"String","inferredName":"","resolved":true,"source":"function String() { [native code] }","script":{"ref":199},"scriptId":6,"position":27,"line":1,"column":26,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":602,"type":"string","value":"String"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":601,"type":"object","className":"String"}},{"name":"fromCharCode","value":{"ref":603,"type":"function","name":"fromCharCode","inferredName":"","scriptId":6}}],"text":"function String() { [native code] }"},{"handle":200,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":604,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":604,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":201,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"parseFloat","inferredName":"","resolved":true,"source":"function parseFloat() { [native code] }","script":{"ref":49},"scriptId":4,"position":1920,"line":84,"column":25,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":605,"type":"string","value":"parseFloat"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function parseFloat() { [native code] }"},{"handle":202,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":606,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":606,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":203,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":607,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":607,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":204,"type":"number","value":6,"text":"6"},{"handle":205,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":608,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":608,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":206,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":609,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":609,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":207,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":610,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":610,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":208,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":611,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":611,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":209,"type":"object","className":"Array","constructorFunction":{"ref":90,"type":"function","name":"Array","inferredName":""},"protoObject":{"ref":297,"type":"object","className":"Array"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}}],"text":"#<Array>"},{"handle":210,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":612,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":612,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":211,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":613,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":613,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":212,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":614,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":614,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":213,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":615,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":615,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":214,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":616,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":616,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":215,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"setItem","value":{"ref":617,"type":"function","name":"","inferredName":"db.setItem","scriptId":24}},{"name":"getItem","value":{"ref":618,"type":"function","name":"","inferredName":"db.getItem","scriptId":24}},{"name":"removeItem","value":{"ref":619,"type":"function","name":"","inferredName":"db.removeItem","scriptId":24}},{"name":"clear","value":{"ref":620,"type":"function","name":"","inferredName":"db.clear","scriptId":24}}],"text":"#<Object>"},{"handle":216,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":621,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":621,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":217,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":622,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":622,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":218,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":623,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":623,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":219,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":624,"type":"object","className":"Object"},"name":"","inferredName":"exports.createWebview","resolved":true,"source":"function (name,url,hidden){\r\n\t\tvar ret={\r\n\t\t\tname:name,\r\n\t\t\t//par是一个对象\r\n\t\t\t//调用创建的webview中的脚本函数。\r\n\t\t\tcallJS:function(methodName,par){\r\n\t\t\t\tandroidBridge.call('callWebviewJsMethod',JSON.stringify({name:this.name,method:methodName,params:JSON.stringify(par)}));\r\n\t\t\t},\r\n\t\t\t//创建的webview可以回调layaboxplayer的func\r\n\t\t\taddJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.addPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.addPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.addPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t},\r\n\t\t\tdelJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.delPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.delPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.delPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t}\r\n\t\t};\r\n\t\tandroidBridge.call('createWebview',JSON.stringify({name:name,url:url,hidden:hidden}));\r\n\t\tandroidBridge.name = name;\r\n\t\tallwebview[name]=ret;\r\n\t\treturn ret;\r\n\t}","script":{"ref":28},"scriptId":31,"position":88,"line":2,"column":31,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":624,"type":"object","className":"Object"}}],"text":"function (name,url,hidden){\r\n\t\tvar ret={\r\n\t\t\tname:name,\r\n\t\t\t//par是一个对象\r\n\t\t\t//调用创建的webview中的脚本函数。\r\n\t\t\tcallJS:function(methodName,par){\r\n\t\t\t\tandroidBridge.call('callWebviewJsMethod',JSON.stringify({name:this.name,method:methodName,params:JSON.stringify(par)}));\r\n\t\t\t},\r\n\t\t\t//创建的webview可以回调layaboxplayer的func\r\n\t\t\taddJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.addPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.addPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.addPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t},\r\n\t\t\tdelJSCallback:function(msg,func){\r\n\t\t\t\tif( !androidBridge.delPlatformMsgListener ){\r\n\t\t\t\t\tthrow '没有 androidBridge.delPlatformMsgListener，应该先包含androidBridge.js！';\r\n\t\t\t\t}\r\n\t\t\t\tandroidBridge.delPlatformMsgListener('webview_MSG_'+name+'_'+msg, func);\r\n\t\t\t}\r\n\t\t};\r\n\t\tandroidBridge.call('createWebview',JSON.stringify({name:name,url:url,hidden:hidden}));\r\n\t\tandroidBridge.name = name;\r\n\t\tallwebview[name]=ret;\r\n\t\treturn ret;\r\n\t}"},{"handle":220,"type":"object","className":"Object","constructorFunction":{"ref":625,"type":"function","name":"","inferredName":""},"protoObject":{"ref":626,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"cookie","value":{"ref":271,"type":"string","value":""}},{"name":"createElement","value":{"ref":627,"type":"function","name":"","inferredName":"document.createElement","scriptId":18}},{"name":"_createElement","value":{"ref":628,"type":"function","name":"_createElement","inferredName":""}},{"name":"conchAddEventListener","value":{"ref":629,"type":"function","name":"conchAddEventListener","inferredName":""}},{"name":"loadCookie","value":{"ref":630,"type":"function","name":"loadCookie","inferredName":""}},{"name":"body","value":{"ref":631,"type":"object","className":"Object"}},{"name":"keydown","value":{"ref":9,"type":"undefined"}},{"name":"keyup","value":{"ref":9,"type":"undefined"}},{"name":"onkeydown","value":{"ref":9,"type":"undefined"}},{"name":"onkeyup","value":{"ref":9,"type":"undefined"}},{"name":"evtMaps","value":{"ref":632,"type":"object","className":"Array"}},{"name":"addEventListener","value":{"ref":633,"type":"function","name":"","inferredName":"layaDoc.addEventListener","scriptId":23}},{"name":"removeEventListener","value":{"ref":634,"type":"function","name":"","inferredName":"layaDoc.removeEventListener","scriptId":23}},{"name":"onEvt","value":{"ref":635,"type":"function","name":"","inferredName":"layaDoc.onEvt","scriptId":23}}],"text":"#<Object>"},{"handle":221,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":636,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":636,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":222,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"name":"Function","inferredName":"","resolved":true,"source":"function Function() { [native code] }","script":{"ref":49},"scriptId":4,"position":29348,"line":1284,"column":28,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":637,"type":"string","value":"Function"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1}}],"text":"function Function() { [native code] }"},{"handle":223,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":638,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":638,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":224,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":639,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":639,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":225,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":640,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":640,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":226,"type":"object","className":"Object","constructorFunction":{"ref":641,"type":"function","name":"","inferredName":""},"protoObject":{"ref":642,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"urlIgnoreCase","value":{"ref":318,"type":"boolean","value":false}},{"name":"thumbMgrEnable","value":{"ref":5,"type":"boolean","value":true}},{"name":"thumbSize","value":{"ref":643,"type":"number","value":1048576}},{"name":"maxEJAnimation","value":{"ref":644,"type":"number","value":100}},{"name":"pushAtlasMaxWidth","value":{"ref":645,"type":"number","value":512}},{"name":"atlasNum","value":{"ref":380,"type":"number","value":8}},{"name":"atlasGridSize","value":{"ref":646,"type":"number","value":16}},{"name":"atlasHeight","value":{"ref":647,"type":"number","value":1024}},{"name":"atlasWidth","value":{"ref":647,"type":"number","value":1024}},{"name":"maxTextureMemSize","value":{"ref":648,"type":"number","value":50331648}},{"name":"maxFileMemSize","value":{"ref":649,"type":"number","value":18874368}},{"name":"paramExt","value":{"ref":271,"type":"string","value":""}},{"name":"getStoragePath","value":{"ref":650,"type":"function","name":"getStoragePath","inferredName":""}},{"name":"getTotalMem","value":{"ref":651,"type":"function","name":"getTotalMem","inferredName":""}},{"name":"getUsedMem","value":{"ref":652,"type":"function","name":"getUsedMem","inferredName":""}},{"name":"getAvalidMem","value":{"ref":653,"type":"function","name":"getAvalidMem","inferredName":""}},{"name":"getScreenInch","value":{"ref":654,"type":"function","name":"getScreenInch","inferredName":""}},{"name":"setTouchMoveRange","value":{"ref":655,"type":"function","name":"setTouchMoveRange","inferredName":""}},{"name":"getScreenOrientation","value":{"ref":656,"type":"function","name":"getScreenOrientation","inferredName":""}},{"name":"setScreenOrientation","value":{"ref":657,"type":"function","name":"setScreenOrientation","inferredName":""}},{"name":"setThumbSize","value":{"ref":658,"type":"function","name":"setThumbSize","inferredName":""}},{"name":"getThumbSize","value":{"ref":659,"type":"function","name":"getThumbSize","inferredName":""}},{"name":"setUrlIgnoreCase","value":{"ref":660,"type":"function","name":"setUrlIgnoreCase","inferredName":""}},{"name":"getUrlIgnoreCase","value":{"ref":661,"type":"function","name":"getUrlIgnoreCase","inferredName":""}},{"name":"showFps","value":{"ref":662,"type":"function","name":"showFps","inferredName":""}},{"name":"setFpsParam","value":{"ref":663,"type":"function","name":"setFpsParam","inferredName":""}},{"name":"getNetworkType","value":{"ref":664,"type":"function","name":"getNetworkType","inferredName":""}},{"name":"getRuntimeVersion","value":{"ref":665,"type":"function","name":"getRuntimeVersion","inferredName":""}},{"name":"setDownloadTryNum","value":{"ref":666,"type":"function","name":"setDownloadTryNum","inferredName":""}},{"name":"setDownloadPathReplace","value":{"ref":667,"type":"function","name":"setDownloadPathReplace","inferredName":""}},{"name":"setDownloadTail","value":{"ref":668,"type":"function","name":"setDownloadTail","inferredName":""}},{"name":"setDownloadNoResponseTimeout","value":{"ref":669,"type":"function","name":"setDownloadNoResponseTimeout","inferredName":""}},{"name":"setDownloadReplaceExt","value":{"ref":670,"type":"function","name":"setDownloadReplaceExt","inferredName":""}},{"name":"setDownloadIgnoreCRLR","value":{"ref":671,"type":"function","name":"setDownloadIgnoreCRLR","inferredName":""}},{"name":"setDownloadUseSession","value":{"ref":672,"type":"function","name":"setDownloadUseSession","inferredName":""}},{"name":"addChkIgnoreChksumExt","value":{"ref":673,"type":"function","name":"addChkIgnoreChksumExt","inferredName":""}},{"name":"clearChkIgnoreChksumExt","value":{"ref":674,"type":"function","name":"clearChkIgnoreChksumExt","inferredName":""}},{"name":"setDownloadUnmask","value":{"ref":675,"type":"function","name":"setDownloadUnmask","inferredName":""}},{"name":"resetDownloadUnmask","value":{"ref":676,"type":"function","name":"resetDownloadUnmask","inferredName":""}},{"name":"setDebugEnableErrorLog","value":{"ref":677,"type":"function","name":"setDebugEnableErrorLog","inferredName":""}},{"name":"setDebugEnableDbgGesture","value":{"ref":678,"type":"function","name":"setDebugEnableDbgGesture","inferredName":""}},{"name":"setDebugEnableMemLog","value":{"ref":679,"type":"function","name":"setDebugEnableMemLog","inferredName":""}},{"name":"setDebugUploadUrl","value":{"ref":680,"type":"function","name":"setDebugUploadUrl","inferredName":""}},{"name":"setDebugUploadChkErrorUrl","value":{"ref":681,"type":"function","name":"setDebugUploadChkErrorUrl","inferredName":""}},{"name":"getOS","value":{"ref":682,"type":"function","name":"getOS","inferredName":""}},{"name":"getBrowserInfo","value":{"ref":683,"type":"function","name":"getBrowserInfo","inferredName":""}},{"name":"getWifiMac","value":{"ref":684,"type":"function","name":"getWifiMac","inferredName":""}},{"name":"getGuid","value":{"ref":685,"type":"function","name":"getGuid","inferredName":""}},{"name":"getDeviceModel","value":{"ref":686,"type":"function","name":"getDeviceModel","inferredName":""}},{"name":"getDeviceInfo","value":{"ref":687,"type":"function","name":"getDeviceInfo","inferredName":""}},{"name":"setBigTextureScale","value":{"ref":688,"type":"function","name":"setBigTextureScale","inferredName":""}},{"name":"PerfUpdateDt","value":{"ref":135,"type":"function","name":"","inferredName":""}},{"name":"PerfAddData","value":{"ref":224,"type":"function","name":"","inferredName":""}},{"name":"PerfDelData","value":{"ref":233,"type":"function","name":"","inferredName":""}},{"name":"PerfShow","value":{"ref":128,"type":"function","name":"","inferredName":""}},{"name":"RenderStreamType","value":{"ref":61,"type":"number","value":0}}],"text":"#<Object>"},{"handle":227,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":689,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":689,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":228,"type":"object","className":"Array","constructorFunction":{"ref":90,"type":"function","name":"Array","inferredName":""},"protoObject":{"ref":297,"type":"object","className":"Array"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}}],"text":"#<Array>"},{"handle":229,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":690,"type":"object","className":"Object"},"name":"shaderInitWithVertexAndFragmentShader","inferredName":"","resolved":true,"source":"function shaderInitWithVertexAndFragmentShader(vsh, fsh) {\r\n\tvertexShaderObject = webgl.createShader(webgl.VERTEX_SHADER);\r\n\tfragmentShaderObject = webgl.createShader(webgl.FRAGMENT_SHADER);\r\n\twebgl.shaderSource(vertexShaderObject, vsh);\r\n\twebgl.shaderSource(fragmentShaderObject, fsh);\r\n\twebgl.compileShader(vertexShaderObject);\r\n\twebgl.compileShader(fragmentShaderObject);\r\n\tif (!webgl.getShaderParameter(vertexShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(vertexShaderObject) + \"in vertex shader\"); return; }\r\n\tif (!webgl.getShaderParameter(fragmentShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(fragmentShaderObject) + \"in fragment shader\"); return; }\r\n}","script":{"ref":16},"scriptId":34,"position":2129,"line":69,"column":46,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":691,"type":"string","value":"shaderInitWithVertexAndFragmentShader"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":690,"type":"object","className":"Object"}}],"text":"function shaderInitWithVertexAndFragmentShader(vsh, fsh) {\r\n\tvertexShaderObject = webgl.createShader(webgl.VERTEX_SHADER);\r\n\tfragmentShaderObject = webgl.createShader(webgl.FRAGMENT_SHADER);\r\n\twebgl.shaderSource(vertexShaderObject, vsh);\r\n\twebgl.shaderSource(fragmentShaderObject, fsh);\r\n\twebgl.compileShader(vertexShaderObject);\r\n\twebgl.compileShader(fragmentShaderObject);\r\n\tif (!webgl.getShaderParameter(vertexShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(vertexShaderObject) + \"in vertex shader\"); return; }\r\n\tif (!webgl.getShaderParameter(fragmentShaderObject, webgl.COMPILE_STATUS)) { alert(webgl.getShaderInfoLog(fragmentShaderObject) + \"in fragment shader\"); return; }\r\n}"},{"handle":230,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":692,"type":"object","className":"Object"},"name":"getStartDefaultHtmlPath","inferredName":"","resolved":true,"source":"function getStartDefaultHtmlPath()\r\n{\r\n\tvar sExePath = getExePath();\r\n\tif( sExePath != null )\r\n\t{\r\n\t\tvar sStartHtml = \"\";\r\n\t\tvar vString = sExePath.split( '\\\\' );\r\n\t\tvString.pop();vString.pop();\r\n\t\tsStartHtml = vString.join( '/' );\r\n\t\tsStartHtml += '/starthtml/default.html'\r\n\t\treturn sStartHtml\r\n\t}\r\n\treturn null;\r\n}","script":{"ref":22},"scriptId":18,"position":14056,"line":535,"column":32,"scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":693,"type":"string","value":"getStartDefaultHtmlPath"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":692,"type":"object","className":"Object"}}],"text":"function getStartDefaultHtmlPath()\r\n{\r\n\tvar sExePath = getExePath();\r\n\tif( sExePath != null )\r\n\t{\r\n\t\tvar sStartHtml = \"\";\r\n\t\tvar vString = sExePath.split( '\\\\' );\r\n\t\tvString.pop();vString.pop();\r\n\t\tsStartHtml = vString.join( '/' );\r\n\t\tsStartHtml += '/starthtml/default.html'\r\n\t\treturn sStartHtml\r\n\t}\r\n\treturn null;\r\n}"},{"handle":231,"type":"object","className":"Object","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[],"text":"#<Object>"},{"handle":232,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":694,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":694,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":233,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":695,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":695,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":234,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":696,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":696,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":235,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":697,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":697,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":236,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"escape","inferredName":"","resolved":true,"source":"function escape() { [native code] }","script":{"ref":145},"scriptId":7,"position":6063,"line":303,"column":18,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":698,"type":"string","value":"escape"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function escape() { [native code] }"},{"handle":237,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":699,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":699,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":238,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":422,"type":"object","className":"Object"},"name":"Uint16Array","inferredName":"","resolved":true,"source":"function Uint16Array() { [native code] }","script":{"ref":70},"scriptId":15,"position":4181,"line":180,"column":31,"scopes":[],"properties":[{"name":"length","value":{"ref":245,"type":"number","value":3}},{"name":"name","value":{"ref":700,"type":"string","value":"Uint16Array"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":422,"type":"object","className":"Object"}},{"name":"BYTES_PER_ELEMENT","value":{"ref":283,"type":"number","value":2}}],"text":"function Uint16Array() { [native code] }"},{"handle":239,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":701,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":701,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":240,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":702,"type":"object","className":"Object"},"name":"","inferredName":"exports.cancelAnimationFrame","resolved":true,"source":"function (handle){\r\n\t\tfor(var i=0,sz=gTimerQueue.AniFrame.length; i<sz; i++){\r\n\t\t\tvar obj = gTimerQueue.AniFrame[i];\r\n\t\t\tif(obj.id===handle){\r\n\t\t\t\tobj.del=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}","script":{"ref":46},"scriptId":26,"position":2618,"line":112,"column":38,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":3,"index":2},{"type":0,"index":3}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":702,"type":"object","className":"Object"}}],"text":"function (handle){\r\n\t\tfor(var i=0,sz=gTimerQueue.AniFrame.length; i<sz; i++){\r\n\t\t\tvar obj = gTimerQueue.AniFrame[i];\r\n\t\t\tif(obj.id===handle){\r\n\t\t\t\tobj.del=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}"},{"handle":241,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":703,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":703,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":242,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":704,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":704,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":243,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":705,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":705,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":244,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":706,"type":"error","value":"EvalError"},"name":"EvalError","inferredName":"","resolved":true,"source":"function EvalError() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":707,"type":"string","value":"EvalError"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":706,"type":"error","value":"EvalError"}}],"text":"function EvalError() { [native code] }"},{"handle":245,"type":"number","value":3,"text":"3"},{"handle":246,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":708,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":708,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":247,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":709,"type":"object","className":"Object"},"name":"","inferredName":"window.JavaCallJS","resolved":true,"source":"function (param){\r\n\t\t_ExternalInterface.executeJS(param);\r\n\t}","script":{"ref":36},"scriptId":30,"position":1336,"line":48,"column":29,"scopes":[{"type":3,"index":0},{"type":3,"index":1},{"type":0,"index":2}],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":709,"type":"object","className":"Object"}}],"text":"function (param){\r\n\t\t_ExternalInterface.executeJS(param);\r\n\t}"},{"handle":248,"type":"object","className":"JSON","constructorFunction":{"ref":55,"type":"function","name":"Object","inferredName":"","scriptId":4},"protoObject":{"ref":11,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"parse","value":{"ref":710,"type":"function","name":"parse","inferredName":"","scriptId":12}},{"name":"stringify","value":{"ref":713,"type":"function","name":"stringify","inferredName":"","scriptId":12}}],"text":"#<Object>"},{"handle":249,"type":"object","className":"Object","constructorFunction":{"ref":714,"type":"function","name":"","inferredName":"","scriptId":18},"protoObject":{"ref":715,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"seqs","value":{"ref":716,"type":"object","className":"Array"}},{"name":"run","value":{"ref":717,"type":"function","name":"","inferredName":"run","scriptId":18}}],"text":"#<Object>"},{"handle":250,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":718,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":718,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":251,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":719,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":719,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":252,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"unescape","inferredName":"","resolved":true,"source":"function unescape() { [native code] }","script":{"ref":145},"scriptId":7,"position":6131,"line":307,"column":20,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":720,"type":"string","value":"unescape"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function unescape() { [native code] }"},{"handle":253,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":721,"type":"object","className":"Object"},"name":"","inferredName":"exports.printstack","resolved":true,"source":"function (){\r\n\tvar e = new Error();\r\n\talert(e.stack);\r\n}","script":{"ref":26},"scriptId":22,"position":198,"line":7,"column":27,"scopes":[{"type":3,"index":0},{"type":0,"index":1}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":721,"type":"object","className":"Object"}}],"text":"function (){\r\n\tvar e = new Error();\r\n\talert(e.stack);\r\n}"},{"handle":254,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":722,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":722,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":255,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":723,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":723,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":256,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":724,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":724,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":8,"type":"object","className":"Object","constructorFunction":{"ref":13,"type":"function","name":"","inferredName":""},"protoObject":{"ref":58,"type":"object","className":"Object"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"flushRenderCommands","value":{"ref":59,"type":"function","name":"flushRenderCommands","inferredName":""}},{"name":"flushNeededRT","value":{"ref":60,"type":"function","name":"flushNeededRT","inferredName":""}},{"name":"BUFFER_SIZE","value":{"ref":4,"type":"number","value":20480}},{"name":"width","value":{"ref":61,"type":"number","value":0}},{"name":"height","value":{"ref":61,"type":"number","value":0}},{"name":"_idGenerator","value":{"ref":62,"type":"object","className":"Object"}},{"name":"_locTable","value":{"ref":63,"type":"object","className":"Object"}}],"text":"#<Object>"},{"handle":257,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":9,"type":"undefined"},"name":"parseInt","inferredName":"","resolved":true,"source":"function parseInt() { [native code] }","script":{"ref":49},"scriptId":4,"position":1411,"line":61,"column":23,"scopes":[],"properties":[{"name":"length","value":{"ref":283,"type":"number","value":2}},{"name":"name","value":{"ref":725,"type":"string","value":"parseInt"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}}],"text":"function parseInt() { [native code] }"},{"handle":258,"type":"object","className":"Array","constructorFunction":{"ref":90,"type":"function","name":"Array","inferredName":""},"protoObject":{"ref":297,"type":"object","className":"Array"},"prototypeObject":{"ref":9,"type":"undefined"},"properties":[{"name":"length","value":{"ref":67,"type":"number","value":12}},{"name":0,"value":{"ref":726,"type":"object","className":"Object"}},{"name":1,"value":{"ref":727,"type":"object","className":"Object"}},{"name":2,"value":{"ref":728,"type":"object","className":"Object"}},{"name":3,"value":{"ref":729,"type":"object","className":"Object"}},{"name":4,"value":{"ref":730,"type":"object","className":"Object"}},{"name":5,"value":{"ref":731,"type":"object","className":"Object"}},{"name":6,"value":{"ref":732,"type":"object","className":"Object"}},{"name":7,"value":{"ref":733,"type":"object","className":"Object"}},{"name":8,"value":{"ref":734,"type":"object","className":"Object"}},{"name":9,"value":{"ref":735,"type":"object","className":"Object"}},{"name":10,"value":{"ref":17,"type":"object","className":"Object"}},{"name":11,"value":{"ref":142,"type":"object","className":"Object"}}],"text":"#<Array>"},{"handle":259,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":736,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":736,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":260,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":737,"type":"error","value":"Error"},"name":"Error","inferredName":"","resolved":true,"source":"function Error() { [native code] }","script":{"ref":78},"scriptId":9,"position":24732,"line":847,"column":19,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":738,"type":"string","value":"Error"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":737,"type":"error","value":"Error"}},{"name":"captureStackTrace","value":{"ref":739,"type":"function","name":"captureStackTrace","inferredName":"","scriptId":9}},{"name":"stackTraceLimit","value":{"ref":740,"type":"number","value":10}}],"text":"function Error() { [native code] }"},{"handle":261,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":741,"type":"object","className":"Boolean"},"name":"Boolean","inferredName":"","resolved":true,"source":"function Boolean() { [native code] }","script":{"ref":49},"scriptId":4,"position":23049,"line":1032,"column":27,"scopes":[],"properties":[{"name":"length","value":{"ref":56,"type":"number","value":1}},{"name":"name","value":{"ref":742,"type":"string","value":"Boolean"}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":741,"type":"object","className":"Boolean"}}],"text":"function Boolean() { [native code] }"},{"handle":262,"type":"function","className":"Function","constructorFunction":{"ref":222,"type":"function","name":"Function","inferredName":"","scriptId":4},"protoObject":{"ref":265,"type":"function","name":"Empty","inferredName":"","scriptId":1},"prototypeObject":{"ref":743,"type":"object","className":"Object"},"name":"","inferredName":"","resolved":true,"source":"function () { [native code] }","scopes":[{"type":0,"index":0}],"properties":[{"name":"length","value":{"ref":61,"type":"number","value":0}},{"name":"name","value":{"ref":271,"type":"string","value":""}},{"name":"arguments","value":{"ref":12,"type":"null","value":null}},{"name":"caller","value":{"ref":12,"type":"null","value":null}},{"name":"prototype","value":{"ref":743,"type":"object","className":"Object"}}],"text":"function () { [native code] }"},{"handle":263,"type":"string","value":"precision mediump float;\nvarying vec2 textureCoordinate;\nuniform sampler2D input... (length: 174)","fromIndex":0,"toIndex":80,"length":174,"text":"precision mediump float;\nvarying vec2 textureCoordinate;\nuniform sampler2D input... (length: 174)"}],"running":false}
> end of message

> Sent to Chrome:
Content-Length:197

{"seq":23,"type":"request","command":"evaluate","arguments":{"expression":"String(object)","global":true,"inlineRefs":true,"disable_break":true,"additional_context":[{"handle":0,"name":"object"}]}}
> end of message

> Received from Chrome:
Content-Length: 208

{"seq":11,"request_seq":23,"type":"response","command":"evaluate","success":true,"body":{"handle":744,"type":"string","value":"[object Object]","length":15,"text":"[object Object]"},"refs":[],"running":false}
> end of message
